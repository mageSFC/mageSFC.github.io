<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Golangå­¦ä¹ ä¹‹structè½¬json | é©¬å“¥ç§æˆ¿èœ</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="golang ç»“æ„ä½“ struct è½¬ json å­—ç¬¦ä¸²https:&#x2F;&#x2F;www.sohamkamani.com&#x2F;golang&#x2F;omitempty&#x2F; åŸºæœ¬ç”¨æ³•12345678910111213type Dog struct &amp;#123;	Breed string	WeightKg int&amp;#125;func main() &amp;#123;	d :&#x3D; Dog&amp;#123;		Breed:    &quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="Golangå­¦ä¹ ä¹‹structè½¬json">
<meta property="og:url" content="https://magesfc.github.io/mage/6118b9bf91824574204e116d5b138ffbaab72268/">
<meta property="og:site_name" content="é©¬å“¥ç§æˆ¿èœ">
<meta property="og:description" content="golang ç»“æ„ä½“ struct è½¬ json å­—ç¬¦ä¸²https:&#x2F;&#x2F;www.sohamkamani.com&#x2F;golang&#x2F;omitempty&#x2F; åŸºæœ¬ç”¨æ³•12345678910111213type Dog struct &amp;#123;	Breed string	WeightKg int&amp;#125;func main() &amp;#123;	d :&#x3D; Dog&amp;#123;		Breed:    &quot;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://t.mwm.moe/fj/">
<meta property="article:published_time" content="2022-11-14T06:06:32.000Z">
<meta property="article:modified_time" content="2022-11-14T06:06:32.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="golang">
<meta property="article:tag" content="struct">
<meta property="article:tag" content="json">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://t.mwm.moe/fj/"><link rel="shortcut icon" href="https://www.zeekrlife.com/favicon.png"><link rel="canonical" href="https://magesfc.github.io/mage/6118b9bf91824574204e116d5b138ffbaab72268/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: mage","link":"é“¾æ¥: ","source":"æ¥æº: é©¬å“¥ç§æˆ¿èœ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Golangå­¦ä¹ ä¹‹structè½¬json',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-14 14:06:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">233</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">40</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://t.mwm.moe/fj/')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">é©¬å“¥ç§æˆ¿èœ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Golangå­¦ä¹ ä¹‹structè½¬json</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-11-14T06:06:32.000Z" title="å‘è¡¨äº 2022-11-14 14:06:32">2022-11-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-11-14T06:06:32.000Z" title="æ›´æ–°äº 2022-11-14 14:06:32">2022-11-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/golang/">golang</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Golangå­¦ä¹ ä¹‹structè½¬json"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="golang-ç»“æ„ä½“-struct-è½¬-json-å­—ç¬¦ä¸²"><a href="#golang-ç»“æ„ä½“-struct-è½¬-json-å­—ç¬¦ä¸²" class="headerlink" title="golang ç»“æ„ä½“ struct è½¬ json å­—ç¬¦ä¸²"></a>golang ç»“æ„ä½“ struct è½¬ json å­—ç¬¦ä¸²</h1><p><a target="_blank" rel="noopener" href="https://www.sohamkamani.com/golang/omitempty/">https://www.sohamkamani.com/golang/omitempty/</a></p>
<h1 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type Dog struct &#123;</span><br><span class="line">	Breed string</span><br><span class="line">	WeightKg int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	d := Dog&#123;</span><br><span class="line">		Breed:    &quot;dalmation&quot;,</span><br><span class="line">		WeightKg: 45,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ := json.Marshal(d)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;Breed&quot;:&quot;dalmation&quot;,&quot;WeightKg&quot;:45&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ å»æ‰ ç»“æ„ä½“ ä¸­çš„ WeightKg å±æ€§ åˆä¼šå¦‚ä½•å‘¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">	d := Dog&#123;</span><br><span class="line">		Breed:    &quot;pug&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ := json.Marshal(d)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;Breed&quot;:&quot;pug&quot;,&quot;WeightKg&quot;:0&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>WeightKg æ˜¯ 0 äº†ï¼Œ æˆ‘ä»¬å¯èƒ½æ›´å¸Œæœ› æ˜¯ â€œWeightKgâ€:null, æˆ–è€… ä¸è¦å¸¦ä¸Š è¿™ä¸ªå±æ€§äº†ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬æ²¡ç»™ç»“æ„ä½“ä¸­è¿™ä¸ªå±æ€§èµ‹å€¼ï¼Œå¸Œæœ›çš„ç»“æ„å°±ä¸è¦å¸¦ä¸Šè¿™ä¸ªã€‚</p>
<h1 id="omitempty-æ ‡ç­¾"><a href="#omitempty-æ ‡ç­¾" class="headerlink" title="omitempty æ ‡ç­¾"></a>omitempty æ ‡ç­¾</h1><p>è¿™ä¸­æƒ…å†µ å¯ä»¥ä½¿ç”¨ omitempty  æ ‡ç­¾</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">type Dog struct &#123;</span><br><span class="line">	Breed    string</span><br><span class="line">	WeightKg int `json:&quot;,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	d := Dog&#123;</span><br><span class="line">		Breed: &quot;dalmation&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ := json.Marshal(d)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™ å°±ä¼š è¾“å‡º å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;Breed&quot;:&quot;dalmation&quot;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Values-that-Cannot-Be-Omitted"><a href="#Values-that-Cannot-Be-Omitted" class="headerlink" title="Values that Cannot Be Omitted"></a>Values that Cannot Be Omitted</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">type dimension struct &#123;</span><br><span class="line">	Height int</span><br><span class="line">	Width int</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">type Dog struct &#123;</span><br><span class="line">	Breed    string</span><br><span class="line">	WeightKg int</span><br><span class="line">	Size dimension `json:&quot;,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	d := Dog&#123;</span><br><span class="line">		Breed: &quot;pug&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ := json.Marshal(d)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ åµŒå¥— ä¸€ä¸ª ç»“æ„ä½“ï¼Œè¿™æ—¶å€™ åˆå‡ºé—®é¢˜äº†ï¼Œè¿™æ ·è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;Breed&quot;:&quot;pug&quot;,&quot;WeightKg&quot;:0,&quot;Size&quot;:&#123;&quot;Height&quot;:0,&quot;Width&quot;:0&#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæƒ…å†µ æˆ‘ä»¬æ²¡æœ‰ç»™ Size è¿™ä¸ªå±æ€§ èµ‹å€¼ï¼Œä½†æ˜¯ json æ‰“å°å¤„ç†çš„ è¿˜æ˜¯å¸¦ä¸Šè¿™ä¸ªå±æ€§äº†ï¼Œ</p>
<p>è§£å†³æ–¹æ³•æ˜¯ ä½¿ç”¨ æŒ‡é’ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Dog struct &#123;</span><br><span class="line">	Breed    string</span><br><span class="line">	WeightKg int</span><br><span class="line">	// Now `Size` is a pointer to a `dimension` instance</span><br><span class="line">	Size *dimension `json:&quot;,omitempty&quot;`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æŒ‡é’ˆä¹‹å è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;Breed&quot;:&quot;pug&quot;,&quot;WeightKg&quot;:0&#125;</span><br></pre></td></tr></table></figure>



<h1 id="The-Difference-Between-0-â€œâ€-and-Nil"><a href="#The-Difference-Between-0-â€œâ€-and-Nil" class="headerlink" title="The Difference Between 0, â€œâ€ and Nil"></a>The Difference Between 0, â€œâ€ and Nil</h1><p>What would be the output of this code?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type Dog struct &#123;</span><br><span class="line">	Age *int `json:&quot;,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	age := 0</span><br><span class="line">	d := Dog&#123;</span><br><span class="line">		Age: &amp;age,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	b, _ := json.Marshal(d)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;&quot;Age&quot;:0&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Restaurant struct &#123;</span><br><span class="line">	NumberOfCustomers int `json:&quot;,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	d := Restaurant&#123;</span><br><span class="line">		NumberOfCustomers: 0,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ := json.Marshal(d)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">type Restaurant struct &#123;</span><br><span class="line">	NumberOfCustomers *int `json:&quot;,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	d1 := Restaurant&#123;&#125;</span><br><span class="line">	b, _ := json.Marshal(d1)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">	//Prints: &#123;&#125;</span><br><span class="line">	</span><br><span class="line">	n := 0</span><br><span class="line">	d2 := Restaurant&#123;</span><br><span class="line">		NumberOfCustomers: &amp;n,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ = json.Marshal(d2)</span><br><span class="line">	fmt.Println(string(b))</span><br><span class="line">	//Prints: &#123;&quot;NumberOfCustomers&quot;:0&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;NumberOfCustomers&quot;:0&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="When-to-use-â€œomitemptyâ€"><a href="#When-to-use-â€œomitemptyâ€" class="headerlink" title="When to use â€œomitemptyâ€"></a>When to use â€œomitemptyâ€</h1><p>Although weâ€™ve gone through the usage of omitempty, the most important thing to remember is that it should be used sparingly. If the application consuming the JSON objects generated by the Go application doesnâ€™t differentiate between undefined keys and zero value keys, then thereâ€™s really no reason to use the omitempty tag in the first place.</p>
<p>If you do decide to use it, then make sure that Goâ€™s definition of â€œemptyâ€ matches your applicationâ€™s.</p>
<p>To learn how to work with JSON in Go in greater detail, you can read my other post on parsing JSON in Go.</p>
<p><a target="_blank" rel="noopener" href="https://www.sohamkamani.com/golang/json/">https://www.sohamkamani.com/golang/json/</a></p>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;bytes&quot;</span><br><span class="line">	&quot;encoding/json&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func NewRequest(body interface&#123;&#125;) &#123;</span><br><span class="line">	var buf io.ReadWriter</span><br><span class="line">	if body != nil &#123;</span><br><span class="line">		buf = &amp;bytes.Buffer&#123;&#125;</span><br><span class="line">		enc := json.NewEncoder(buf)</span><br><span class="line">		enc.SetEscapeHTML(false)</span><br><span class="line">		err := enc.Encode(body)</span><br><span class="line">		if err != nil &#123;</span><br><span class="line">			fmt.Println(err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type EditFortestRequest struct &#123;</span><br><span class="line">	Name        string `json:&quot;name,omitempty&quot;` </span><br><span class="line">	Path        string `json:&quot;path,omitempty&quot;` </span><br><span class="line">	Description string `json:&quot;description,omitempty&quot;`</span><br><span class="line">	Enable      bool   `json:&quot;enable,omitempty&quot;`</span><br><span class="line">	Age         int    `json:&quot;age,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line">type NewFortestRequest struct &#123;</span><br><span class="line">	Name        *string `json:&quot;name,omitempty&quot;`</span><br><span class="line">	Path        *string `json:&quot;path,omitempty&quot;` </span><br><span class="line">	Description *string `json:&quot;description,omitempty&quot;`</span><br><span class="line">	Enable      *bool   `json:&quot;enable,omitempty&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func test1() &#123;</span><br><span class="line">	body := &amp;EditFortestRequest&#123;</span><br><span class="line">		Name: &quot;name &quot;,</span><br><span class="line">		Path: &quot;path &quot;,</span><br><span class="line">		Age: 0,</span><br><span class="line">	&#125;</span><br><span class="line">	NewRequest(body)</span><br><span class="line">&#125;</span><br><span class="line">func test2() &#123;</span><br><span class="line">	name := &quot;name pointer&quot;</span><br><span class="line">	path := &quot;path pointer&quot;</span><br><span class="line">	body := &amp;NewFortestRequest&#123;</span><br><span class="line">		Name: &amp;name,</span><br><span class="line">		Path: &amp;path,</span><br><span class="line">	&#125;</span><br><span class="line">	NewRequest(body)</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	test1()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body = &#123;interface &#123;&#125; | *main.EditRequest&#125;</span><br><span class="line">    Name = &#123;string&#125; &quot;name &quot;</span><br><span class="line">    Path = &#123;string&#125; &quot;path &quot;</span><br><span class="line">    Description = &#123;string&#125; &quot;&quot;</span><br><span class="line">    Enable = &#123;bool&#125; false</span><br><span class="line">    Age = &#123;int&#125; 0  // ä¸ç”¨æŒ‡é’ˆè¿™é‡Œ æ˜¯ é»˜è®¤çš„ 0å€¼ï¼Œæ²¡æœ‰ä¼ å…¥å‘¢ è¿˜æ˜¯ ä½¿ç”¨è€…æœ¬èº«ä¼ çš„å°±æ˜¯ä¸ª0å€¼å‘¢ï¼Œè¿™æ · è½¬æˆjsonçš„æ—¶å€™æ˜¯ æ²¡è¿™ä¸ª age å±æ€§çš„ã€‚</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;:&quot;name&quot;,&quot;path&quot;:&quot;path&quot;&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">body = &#123;interface &#123;&#125; | *main.NewFortestRequest&#125;</span><br><span class="line">    Name = &#123;*string | 0xc000116250&#125; &quot;name pointer&quot;</span><br><span class="line">    Path = &#123;*string | 0xc000116260&#125; &quot;path pointer&quot;</span><br><span class="line">    Description = &#123;*string&#125; nil</span><br><span class="line">    Enable = &#123;*bool&#125; nil</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;:&quot;name&quot;,&quot;path&quot;:&quot;path&quot;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">body = &#123;interface &#123;&#125; | *main.NewFortestRequest&#125;</span><br><span class="line">    Name = &#123;*string | 0xc000010270&#125; &quot;name pointer&quot;</span><br><span class="line">    Path = &#123;*string | 0xc000010280&#125; &quot;path pointer&quot;</span><br><span class="line">    Description = &#123;*string&#125; nil</span><br><span class="line">    Enable = &#123;*bool&#125; nil</span><br><span class="line">    Age = &#123;*int | 0xc00001e160&#125; 0  # è¿™ä¸ªä¸æ˜¯nil è¡¨æ˜ä½¿ç”¨è€…æ­£å¼ä¼ å…¥äº†è¿™ä¸ª æ•´æ•°0å€¼äº†ã€‚è¿™æ ·è½¬æ¢å‡ºæ¥çš„ json é‡Œé¢å°±æœ‰è¿™ä¸ª å±æ€§</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;:&quot;name pointer&quot;,&quot;path&quot;:&quot;path pointer&quot;,&quot;age&quot;:0&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/6118b9bf91824574204e116d5b138ffbaab72268/">https://magesfc.github.io/mage/6118b9bf91824574204e116d5b138ffbaab72268/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://magesfc.github.io" target="_blank">é©¬å“¥ç§æˆ¿èœ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/golang/">golang</a><a class="post-meta__tags" href="/tags/struct/">struct</a><a class="post-meta__tags" href="/tags/json/">json</a></div><div class="post_share"><div class="social-share" data-image="https://t.mwm.moe/fj/" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="æ”¯ä»˜å¯¶"/></a><div class="post-qr-code-desc">æ”¯ä»˜å¯¶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/c480dbde40d58e354795a1a408fdb8bad06fe7cc/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Ansibleè‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ä¹‹roleä»‹ç»</div></div></a></div><div class="next-post pull-right"><a href="/mage/f7b2ae126d593c93046cbf03febb201f10fef861/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/mage/f7b2ae126d593c93046cbf03febb201f10fef861/" title="Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-08</div><div class="title">Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢</div></div></a></div><div><a href="/mage/18ccd178a6f3d405a26d5528e6f41f3b38eb6aa9/" title="Golangå­¦ä¹ ç¬”è®°æ€»ç»“"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Golangå­¦ä¹ ç¬”è®°æ€»ç»“</div></div></a></div><div><a href="/mage/59738b29b03ec88e9f98548ab2d29fd5592d7c6d/" title="Golangå­¦ä¹ ä¹‹dlvæ–­ç‚¹è°ƒè¯•"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-08</div><div class="title">Golangå­¦ä¹ ä¹‹dlvæ–­ç‚¹è°ƒè¯•</div></div></a></div><div><a href="/mage/3b62171753fddbbf78c36e3f6d7c9ba008365560/" title="Golangå­¦ä¹ ä¹‹mtail"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-08</div><div class="title">Golangå­¦ä¹ ä¹‹mtail</div></div></a></div><div><a href="/mage/c2d4f359f2ad8b1560a3323b9940d7aee2b7aabc/" title="Golangçš„58ä¸ªå‘"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-02</div><div class="title">Golangçš„58ä¸ªå‘</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> è¿™é‡Œæ˜¯ é©¬å“¥ çš„ä¸ªäººåšå®¢ </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">233</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">40</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#golang-%E7%BB%93%E6%9E%84%E4%BD%93-struct-%E8%BD%AC-json-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.</span> <span class="toc-text">golang ç»“æ„ä½“ struct è½¬ json å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">åŸºæœ¬ç”¨æ³•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#omitempty-%E6%A0%87%E7%AD%BE"><span class="toc-number">3.</span> <span class="toc-text">omitempty æ ‡ç­¾</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Values-that-Cannot-Be-Omitted"><span class="toc-number">4.</span> <span class="toc-text">Values that Cannot Be Omitted</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#The-Difference-Between-0-%E2%80%9C%E2%80%9D-and-Nil"><span class="toc-number">5.</span> <span class="toc-text">The Difference Between 0, â€œâ€ and Nil</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#When-to-use-%E2%80%9Comitempty%E2%80%9D"><span class="toc-number">6.</span> <span class="toc-text">When to use â€œomitemptyâ€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">7.</span> <span class="toc-text">å…¶ä»–</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/ee6e53b9fbe2f10991d150675f0b88ed427b1150/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ"/></a><div class="content"><a class="title" href="/mage/ee6e53b9fbe2f10991d150675f0b88ed427b1150/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ</a><time datetime="2024-05-18T03:58:53.000Z" title="æ›´æ–°äº 2024-05-18 11:58:53">2024-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/a52bd2f9ab320c603de205368472b5caa19b7207/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ"/></a><div class="content"><a class="title" href="/mage/a52bd2f9ab320c603de205368472b5caa19b7207/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ</a><time datetime="2024-05-18T02:15:08.000Z" title="æ›´æ–°äº 2024-05-18 10:15:08">2024-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/0bd8125569ad5e0222f4ca4e90e626be2ee24c26/" title="Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter"/></a><div class="content"><a class="title" href="/mage/0bd8125569ad5e0222f4ca4e90e626be2ee24c26/" title="Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter">Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter</a><time datetime="2024-03-31T06:28:23.000Z" title="æ›´æ–°äº 2024-03-31 14:28:23">2024-03-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/4b00a873b39948044a79c7e53eedd63d7af0bfa6/" title="Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤"/></a><div class="content"><a class="title" href="/mage/4b00a873b39948044a79c7e53eedd63d7af0bfa6/" title="Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤">Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤</a><time datetime="2024-03-31T06:28:19.000Z" title="æ›´æ–°äº 2024-03-31 14:28:19">2024-03-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/44f033ce59a71a67f64e3c2e330151f82f8754f4/" title="Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…"/></a><div class="content"><a class="title" href="/mage/44f033ce59a71a67f64e3c2e330151f82f8754f4/" title="Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…">Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…</a><time datetime="2024-03-24T03:25:01.000Z" title="æ›´æ–°äº 2024-03-24 11:25:01">2024-03-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://t.mwm.moe/fj/')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By mage</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>