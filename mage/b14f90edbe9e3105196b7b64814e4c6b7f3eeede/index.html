<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Javaå­¦ä¹ ç¬”è®°æ€»ç»“ | é©¬å“¥ç§æˆ¿èœ</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Java IO 123456å­—èŠ‚æµ InputStream     FilterInputStream,   BufferedInputStream, ByteArrayInputStream,   DataInputStream,  PrintStream  å­—èŠ‚æµ OutputStream    FilterOutputStream,  BufferedOutputStream, ByteAr">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaå­¦ä¹ ç¬”è®°æ€»ç»“">
<meta property="og:url" content="https://magesfc.github.io/mage/b14f90edbe9e3105196b7b64814e4c6b7f3eeede/">
<meta property="og:site_name" content="é©¬å“¥ç§æˆ¿èœ">
<meta property="og:description" content="Java IO 123456å­—èŠ‚æµ InputStream     FilterInputStream,   BufferedInputStream, ByteArrayInputStream,   DataInputStream,  PrintStream  å­—èŠ‚æµ OutputStream    FilterOutputStream,  BufferedOutputStream, ByteAr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg">
<meta property="article:published_time" content="2022-02-23T09:47:20.000Z">
<meta property="article:modified_time" content="2022-02-23T09:47:20.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg"><link rel="shortcut icon" href="http://www.blackshark.com/favicon.ico"><link rel="canonical" href="https://magesfc.github.io/mage/b14f90edbe9e3105196b7b64814e4c6b7f3eeede/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: mage","link":"é“¾æ¥: ","source":"æ¥æº: é©¬å“¥ç§æˆ¿èœ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Javaå­¦ä¹ ç¬”è®°æ€»ç»“',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-02-23 17:47:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">166</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">184</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">34</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">é©¬å“¥ç§æˆ¿èœ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Javaå­¦ä¹ ç¬”è®°æ€»ç»“</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-02-23T09:47:20.000Z" title="å‘è¡¨äº 2022-02-23 17:47:20">2022-02-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-02-23T09:47:20.000Z" title="æ›´æ–°äº 2022-02-23 17:47:20">2022-02-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Javaå­¦ä¹ ç¬”è®°æ€»ç»“"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Java IO</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å­—èŠ‚æµ InputStream     FilterInputStream,   BufferedInputStream, ByteArrayInputStream,   DataInputStream,  PrintStream  </span><br><span class="line">å­—èŠ‚æµ OutputStream    FilterOutputStream,  BufferedOutputStream, ByteArrayOutputStream, DataOutputStream, </span><br><span class="line">å­—ç¬¦æµ Reader  BufferedReader, LineNumberReader, CharArrayReader, InputStreamReader, FileReader, FilterReader, PushbackReader, PipedReader, StringReader</span><br><span class="line">å­—ç¬¦æµ Writer  BufferedWriter,                  CharArrayWriter, OutputStreamWriter,  FileWriter,FilterWriter,                 PipedWriter, StringWriter, PrintWriter,</span><br><span class="line"></span><br><span class="line">RandomAccessFile éšæœºè®¿é—®æ–‡ä»¶æµ</span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ FilterInputStreamå’ŒFilterOutputStream</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">java.ioåŒ…ä¸­çš„å­—èŠ‚æµã€‚ java.ioåŒ…ä¸­çš„å­—èŠ‚æµä¸­çš„ç±»å…³ç³»æœ‰ç”¨åˆ°GoFã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸­çš„è£…é¥°è€…æ¨¡å¼ï¼Œ</span><br><span class="line">è€Œè¿™æ­£ä½“ç°åœ¨FilterInputStreamå’ŒFilterOutputStreamå’Œå®ƒçš„å­ç±»ä¸Šã€‚</span><br><span class="line">é¦–å…ˆï¼Œè¿™ä¸¤ä¸ªéƒ½åˆ†åˆ«æ˜¯InputStreamå’ŒOutputStreamçš„å­ç±»ã€‚è€Œä¸”ï¼ŒFilterInputStreamå’ŒFilterOutputStream æ˜¯å…·ä½“çš„å­ç±»ï¼Œ</span><br><span class="line">å®ç°äº†InputStreamå’ŒOutputStreamè¿™ä¸¤ä¸ªæŠ½è±¡ç±»ä¸­ä¸ºç»™å‡ºå®ç°çš„æ–¹æ³•ã€‚</span><br><span class="line">ä½†æ˜¯ï¼ŒFilterInputStreamå’ŒFilterOutputStreamä»…ä»…æ˜¯â€œè£…é¥°è€…æ¨¡å¼â€å°è£…çš„å¼€å§‹ï¼Œå®ƒä»¬åœ¨å„ä¸ªæ–¹æ³•ä¸­çš„å®ç°éƒ½æ˜¯æœ€åŸºæœ¬çš„å®ç°ï¼Œ</span><br><span class="line">éƒ½æ˜¯åŸºäºæ„é€ æ–¹æ³•ä¸­ä¼ å…¥å‚æ•°å°è£…çš„InputStreamå’ŒOutputStreamçš„åŸå§‹å¯¹è±¡ã€‚</span><br><span class="line">æ¯”å¦‚ï¼Œåœ¨FilterInputStreamç±»ä¸­ï¼Œå°è£…äº†è¿™æ ·ä¸€ä¸ªå±æ€§ï¼š</span><br><span class="line">    protected volatile InputStream in;</span><br><span class="line">è€Œå¯¹åº”çš„æ„é€ æ–¹æ³•æ˜¯ï¼š</span><br><span class="line">    protected FilterInputStream(InputStream in) &#123;</span><br><span class="line">        this.in = in;</span><br><span class="line">    &#125;</span><br><span class="line">read()æ–¹æ³•çš„å®ç°åˆ™ä¸ºï¼š</span><br><span class="line">    public int read() throws IOException &#123;</span><br><span class="line">        return in.read();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">åŒæ ·çš„è¾“å‡ºæµçš„æ„é€ æ–¹æ³•æ˜¯</span><br><span class="line">    public FilterOutputStream(OutputStream out) &#123;</span><br><span class="line">        this.out = out;</span><br><span class="line">    &#125;</span><br><span class="line">writeæ–¹æ³•çš„å®ç°ï¼š</span><br><span class="line">    public void write(int b) throws IOException &#123;</span><br><span class="line">        out.write(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">FilterInputStream çš„ä½œç”¨æ˜¯ç”¨æ¥â€œå°è£…å…¶å®ƒçš„è¾“å…¥æµï¼Œå¹¶ä¸ºå®ƒä»¬æä¾›é¢å¤–çš„åŠŸèƒ½â€ã€‚å®ƒçš„å¸¸ç”¨çš„å­ç±»æœ‰BufferedInputStreamå’ŒDataInputStreamã€‚</span><br><span class="line">BufferedInputStreamçš„ä½œç”¨å°±æ˜¯ä¸ºâ€œè¾“å…¥æµæä¾›ç¼“å†²åŠŸèƒ½ï¼Œä»¥åŠmark()å’Œreset()åŠŸèƒ½â€ã€‚</span><br><span class="line">DataInputStream æ˜¯ç”¨æ¥è£…é¥°å…¶å®ƒè¾“å…¥æµï¼Œå®ƒâ€œå…è®¸åº”ç”¨ç¨‹åºä»¥ä¸æœºå™¨æ— å…³æ–¹å¼ä»åº•å±‚è¾“å…¥æµä¸­è¯»å–åŸºæœ¬ Java æ•°æ®ç±»å‹â€ã€‚åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨DataOutputStream(æ•°æ®è¾“å‡ºæµ)å†™å…¥ç”±DataInputStream(æ•°æ®è¾“å…¥æµ)è¯»å–çš„æ•°æ®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FilterOutputStream çš„ä½œç”¨æ˜¯ç”¨æ¥â€œå°è£…å…¶å®ƒçš„è¾“å‡ºæµï¼Œå¹¶ä¸ºå®ƒä»¬æä¾›é¢å¤–çš„åŠŸèƒ½â€ã€‚å®ƒä¸»è¦åŒ…æ‹¬BufferedOutputStream, DataOutputStreamå’ŒPrintStreamã€‚</span><br><span class="line">BufferedOutputStreamçš„ä½œç”¨å°±æ˜¯ä¸ºâ€œè¾“å‡ºæµæä¾›ç¼“å†²åŠŸèƒ½â€ã€‚</span><br><span class="line">DataOutputStream æ˜¯ç”¨æ¥è£…é¥°å…¶å®ƒè¾“å‡ºæµï¼Œå°†DataOutputStreamå’ŒDataInputStreamè¾“å…¥æµé…åˆä½¿ç”¨ï¼Œâ€œå…è®¸åº”ç”¨ç¨‹åºä»¥ä¸æœºå™¨æ— å…³æ–¹å¼ä»åº•å±‚è¾“å…¥æµä¸­è¯»å†™åŸºæœ¬ Java æ•°æ®ç±»å‹â€ã€‚</span><br><span class="line">PrintStream æ˜¯ç”¨æ¥è£…é¥°å…¶å®ƒè¾“å‡ºæµã€‚å®ƒèƒ½ä¸ºå…¶ä»–è¾“å‡ºæµæ·»åŠ äº†åŠŸèƒ½ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿæ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®å€¼è¡¨ç¤ºå½¢å¼ã€‚</span><br></pre></td></tr></table></figure>


<p>java IO  ä¹‹ FileInputStream å’Œ FileOutputStream</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream å’Œ FileOutputStreaméƒ½æ˜¯ç›´æ¥æ€¼åˆ°æ–‡ä»¶ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è®¿é—®æ–‡ä»¶ä½¿ç”¨çš„ï¼Œåœ¨è¿™2ä¸ªæµä¸Šæˆ‘ä»¬å¯ä»¥åŒ…è£…å…¶ä»–çš„æµã€‚</span><br><span class="line"></span><br><span class="line">FileInputStream æ˜¯æ–‡ä»¶è¾“å…¥æµï¼Œå®ƒç»§æ‰¿äºInputStreamã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨FileInputStreamä»æŸä¸ªæ–‡ä»¶ä¸­è·å¾—è¾“å…¥å­—èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line">FileInputStream(File file)         // æ„é€ å‡½æ•°1ï¼šåˆ›å»ºâ€œFileå¯¹è±¡â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€</span><br><span class="line">FileInputStream(FileDescriptor fd) // æ„é€ å‡½æ•°2ï¼šåˆ›å»ºâ€œæ–‡ä»¶æè¿°ç¬¦â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€</span><br><span class="line">FileInputStream(String path)       // æ„é€ å‡½æ•°3ï¼šåˆ›å»ºâ€œæ–‡ä»¶(è·¯å¾„ä¸ºpath)â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€</span><br><span class="line"></span><br><span class="line">int      available()             // è¿”å›â€œå‰©ä½™çš„å¯è¯»å–çš„å­—èŠ‚æ•°â€æˆ–è€…â€œskipçš„å­—èŠ‚æ•°â€</span><br><span class="line">void     close()                 // å…³é—­â€œæ–‡ä»¶è¾“å…¥æµâ€</span><br><span class="line">FileChannel      getChannel()    // è¿”å›â€œFileChannelâ€</span><br><span class="line">final FileDescriptor     getFD() // è¿”å›â€œæ–‡ä»¶æè¿°ç¬¦â€</span><br><span class="line">int      read()                  // è¿”å›â€œæ–‡ä»¶è¾“å…¥æµâ€çš„ä¸‹ä¸€ä¸ªå­—èŠ‚</span><br><span class="line">int      read(byte[] buffer, int byteOffset, int byteCount) // è¯»å–â€œæ–‡ä»¶è¾“å…¥æµâ€çš„æ•°æ®å¹¶å­˜åœ¨åˆ°bufferï¼Œä»byteOffsetå¼€å§‹å­˜å‚¨ï¼Œå­˜å‚¨é•¿åº¦æ˜¯byteCountã€‚</span><br><span class="line">long     skip(long byteCount)    // è·³è¿‡byteCountä¸ªå­—èŠ‚</span><br><span class="line"></span><br><span class="line">FileOutputStream æ˜¯æ–‡ä»¶è¾“å‡ºæµï¼Œå®ƒç»§æ‰¿äºOutputStreamã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨FileOutputStream å°†æ•°æ®å†™å…¥ File æˆ– FileDescriptor çš„è¾“å‡ºæµã€‚</span><br><span class="line"></span><br><span class="line">FileOutputStream(File file)                   // æ„é€ å‡½æ•°1ï¼šåˆ›å»ºâ€œFileå¯¹è±¡â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€ï¼›é»˜è®¤â€œè¿½åŠ æ¨¡å¼â€æ˜¯falseï¼Œå³â€œå†™åˆ°è¾“å‡ºçš„æµå†…å®¹â€ä¸æ˜¯ä»¥è¿½åŠ çš„æ–¹å¼æ·»åŠ åˆ°æ–‡ä»¶ä¸­ã€‚</span><br><span class="line">FileOutputStream(File file, boolean append)   // æ„é€ å‡½æ•°2ï¼šåˆ›å»ºâ€œFileå¯¹è±¡â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€ï¼›æŒ‡å®šâ€œè¿½åŠ æ¨¡å¼â€ã€‚</span><br><span class="line">FileOutputStream(FileDescriptor fd)           // æ„é€ å‡½æ•°3ï¼šåˆ›å»ºâ€œæ–‡ä»¶æè¿°ç¬¦â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€ï¼›é»˜è®¤â€œè¿½åŠ æ¨¡å¼â€æ˜¯falseï¼Œå³â€œå†™åˆ°è¾“å‡ºçš„æµå†…å®¹â€ä¸æ˜¯ä»¥è¿½åŠ çš„æ–¹å¼æ·»åŠ åˆ°æ–‡ä»¶ä¸­ã€‚</span><br><span class="line">FileOutputStream(String path)                 // æ„é€ å‡½æ•°4ï¼šåˆ›å»ºâ€œæ–‡ä»¶(è·¯å¾„ä¸ºpath)â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€ï¼›é»˜è®¤â€œè¿½åŠ æ¨¡å¼â€æ˜¯falseï¼Œå³â€œå†™åˆ°è¾“å‡ºçš„æµå†…å®¹â€ä¸æ˜¯ä»¥è¿½åŠ çš„æ–¹å¼æ·»åŠ åˆ°æ–‡ä»¶ä¸­ã€‚</span><br><span class="line">FileOutputStream(String path, boolean append) // æ„é€ å‡½æ•°5ï¼šåˆ›å»ºâ€œæ–‡ä»¶(è·¯å¾„ä¸ºpath)â€å¯¹åº”çš„â€œæ–‡ä»¶è¾“å…¥æµâ€ï¼›æŒ‡å®šâ€œè¿½åŠ æ¨¡å¼â€ã€‚</span><br><span class="line"></span><br><span class="line">void                    close()      // å…³é—­â€œè¾“å‡ºæµâ€</span><br><span class="line">FileChannel             getChannel() // è¿”å›â€œFileChannelâ€</span><br><span class="line">final FileDescriptor    getFD()      // è¿”å›â€œæ–‡ä»¶æè¿°ç¬¦â€</span><br><span class="line">void                    write(byte[] buffer, int byteOffset, int byteCount) // å°†bufferå†™å…¥åˆ°â€œæ–‡ä»¶è¾“å‡ºæµâ€ä¸­ï¼Œä»bufferçš„byteOffsetå¼€å§‹å†™ï¼Œå†™å…¥é•¿åº¦æ˜¯byteCountã€‚</span><br><span class="line">void                    write(int oneByte)  // å†™å…¥å­—èŠ‚oneByteåˆ°â€œæ–‡ä»¶è¾“å‡ºæµâ€ä¸­</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>java IO ä¹‹  BufferedInputStream  å’Œ BufferedOutputStream</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">BufferedInputStream æ˜¯ç¼“å†²è¾“å…¥æµã€‚å®ƒç»§æ‰¿äºFilterInputStreamã€‚</span><br><span class="line">BufferedInputStream çš„ä½œç”¨æ˜¯ä¸ºå¦ä¸€ä¸ªè¾“å…¥æµæ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œæä¾›â€œç¼“å†²åŠŸèƒ½â€ä»¥åŠæ”¯æŒâ€œmark()æ ‡è®°â€å’Œâ€œreset()é‡ç½®æ–¹æ³•â€ã€‚</span><br><span class="line">BufferedInputStream æœ¬è´¨ä¸Šæ˜¯é€šè¿‡ä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ•°ç»„å®ç°çš„( byte buf[];)ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼Œåœ¨æ–°å»ºæŸè¾“å…¥æµå¯¹åº”çš„BufferedInputStreamåï¼Œå½“æˆ‘ä»¬é€šè¿‡read()è¯»å–è¾“å…¥æµçš„æ•°æ®æ—¶ï¼ŒBufferedInputStreamä¼šå°†è¯¥è¾“å…¥æµçš„æ•°æ®åˆ†æ‰¹çš„å¡«å…¥åˆ°ç¼“å†²åŒºä¸­ã€‚</span><br><span class="line">æ¯å½“ç¼“å†²åŒºä¸­çš„æ•°æ®è¢«è¯»å®Œä¹‹åï¼Œè¾“å…¥æµä¼šå†æ¬¡å¡«å……æ•°æ®ç¼“å†²åŒºï¼›å¦‚æ­¤åå¤ï¼Œç›´åˆ°æˆ‘ä»¬è¯»å®Œè¾“å…¥æµæ•°æ®ä½ç½®ã€‚</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">è¦æƒ³è¯»æ‡‚BufferedInputStreamçš„æºç ï¼Œå°±è¦å…ˆç†è§£å®ƒçš„æ€æƒ³ã€‚BufferedInputStreamçš„ä½œç”¨æ˜¯ä¸ºå…¶å®ƒè¾“å…¥æµæä¾›ç¼“å†²åŠŸèƒ½ã€‚</span><br><span class="line">åˆ›å»ºBufferedInputStreamæ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡å®ƒçš„æ„é€ å‡½æ•°æŒ‡å®šæŸä¸ªè¾“å…¥æµä¸ºå‚æ•°ã€‚BufferedInputStreamä¼šå°†è¯¥è¾“å…¥æµæ•°æ®åˆ†æ‰¹è¯»å–ï¼Œæ¯æ¬¡è¯»å–ä¸€éƒ¨åˆ†åˆ°ç¼“å†²ä¸­ï¼›æ“ä½œå®Œç¼“å†²ä¸­çš„è¿™éƒ¨åˆ†æ•°æ®ä¹‹åï¼Œå†ä»è¾“å…¥æµä¸­è¯»å–ä¸‹ä¸€éƒ¨åˆ†çš„æ•°æ®ã€‚</span><br><span class="line">ä¸ºä»€ä¹ˆéœ€è¦ç¼“å†²å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œæ•ˆç‡é—®é¢˜ï¼ç¼“å†²ä¸­çš„æ•°æ®å®é™…ä¸Šæ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€ŒåŸå§‹æ•°æ®å¯èƒ½æ˜¯ä¿å­˜åœ¨ç¡¬ç›˜æˆ–NandFlashç­‰å­˜å‚¨ä»‹è´¨ä¸­ï¼›è€Œæˆ‘ä»¬çŸ¥é“ï¼Œä»å†…å­˜ä¸­è¯»å–æ•°æ®çš„é€Ÿåº¦æ¯”ä»ç¡¬ç›˜è¯»å–æ•°æ®çš„é€Ÿåº¦è‡³å°‘å¿«10å€ä»¥ä¸Šã€‚</span><br><span class="line">é‚£å¹²å˜›ä¸å¹²è„†ä¸€æ¬¡æ€§å°†å…¨éƒ¨æ•°æ®éƒ½è¯»å–åˆ°ç¼“å†²ä¸­å‘¢ï¼Ÿç¬¬ä¸€ï¼Œè¯»å–å…¨éƒ¨çš„æ•°æ®æ‰€éœ€è¦çš„æ—¶é—´å¯èƒ½ä¼šå¾ˆé•¿ã€‚ç¬¬äºŒï¼Œå†…å­˜ä»·æ ¼å¾ˆè´µï¼Œå®¹é‡ä¸åƒç¡¬ç›˜é‚£ä¹ˆå¤§ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BufferedOutputStream æ˜¯ç¼“å†²è¾“å‡ºæµã€‚å®ƒç»§æ‰¿äºFilterOutputStreamã€‚</span><br><span class="line">BufferedOutputStream çš„ä½œç”¨æ˜¯ä¸ºå¦ä¸€ä¸ªè¾“å‡ºæµæä¾›â€œç¼“å†²åŠŸèƒ½â€ã€‚</span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">BufferedOutputStreamçš„æºç éå¸¸ç®€å•ï¼Œè¿™é‡Œå°±BufferedOutputStreamçš„æ€æƒ³è¿›è¡Œç®€å•è¯´æ˜ï¼šB</span><br><span class="line">ufferedOutputStreamé€šè¿‡å­—èŠ‚æ•°ç»„æ¥ç¼“å†²æ•°æ®ï¼Œå½“ç¼“å†²åŒºæ»¡æˆ–è€…ç”¨æˆ·è°ƒç”¨flush()å‡½æ•°æ—¶ï¼Œå®ƒå°±ä¼šå°†ç¼“å†²åŒºçš„æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">å½“å†™å…¥ç¼“å†²åŒºå°äºå®é™…çš„ç¼“å†²åŒºå¤§å°ï¼Œä»–ä¸ä¼šæ‰§è¡Œæƒ…å†µç¼“å†²åŒºæ“ä½œï¼ˆå³ï¼Œå°†ç¼“å†²æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­ï¼‰ï¼Œåœ¨æ‰§è¡Œclose()å å®ƒä¼šå…³é—­è¾“å‡ºæµï¼›åœ¨å…³é—­è¾“å‡ºæµä¹‹å‰ï¼Œä¼šå°†ç¼“å†²åŒºçš„æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚</span><br><span class="line">å¦‚æœæ‰‹åŠ¨æ‰§è¡Œäº†flush()æ“ä½œä¼šå°†ç¼“å†²åŒºçš„æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚</span><br><span class="line">å¦‚æœå†™å…¥ç¼“å†²åŒºçš„å¤§äºå®é™…ç¼“å†²åŒºå¤§å°ï¼Œä»–ä¼šç›´æ¥ å†™å…¥éƒ½è¾“å‡ºæµä¸­ï¼Œè€Œä¸ç»è¿‡ç¼“å†²åŒºã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ FileDescriptor</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">FileDescriptor æ˜¯â€œæ–‡ä»¶æè¿°ç¬¦â€ã€‚</span><br><span class="line">FileDescriptor å¯ä»¥è¢«ç”¨æ¥è¡¨ç¤ºå¼€æ”¾æ–‡ä»¶ã€å¼€æ”¾å¥—æ¥å­—ç­‰ã€‚</span><br><span class="line">ä»¥FileDescriptorè¡¨ç¤ºæ–‡ä»¶æ¥è¯´ï¼šå½“FileDescriptorè¡¨ç¤ºæŸæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šä¿—çš„å°†FileDescriptorçœ‹æˆæ˜¯è¯¥æ–‡ä»¶ã€‚</span><br><span class="line">ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡FileDescriptorå¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ“ä½œï¼›è‹¥éœ€è¦é€šè¿‡FileDescriptorå¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œåˆ™éœ€è¦æ–°åˆ›å»ºFileDescriptorå¯¹åº”çš„FileOutputStreamï¼Œå†å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">in, out, errä»‹ç»</span><br><span class="line"></span><br><span class="line">(01) in  -- æ ‡å‡†è¾“å…¥(é”®ç›˜)çš„æè¿°ç¬¦</span><br><span class="line"> 	public static final FileDescriptor in = standardStream(0);</span><br><span class="line"></span><br><span class="line">(02) out -- æ ‡å‡†è¾“å‡º(å±å¹•)çš„æè¿°ç¬¦</span><br><span class="line">    public static final FileDescriptor out = standardStream(1);</span><br><span class="line"></span><br><span class="line">(03) err -- æ ‡å‡†é”™è¯¯è¾“å‡º(å±å¹•)çš„æè¿°ç¬¦</span><br><span class="line">    public static final FileDescriptor err = standardStream(2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">out çš„ä½œç”¨å’ŒåŸç†</span><br><span class="line"></span><br><span class="line">outæ˜¯æ ‡å‡†è¾“å‡º(å±å¹•)çš„æè¿°ç¬¦ã€‚ä½†æ˜¯å®ƒæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</span><br><span class="line">æˆ‘ä»¬å¯ä»¥é€šä¿—ç†è§£ï¼Œoutå°±ä»£è¡¨äº†æ ‡å‡†è¾“å‡º(å±å¹•)ã€‚è‹¥æˆ‘ä»¬è¦è¾“å‡ºä¿¡æ¯åˆ°å±å¹•ä¸Šï¼Œå³å¯é€šè¿‡outæ¥è¿›è¡Œæ“ä½œï¼›</span><br><span class="line">ä½†æ˜¯ï¼Œoutåˆæ²¡æœ‰æä¾›è¾“å‡ºä¿¡æ¯åˆ°å±å¹•çš„æ¥å£(å› ä¸ºoutæœ¬è´¨æ˜¯FileDescriptorå¯¹è±¡ï¼Œè€ŒFileDescriptoræ²¡æœ‰è¾“å‡ºæ¥å£)ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿ</span><br><span class="line">å¾ˆç®€å•ï¼Œæˆ‘ä»¬åˆ›å»ºoutå¯¹åº”çš„â€œè¾“å‡ºæµå¯¹è±¡â€ï¼Œç„¶åé€šè¿‡â€œè¾“å‡ºæµâ€çš„write()ç­‰è¾“å‡ºæ¥å£å°±å¯ä»¥å°†ä¿¡æ¯è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚å¦‚ä¸‹ä»£ç ï¼š</span><br><span class="line">try &#123;</span><br><span class="line">    FileOutputStream out = new FileOutputStream(FileDescriptor.out);</span><br><span class="line">    out.write(&#x27;A&#x27;);</span><br><span class="line">    out.close();</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">&#125;</span><br><span class="line">æ‰§è¡Œä¸Šé¢çš„ç¨‹åºï¼Œä¼šåœ¨å±å¹•ä¸Šè¾“å‡ºå­—æ¯&#x27;A&#x27;ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ“ä½œï¼Œjavaæ—©å·²ä¸ºæˆ‘ä»¬å°è£…å¥½äº†â€œèƒ½æ–¹ä¾¿çš„åœ¨å±å¹•ä¸Šè¾“å‡ºä¿¡æ¯çš„æ¥å£â€ï¼šé€šè¿‡System.outï¼Œæˆ‘ä»¬èƒ½æ–¹ä¾¿çš„è¾“å‡ºä¿¡æ¯åˆ°å±å¹•ä¸Šã€‚</span><br><span class="line">å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç­‰ä»·çš„å°†ä¸Šé¢çš„ç¨‹åºè½¬æ¢ä¸ºå¦‚ä¸‹ä»£ç ï¼š</span><br><span class="line">System.out.print(&#x27;A&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>java IOä¹‹ å­—èŠ‚æ•°ç»„æµ ByteArrayInputStream å’Œ ByteArrayOutputStream</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ByteArrayInputStream æ˜¯å­—èŠ‚æ•°ç»„è¾“å…¥æµã€‚å®ƒç»§æ‰¿äºInputStreamã€‚</span><br><span class="line">å®ƒåŒ…å«ä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºï¼Œè¯¥ç¼“å†²åŒºåŒ…å«ä»æµä¸­è¯»å–çš„å­—èŠ‚ï¼›é€šä¿—ç‚¹è¯´ï¼Œå®ƒçš„å†…éƒ¨ç¼“å†²åŒºå°±æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œè€ŒByteArrayInputStreamæœ¬è´¨å°±æ˜¯é€šè¿‡å­—èŠ‚æ•°ç»„æ¥å®ç°çš„ã€‚</span><br><span class="line">æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒInputStreamé€šè¿‡read()å‘å¤–æä¾›æ¥å£ï¼Œä¾›å®ƒä»¬æ¥è¯»å–å­—èŠ‚æ•°æ®ï¼›è€ŒByteArrayInputStream çš„å†…éƒ¨é¢å¤–çš„å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå®ƒè¢«ç”¨æ¥è·Ÿè¸ª read() æ–¹æ³•è¦è¯»å–çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line">ByteArrayInputStreamå®é™…ä¸Šæ˜¯é€šè¿‡â€œå­—èŠ‚æ•°ç»„â€å»ä¿å­˜æ•°æ®ã€‚</span><br><span class="line">(01) é€šè¿‡ByteArrayInputStream(byte buf[]) æˆ– ByteArrayInputStream(byte buf[], int offset, int length) ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®bufæ•°ç»„æ¥åˆ›å»ºå­—èŠ‚æµå¯¹è±¡ã€‚</span><br><span class="line">(02) read()çš„ä½œç”¨æ˜¯ä»å­—èŠ‚æµä¸­â€œè¯»å–ä¸‹ä¸€ä¸ªå­—èŠ‚â€ã€‚</span><br><span class="line">(03) read(byte[] buffer, int offset, int length)çš„ä½œç”¨æ˜¯ä»å­—èŠ‚æµè¯»å–å­—èŠ‚æ•°æ®ï¼Œå¹¶å†™å…¥åˆ°å­—èŠ‚æ•°ç»„bufferä¸­ã€‚offsetæ˜¯å°†å­—èŠ‚å†™å…¥åˆ°bufferçš„èµ·å§‹ä½ç½®ï¼Œlengthæ˜¯å†™å…¥çš„å­—èŠ‚çš„é•¿åº¦ã€‚</span><br><span class="line">(04) markSupported()æ˜¯åˆ¤æ–­å­—èŠ‚æµæ˜¯å¦æ”¯æŒâ€œæ ‡è®°åŠŸèƒ½â€ã€‚å®ƒä¸€ç›´è¿”å›trueã€‚</span><br><span class="line">(05) mark(int readlimit)çš„ä½œç”¨æ˜¯è®°å½•æ ‡è®°ä½ç½®ã€‚è®°å½•æ ‡è®°ä½ç½®ä¹‹åï¼ŒæŸä¸€æ—¶åˆ»è°ƒç”¨reset()åˆ™å°†â€œå­—èŠ‚æµä¸‹ä¸€ä¸ªè¢«è¯»å–çš„ä½ç½®â€é‡ç½®åˆ°â€œmark(int readlimit)æ‰€æ ‡è®°çš„ä½ç½®â€ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œreset()ä¹‹åå†è¯»å–å­—èŠ‚æµæ—¶ï¼Œæ˜¯ä»mark(int readlimit)æ‰€æ ‡è®°çš„ä½ç½®å¼€å§‹è¯»å–ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ByteArrayOutputStream æ˜¯å­—èŠ‚æ•°ç»„è¾“å‡ºæµã€‚å®ƒç»§æ‰¿äºOutputStreamã€‚</span><br><span class="line">ByteArrayOutputStream ä¸­çš„æ•°æ®è¢«å†™å…¥ä¸€ä¸ª byte æ•°ç»„ã€‚ç¼“å†²åŒºä¼šéšç€æ•°æ®çš„ä¸æ–­å†™å…¥è€Œè‡ªåŠ¨å¢é•¿ã€‚å¯ä½¿ç”¨ toByteArray() å’Œ toString() è·å–æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">ByteArrayOutputStreamå®é™…ä¸Šæ˜¯å°†å­—èŠ‚æ•°æ®å†™å…¥åˆ°â€œå­—èŠ‚æ•°ç»„â€ä¸­å»ã€‚</span><br><span class="line">(01) é€šè¿‡ByteArrayOutputStream()åˆ›å»ºçš„â€œå­—èŠ‚æ•°ç»„è¾“å‡ºæµâ€å¯¹åº”çš„å­—èŠ‚æ•°ç»„å¤§å°æ˜¯32ã€‚</span><br><span class="line">(02) é€šè¿‡ByteArrayOutputStream(int size) åˆ›å»ºâ€œå­—èŠ‚æ•°ç»„è¾“å‡ºæµâ€ï¼Œå®ƒå¯¹åº”çš„å­—èŠ‚æ•°ç»„å¤§å°æ˜¯sizeã€‚</span><br><span class="line">(03) write(int oneByte)çš„ä½œç”¨å°†intç±»å‹çš„oneByteæ¢æˆbyteç±»å‹ï¼Œç„¶åå†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚</span><br><span class="line">(04) write(byte[] buffer, int offset, int len) æ˜¯å°†å­—èŠ‚æ•°ç»„bufferå†™å…¥åˆ°è¾“å‡ºæµä¸­ï¼Œoffsetæ˜¯ä»bufferä¸­è¯»å–æ•°æ®çš„èµ·å§‹åç§»ä½ç½®ï¼Œlenæ˜¯è¯»å–çš„é•¿åº¦ã€‚</span><br><span class="line">(05) writeTo(OutputStream out) å°†è¯¥â€œå­—èŠ‚æ•°ç»„è¾“å‡ºæµâ€çš„æ•°æ®å…¨éƒ¨å†™å…¥åˆ°â€œè¾“å‡ºæµoutâ€ä¸­ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹   ç®¡é“  PipedInputStream å’Œ PipedOutputStream </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PipedInputStream æ˜¯ç®¡é“è¾“å…¥æµï¼Œç»§æ‰¿è‡ªInputStreamã€‚</span><br><span class="line">PipedOutputStream æ˜¯ç®¡é“è¾“å‡ºæµ ï¼Œ ç»§æ‰¿è‡ªOutputStreamã€‚</span><br><span class="line">å®ƒä»¬çš„ä½œç”¨æ˜¯è®©å¤šçº¿ç¨‹å¯ä»¥é€šè¿‡ç®¡é“è¿›è¡Œçº¿ç¨‹é—´çš„é€šè®¯ã€‚åœ¨ä½¿ç”¨ç®¡é“é€šä¿¡æ—¶ï¼Œå¿…é¡»å°†PipedOutputStreamå’ŒPipedInputStreamé…å¥—ä½¿ç”¨ã€‚</span><br><span class="line">ä½¿ç”¨ç®¡é“é€šä¿¡æ—¶ï¼Œå¤§è‡´çš„æµç¨‹æ˜¯ï¼šæˆ‘ä»¬åœ¨çº¿ç¨‹Aä¸­å‘PipedOutputStreamä¸­å†™å…¥æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šè‡ªåŠ¨çš„å‘é€åˆ°ä¸PipedOutputStreamå¯¹åº”çš„PipedInputStreamä¸­ï¼Œ</span><br><span class="line">è¿›è€Œå­˜å‚¨åœ¨PipedInputStreamçš„ç¼“å†²ä¸­ï¼›æ­¤æ—¶ï¼Œçº¿ç¨‹Bé€šè¿‡è¯»å–PipedInputStreamä¸­çš„æ•°æ®ã€‚å°±å¯ä»¥å®ç°ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bçš„é€šä¿¡ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>java IO ä¹‹ PipedReaderå’ŒPipedWriter</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PipedWriter æ˜¯å­—ç¬¦ç®¡é“è¾“å‡ºæµï¼Œå®ƒç»§æ‰¿äºWriterã€‚</span><br><span class="line">PipedReader æ˜¯å­—ç¬¦ç®¡é“è¾“å…¥æµï¼Œå®ƒç»§æ‰¿äºWriterã€‚</span><br><span class="line">PipedWriterå’ŒPipedReaderçš„ä½œç”¨æ˜¯å¯ä»¥é€šè¿‡ç®¡é“è¿›è¡Œçº¿ç¨‹é—´çš„é€šè®¯ã€‚åœ¨ä½¿ç”¨ç®¡é“é€šä¿¡æ—¶ï¼Œå¿…é¡»å°†PipedWriterå’ŒPipedReaderé…å¥—ä½¿ç”¨ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ å¯¹è±¡æµ ObjectInputStream å’Œ ObjectOutputStream </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">ObjectInputStream å’Œ ObjectOutputStream çš„ä½œç”¨æ˜¯ï¼Œå¯¹åŸºæœ¬æ•°æ®å’Œå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–æ“ä½œæ”¯æŒã€‚</span><br><span class="line"></span><br><span class="line">åˆ›å»ºâ€œæ–‡ä»¶è¾“å‡ºæµâ€å¯¹åº”çš„ObjectOutputStreamå¯¹è±¡ï¼Œè¯¥ObjectOutputStreamå¯¹è±¡èƒ½æä¾›å¯¹â€œåŸºæœ¬æ•°æ®æˆ–å¯¹è±¡â€çš„æŒä¹…å­˜å‚¨ï¼›</span><br><span class="line">å½“æˆ‘ä»¬éœ€è¦è¯»å–è¿™äº›å­˜å‚¨çš„â€œåŸºæœ¬æ•°æ®æˆ–å¯¹è±¡â€æ—¶ï¼Œå¯ä»¥åˆ›å»ºâ€œæ–‡ä»¶è¾“å…¥æµâ€å¯¹åº”çš„ObjectInputStreamï¼Œè¿›è€Œè¯»å–å‡ºè¿™äº›â€œåŸºæœ¬æ•°æ®æˆ–å¯¹è±¡â€ã€‚</span><br><span class="line"></span><br><span class="line">é€šè¿‡ObjectInputStream, ObjectOutputStreamæ“ä½œçš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯å®ç°äº†Serializableæˆ–Externalizableåºåˆ—åŒ–æ¥å£çš„ç±»çš„å®ä¾‹ã€‚</span><br><span class="line"></span><br><span class="line">åºåˆ—åŒ–ï¼Œå°±æ˜¯ä¸ºäº†ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼›è€Œä¸ä¹‹å¯¹åº”çš„ååºåˆ—åŒ–ï¼Œåˆ™å¯ä»¥æŠŠä¿å­˜çš„å¯¹è±¡çŠ¶æ€å†è¯»å‡ºæ¥ã€‚</span><br><span class="line">ç®€è¨€ä¹‹ï¼šåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œæ˜¯Javaæä¾›ä¸€ç§ä¸“é—¨ç”¨äºçš„ä¿å­˜/æ¢å¤å¯¹è±¡çŠ¶æ€çš„æœºåˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">ä¸€èˆ¬åœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ°åºåˆ—åŒ–ï¼š</span><br><span class="line">aï¼‰å½“ä½ æƒ³æŠŠçš„å†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶å€™ï¼› </span><br><span class="line">bï¼‰å½“ä½ æƒ³ç”¨å¥—æ¥å­—åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„æ—¶å€™ï¼› </span><br><span class="line">cï¼‰å½“ä½ æƒ³é€šè¿‡RMIä¼ è¾“å¯¹è±¡çš„æ—¶å€™ã€‚</span><br><span class="line"></span><br><span class="line">(01) åºåˆ—åŒ–å¯¹staticå’Œtransientå˜é‡ï¼Œæ˜¯ä¸ä¼šè‡ªåŠ¨è¿›è¡ŒçŠ¶æ€ä¿å­˜çš„ã€‚</span><br><span class="line">transientçš„ä½œç”¨å°±æ˜¯ï¼Œç”¨transientå£°æ˜çš„å˜é‡ï¼Œä¸ä¼šè¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚</span><br><span class="line">(02) å¯¹äºSocket, Threadç±»ï¼Œä¸æ”¯æŒåºåˆ—åŒ–ã€‚è‹¥å®ç°åºåˆ—åŒ–çš„æ¥å£ä¸­ï¼Œæœ‰Threadæˆå‘˜ï¼›åœ¨å¯¹è¯¥ç±»è¿›è¡Œåºåˆ—åŒ–æ“ä½œæ—¶ï¼Œç¼–è¯‘ä¼šå‡ºé”™ï¼</span><br><span class="line">è¿™ä¸»è¦æ˜¯åŸºäºèµ„æºåˆ†é…æ–¹é¢çš„åŸå› ã€‚å¦‚æœSocketï¼ŒThreadç±»å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œä½†æ˜¯è¢«ååºåˆ—åŒ–ä¹‹åä¹Ÿæ— æ³•å¯¹ä»–ä»¬è¿›è¡Œé‡æ–°çš„èµ„æºåˆ†é…ï¼›å†è€…ï¼Œä¹Ÿæ˜¯æ²¡æœ‰å¿…è¦è¿™æ ·å®ç°ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">â€œåºåˆ—åŒ–ä¸ä¼šè‡ªåŠ¨ä¿å­˜staticå’Œtransientå˜é‡â€ï¼Œå› æ­¤æˆ‘ä»¬è‹¥è¦ä¿å­˜å®ƒä»¬ï¼Œåˆ™éœ€è¦é€šè¿‡writeObject()å’ŒreadObject()å»æ‰‹åŠ¨è¯»å†™ã€‚</span><br><span class="line">äº‹å®è¯æ˜ï¼Œä¸èƒ½å¯¹Threadè¿›è¡Œåºåˆ—åŒ–ã€‚è‹¥å¸Œæœ›ç¨‹åºèƒ½ç¼–è¯‘é€šè¿‡ï¼Œæˆ‘ä»¬å¯¹Threadå˜é‡æ·»åŠ staticæˆ–transientä¿®é¥°å³å¯ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¦‚æœä¸€ä¸ªç±»è¦å®Œå…¨è´Ÿè´£è‡ªå·±çš„åºåˆ—åŒ–ï¼Œåˆ™å®ç°Externalizableæ¥å£ï¼Œè€Œä¸æ˜¯Serializableæ¥å£ã€‚</span><br><span class="line">Externalizableæ¥å£å®šä¹‰åŒ…æ‹¬ä¸¤ä¸ªæ–¹æ³•writeExternal()ä¸readExternal()ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå£°æ˜ç±»å®ç°Externalizableæ¥å£ä¼šæœ‰é‡å¤§çš„å®‰å…¨é£é™©ã€‚</span><br><span class="line">writeExternal()ä¸readExternal()æ–¹æ³•å£°æ˜ä¸ºpublicï¼Œæ¶æ„ç±»å¯ä»¥ç”¨è¿™äº›æ–¹æ³•è¯»å–å’Œå†™å…¥å¯¹è±¡æ•°æ®ã€‚å¦‚æœå¯¹è±¡åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œåˆ™è¦æ ¼å¤–å°å¿ƒã€‚</span><br><span class="line">(01) å®ç°Externalizableæ¥å£çš„ç±»ï¼Œä¸ä¼šåƒå®ç°Serializableæ¥å£é‚£æ ·ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®ä¿å­˜ã€‚</span><br><span class="line">(02) å®ç°Externalizableæ¥å£çš„ç±»ï¼Œå¿…é¡»å®ç°writeExternal()å’ŒreadExternal()æ¥å£ï¼ å¦åˆ™ï¼Œç¨‹åºæ— æ³•æ­£å¸¸ç¼–è¯‘ï¼</span><br><span class="line">(03) å®ç°Externalizableæ¥å£çš„ç±»ï¼Œå¿…é¡»å®šä¹‰ä¸å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼ å¦åˆ™ï¼Œç¨‹åºæ— æ³•æ­£å¸¸ç¼–è¯‘ï¼</span><br><span class="line">(04) writeExternal() å’Œ readExternal() çš„æ–¹æ³•éƒ½æ˜¯publicçš„ï¼Œä¸æ˜¯éå¸¸å®‰å…¨ï¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ DataInputStream  å’Œ DataInputStream </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">DataInputStream æ˜¯æ•°æ®è¾“å…¥æµã€‚å®ƒç»§æ‰¿äºFilterInputStreamã€‚</span><br><span class="line">DataInputStream æ˜¯ç”¨æ¥è£…é¥°å…¶å®ƒè¾“å…¥æµï¼Œå®ƒâ€œå…è®¸åº”ç”¨ç¨‹åºä»¥ä¸æœºå™¨æ— å…³æ–¹å¼ä»åº•å±‚è¾“å…¥æµä¸­è¯»å–åŸºæœ¬ Java æ•°æ®ç±»å‹â€ã€‚</span><br><span class="line">åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨DataOutputStream(æ•°æ®è¾“å‡ºæµ)å†™å…¥ï¼Œç”±DataInputStream(æ•°æ®è¾“å…¥æµ)è¯»å–çš„æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">DataInputStream(InputStream in)</span><br><span class="line">final int     read(byte[] buffer, int offset, int length)</span><br><span class="line">final int     read(byte[] buffer)</span><br><span class="line">final boolean     readBoolean()</span><br><span class="line">final byte     readByte()</span><br><span class="line">final char     readChar()</span><br><span class="line">final double     readDouble()</span><br><span class="line">final float     readFloat()</span><br><span class="line">final void     readFully(byte[] dst)</span><br><span class="line">final void     readFully(byte[] dst, int offset, int byteCount)</span><br><span class="line">final int     readInt()</span><br><span class="line">final String     readLine()</span><br><span class="line">final long     readLong()</span><br><span class="line">final short     readShort()</span><br><span class="line">final static String     readUTF(DataInput in)</span><br><span class="line">final String     readUTF()</span><br><span class="line">final int     readUnsignedByte()</span><br><span class="line">final int     readUnsignedShort()</span><br><span class="line">final int     skipBytes(int count)</span><br><span class="line"></span><br><span class="line">DataInputStream ä¸­æ¯”è¾ƒéš¾ä»¥ç†è§£çš„å‡½æ•°å°±åªæœ‰ readUTF(DataInput in)ï¼›</span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">readUTF()çš„ä½œç”¨ï¼Œæ˜¯ä»è¾“å…¥æµä¸­è¯»å–UTF-8ç¼–ç çš„æ•°æ®ï¼Œå¹¶ä»¥Stringå­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ã€‚</span><br><span class="line"></span><br><span class="line">DataOutputStream æ˜¯æ•°æ®è¾“å‡ºæµã€‚å®ƒç»§æ‰¿äºFilterOutputStreamã€‚</span><br><span class="line">DataOutputStream æ˜¯ç”¨æ¥è£…é¥°å…¶å®ƒè¾“å‡ºæµï¼Œå°†DataOutputStreamå’ŒDataInputStreamè¾“å…¥æµé…åˆä½¿ç”¨ï¼Œâ€œå…è®¸åº”ç”¨ç¨‹åºä»¥ä¸æœºå™¨æ— å…³æ–¹å¼ä»åº•å±‚è¾“å…¥æµä¸­è¯»å†™åŸºæœ¬ Java æ•°æ®ç±»å‹â€ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>java IO ä¹‹ PrintStream(æ‰“å°è¾“å‡ºæµ)</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PrintStream æ˜¯æ‰“å°è¾“å‡ºæµï¼Œå®ƒç»§æ‰¿äºFilterOutputStreamã€‚</span><br><span class="line">PrintStream æ˜¯ç”¨æ¥è£…é¥°å…¶å®ƒè¾“å‡ºæµã€‚å®ƒèƒ½ä¸ºå…¶ä»–è¾“å‡ºæµæ·»åŠ äº†åŠŸèƒ½ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿæ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®å€¼è¡¨ç¤ºå½¢å¼ã€‚</span><br><span class="line">ä¸å…¶ä»–è¾“å‡ºæµä¸åŒï¼ŒPrintStream æ°¸è¿œä¸ä¼šæŠ›å‡º IOExceptionï¼›å®ƒäº§ç”Ÿçš„IOExceptionä¼šè¢«è‡ªèº«çš„å‡½æ•°æ‰€æ•è·å¹¶è®¾ç½®é”™è¯¯æ ‡è®°ï¼Œ ç”¨æˆ·å¯ä»¥é€šè¿‡ checkError() è¿”å›é”™è¯¯æ ‡è®°ï¼Œä»è€ŒæŸ¥çœ‹PrintStreamå†…éƒ¨æ˜¯å¦äº§ç”Ÿäº†IOExceptionã€‚</span><br><span class="line">å¦å¤–ï¼ŒPrintStream æä¾›äº†è‡ªåŠ¨flush å’Œ å­—ç¬¦é›†è®¾ç½®åŠŸèƒ½ã€‚æ‰€è°“è‡ªåŠ¨flushï¼Œå°±æ˜¯å¾€PrintStreamå†™å…¥çš„æ•°æ®ä¼šç«‹åˆ»è°ƒç”¨flush()å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å…ˆçœ‹çœ‹System.out.printlnçš„æµç¨‹ã€‚å…ˆçœ‹çœ‹System.javaä¸­outçš„å®šä¹‰ï¼Œæºç å¦‚ä¸‹ï¼š</span><br><span class="line">    public final static PrintStream out = null;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ CharArrayReader å’Œ CharArrayWriter </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">CharArrayReader æ˜¯å­—ç¬¦æ•°ç»„è¾“å…¥æµã€‚å®ƒå’ŒByteArrayInputStreamç±»ä¼¼ï¼Œåªä¸è¿‡ByteArrayInputStreamæ˜¯å­—èŠ‚æ•°ç»„è¾“å…¥æµï¼Œ</span><br><span class="line">è€ŒCharArrayæ˜¯å­—ç¬¦æ•°ç»„è¾“å…¥æµã€‚CharArrayReader æ˜¯ç”¨äºè¯»å–å­—ç¬¦æ•°ç»„ï¼Œå®ƒç»§æ‰¿äºReaderã€‚æ“ä½œçš„æ•°æ®æ˜¯ä»¥å­—ç¬¦ä¸ºå•ä½ï¼</span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">CharArrayReaderå®é™…ä¸Šæ˜¯é€šè¿‡â€œå­—ç¬¦æ•°ç»„â€å»ä¿å­˜æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">(01) é€šè¿‡ CharArrayReader(char[] buf) æˆ– CharArrayReader(char[] buf, int offset, int length) ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®bufæ•°ç»„æ¥åˆ›å»ºCharArrayReaderå¯¹è±¡ã€‚</span><br><span class="line">(02) read()çš„ä½œç”¨æ˜¯ä»CharArrayReaderä¸­â€œè¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦â€ã€‚</span><br><span class="line">(03) read(char[] buffer, int offset, int len)çš„ä½œç”¨æ˜¯ä»CharArrayReaderè¯»å–å­—ç¬¦æ•°æ®ï¼Œå¹¶å†™å…¥åˆ°å­—ç¬¦æ•°ç»„bufferä¸­ã€‚offsetæ˜¯å°†å­—ç¬¦å†™å…¥åˆ°bufferçš„èµ·å§‹ä½ç½®ï¼Œlenæ˜¯å†™å…¥çš„å­—ç¬¦çš„é•¿åº¦ã€‚</span><br><span class="line">(04) markSupported()æ˜¯åˆ¤æ–­CharArrayReaderæ˜¯å¦æ”¯æŒâ€œæ ‡è®°åŠŸèƒ½â€ã€‚å®ƒå§‹ç»ˆè¿”å›trueã€‚</span><br><span class="line">(05) mark(int readlimit)çš„ä½œç”¨æ˜¯è®°å½•æ ‡è®°ä½ç½®ã€‚è®°å½•æ ‡è®°ä½ç½®ä¹‹åï¼ŒæŸä¸€æ—¶åˆ»è°ƒç”¨reset()åˆ™å°†â€œCharArrayReaderä¸‹ä¸€ä¸ªè¢«è¯»å–çš„ä½ç½®â€é‡ç½®åˆ°â€œmark(int readlimit)æ‰€æ ‡è®°çš„ä½ç½®â€ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œreset()ä¹‹åå†è¯»å–CharArrayReaderæ—¶ï¼Œæ˜¯ä»mark(int readlimit)æ‰€æ ‡è®°çš„ä½ç½®å¼€å§‹è¯»å–ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CharArrayWriter ç”¨äºå†™å…¥æ•°æ®ç¬¦ï¼Œå®ƒç»§æ‰¿äºWriterã€‚æ“ä½œçš„æ•°æ®æ˜¯ä»¥å­—ç¬¦ä¸ºå•ä½ï¼</span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">CharArrayWriterå®é™…ä¸Šæ˜¯å°†æ•°æ®å†™å…¥åˆ°â€œå­—ç¬¦æ•°ç»„â€ä¸­å»ã€‚</span><br><span class="line">(01) é€šè¿‡CharArrayWriter()åˆ›å»ºçš„CharArrayWriterå¯¹åº”çš„å­—ç¬¦æ•°ç»„å¤§å°æ˜¯32ã€‚</span><br><span class="line">(02) é€šè¿‡CharArrayWriter(int size) åˆ›å»ºçš„CharArrayWriterå¯¹åº”çš„å­—ç¬¦æ•°ç»„å¤§å°æ˜¯sizeã€‚</span><br><span class="line">(03) write(int oneChar)çš„ä½œç”¨å°†intç±»å‹çš„oneCharæ¢æˆcharç±»å‹ï¼Œç„¶åå†™å…¥åˆ°CharArrayWriterä¸­ã€‚</span><br><span class="line">(04) write(char[] buffer, int offset, int len) æ˜¯å°†å­—ç¬¦æ•°ç»„bufferå†™å…¥åˆ°è¾“å‡ºæµä¸­ï¼Œoffsetæ˜¯ä»bufferä¸­è¯»å–æ•°æ®çš„èµ·å§‹åç§»ä½ç½®ï¼Œlenæ˜¯è¯»å–çš„é•¿åº¦ã€‚</span><br><span class="line">(05) write(String str, int offset, int count) æ˜¯å°†å­—ç¬¦ä¸²strå†™å…¥åˆ°è¾“å‡ºæµä¸­ï¼Œoffsetæ˜¯ä»strä¸­è¯»å–æ•°æ®çš„èµ·å§‹ä½ç½®ï¼Œcountæ˜¯è¯»å–çš„é•¿åº¦ã€‚</span><br><span class="line">(06) append(char c)çš„ä½œç”¨å°†charç±»å‹çš„cå†™å…¥åˆ°CharArrayWriterä¸­ï¼Œç„¶åè¿”å›CharArrayWriterå¯¹è±¡ã€‚</span><br><span class="line">æ³¨æ„ï¼šappend(char c)ä¸write(int c)éƒ½æ˜¯å°†å•ä¸ªå­—ç¬¦å†™å…¥åˆ°CharArrayWriterä¸­ã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼Œappend(char c)ä¼šè¿”å›CharArrayWriterå¯¹è±¡ï¼Œä½†æ˜¯write(int c)è¿”å›voidã€‚</span><br><span class="line">(07) append(CharSequence csq, int start, int end)çš„ä½œç”¨å°†csqä»startå¼€å§‹(åŒ…æ‹¬)åˆ°endç»“æŸ(ä¸åŒ…æ‹¬)çš„æ•°æ®ï¼Œå†™å…¥åˆ°CharArrayWriterä¸­ã€‚</span><br><span class="line">æ³¨æ„ï¼šè¯¥å‡½æ•°è¿”å›CharArrayWriterå¯¹è±¡ï¼</span><br><span class="line">(08) append(CharSequence csq)çš„ä½œç”¨å°†csqå†™å…¥åˆ°CharArrayWriterä¸­ã€‚</span><br><span class="line">æ³¨æ„ï¼šè¯¥å‡½æ•°è¿”å›CharArrayWriterå¯¹è±¡ï¼</span><br><span class="line">(09) writeTo(OutputStream out) å°†è¯¥â€œå­—ç¬¦æ•°ç»„è¾“å‡ºæµâ€çš„æ•°æ®å…¨éƒ¨å†™å…¥åˆ°â€œè¾“å‡ºæµoutâ€ä¸­ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ InputStreamReader å’Œ OutputStreamWriter</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">InputStreamReaderå’ŒOutputStreamWriter æ˜¯å­—èŠ‚æµé€šå‘å­—ç¬¦æµçš„æ¡¥æ¢ï¼šå®ƒä½¿ç”¨æŒ‡å®šçš„ charset è¯»å†™å­—èŠ‚å¹¶å°†å…¶è§£ç ä¸ºå­—ç¬¦ã€‚</span><br><span class="line">InputStreamReader çš„ä½œç”¨æ˜¯å°†â€œå­—èŠ‚è¾“å…¥æµâ€è½¬æ¢æˆâ€œå­—ç¬¦è¾“å…¥æµâ€ã€‚å®ƒç»§æ‰¿äºReaderã€‚</span><br><span class="line">OutputStreamWriter çš„ä½œç”¨æ˜¯å°†â€œå­—èŠ‚è¾“å‡ºæµâ€è½¬æ¢æˆâ€œå­—ç¬¦è¾“å‡ºæµâ€ã€‚å®ƒç»§æ‰¿äºWriterã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>java IO ä¹‹ FileReaderå’ŒFileWriter</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">FileReader æ˜¯ç”¨äºè¯»å–å­—ç¬¦æµçš„ç±»ï¼Œå®ƒç»§æ‰¿äºInputStreamReaderã€‚è¦è¯»å–åŸå§‹å­—èŠ‚æµï¼Œè¯·è€ƒè™‘ä½¿ç”¨ FileInputStreamã€‚</span><br><span class="line">FileWriter æ˜¯ç”¨äºå†™å…¥å­—ç¬¦æµçš„ç±»ï¼Œå®ƒç»§æ‰¿äºOutputStreamWriterã€‚è¦å†™å…¥åŸå§‹å­—èŠ‚æµï¼Œè¯·è€ƒè™‘ä½¿ç”¨ FileOutputStreamã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ BufferedReader(å­—ç¬¦ç¼“å†²è¾“å…¥æµ) å’Œ BufferedWriter(å­—ç¬¦ç¼“å†²è¾“å‡ºæµ)</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader æ˜¯ç¼“å†²å­—ç¬¦è¾“å…¥æµã€‚å®ƒç»§æ‰¿äºReaderã€‚</span><br><span class="line">BufferedReader çš„ä½œç”¨æ˜¯ä¸ºå…¶ä»–å­—ç¬¦è¾“å…¥æµæ·»åŠ ä¸€äº›ç¼“å†²åŠŸèƒ½ã€‚</span><br><span class="line">// æ„é€ å‡½æ•°</span><br><span class="line">BufferedReader(Reader in)</span><br><span class="line">BufferedReader(Reader in, int size)</span><br><span class="line"></span><br><span class="line">void     close()</span><br><span class="line">void     mark(int markLimit)</span><br><span class="line">boolean  markSupported()</span><br><span class="line">int      read()</span><br><span class="line">int      read(char[] buffer, int offset, int length)</span><br><span class="line">String   readLine()</span><br><span class="line">boolean  ready()</span><br><span class="line">void     reset()</span><br><span class="line">long     skip(long charCount)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BufferedWriter æ˜¯ç¼“å†²å­—ç¬¦è¾“å‡ºæµã€‚å®ƒç»§æ‰¿äºWriterã€‚</span><br><span class="line">BufferedWriter çš„ä½œç”¨æ˜¯ä¸ºå…¶ä»–å­—ç¬¦è¾“å‡ºæµæ·»åŠ ä¸€äº›ç¼“å†²åŠŸèƒ½ã€‚</span><br><span class="line">// æ„é€ å‡½æ•°</span><br><span class="line">BufferedWriter(Writer out) </span><br><span class="line">BufferedWriter(Writer out, int sz) </span><br><span class="line"> </span><br><span class="line">void    close()                              // å…³é—­æ­¤æµï¼Œä½†è¦å…ˆåˆ·æ–°å®ƒã€‚</span><br><span class="line">void    flush()                              // åˆ·æ–°è¯¥æµçš„ç¼“å†²ã€‚</span><br><span class="line">void    newLine()                            // å†™å…¥ä¸€ä¸ªè¡Œåˆ†éš”ç¬¦ã€‚</span><br><span class="line">void    write(char[] cbuf, int off, int len) // å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†ã€‚</span><br><span class="line">void    write(int c)                         // å†™å…¥å•ä¸ªå­—ç¬¦ã€‚</span><br><span class="line">void    write(String s, int off, int len)    // å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java IO ä¹‹ PrintWriter (å­—ç¬¦æ‰“å°è¾“å‡ºæµ)</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter æ˜¯å­—ç¬¦ç±»å‹çš„æ‰“å°è¾“å‡ºæµï¼Œå®ƒç»§æ‰¿äºWriterã€‚</span><br><span class="line"></span><br><span class="line">PrintStream ç”¨äºå‘æ–‡æœ¬è¾“å‡ºæµæ‰“å°å¯¹è±¡çš„æ ¼å¼åŒ–è¡¨ç¤ºå½¢å¼ã€‚å®ƒå®ç°åœ¨ PrintStream ä¸­çš„æ‰€æœ‰ print æ–¹æ³•ã€‚</span><br><span class="line">å®ƒä¸åŒ…å«ç”¨äºå†™å…¥åŸå§‹å­—èŠ‚çš„æ–¹æ³•ï¼Œå¯¹äºè¿™äº›å­—èŠ‚ï¼Œç¨‹åºåº”è¯¥ä½¿ç”¨æœªç¼–ç çš„å­—èŠ‚æµè¿›è¡Œå†™å…¥ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>java IO ä¹‹ RandomAccessFile</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">RandomAccessFile æ˜¯éšæœºè®¿é—®æ–‡ä»¶(åŒ…æ‹¬è¯»/å†™)çš„ç±»ã€‚å®ƒæ”¯æŒå¯¹æ–‡ä»¶éšæœºè®¿é—®çš„è¯»å–å’Œå†™å…¥ï¼Œå³æˆ‘ä»¬å¯ä»¥ä»æŒ‡å®šçš„ä½ç½®è¯»å–/å†™å…¥æ–‡ä»¶æ•°æ®ã€‚</span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRandomAccessFile è™½ç„¶å±äºjava.ioåŒ…ï¼Œä½†å®ƒä¸æ˜¯InputStreamæˆ–è€…OutputStreamçš„å­ç±»ï¼›</span><br><span class="line">å®ƒä¹Ÿä¸åŒäºFileInputStreamå’ŒFileOutputStreamã€‚ FileInputStream åªèƒ½å¯¹æ–‡ä»¶è¿›è¡Œè¯»æ“ä½œï¼Œè€ŒFileOutputStream åªèƒ½å¯¹æ–‡ä»¶è¿›è¡Œå†™æ“ä½œï¼›</span><br><span class="line">ä½†æ˜¯ï¼ŒRandomAccessFile åŒæ—¶æ”¯æŒæ–‡ä»¶çš„è¯»å’Œå†™ï¼Œå¹¶ä¸”å®ƒæ”¯æŒéšæœºè®¿é—®ã€‚</span><br><span class="line"></span><br><span class="line">RandomAccessFileå…±æœ‰4ç§æ¨¡å¼ï¼š&quot;r&quot;, &quot;rw&quot;, &quot;rws&quot;å’Œ&quot;rwd&quot;ã€‚</span><br><span class="line">&quot;r&quot;    ä»¥åªè¯»æ–¹å¼æ‰“å¼€ã€‚è°ƒç”¨ç»“æœå¯¹è±¡çš„ä»»ä½• write æ–¹æ³•éƒ½å°†å¯¼è‡´æŠ›å‡º IOExceptionã€‚  </span><br><span class="line">&quot;rw&quot;   æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ã€‚</span><br><span class="line">&quot;rws&quot;  æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ã€‚ç›¸å¯¹äº &quot;rw&quot;ï¼Œ&quot;rws&quot; è¿˜è¦æ±‚å¯¹â€œæ–‡ä»¶çš„å†…å®¹â€æˆ–â€œå…ƒæ•°æ®â€çš„æ¯ä¸ªæ›´æ–°éƒ½åŒæ­¥å†™å…¥åˆ°åŸºç¡€å­˜å‚¨è®¾å¤‡ã€‚  </span><br><span class="line">&quot;rwd&quot;  æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ï¼Œç›¸å¯¹äº &quot;rw&quot;ï¼Œ&quot;rwd&quot; è¿˜è¦æ±‚å¯¹â€œæ–‡ä»¶çš„å†…å®¹â€çš„æ¯ä¸ªæ›´æ–°éƒ½åŒæ­¥å†™å…¥åˆ°åŸºç¡€å­˜å‚¨è®¾å¤‡ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>java NIO</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">NIOå³New IOï¼Œè¿™ä¸ªåº“æ˜¯åœ¨JDK1.4ä¸­æ‰å¼•å…¥çš„ã€‚NIOå’ŒIOæœ‰ç›¸åŒçš„ä½œç”¨å’Œç›®çš„ï¼Œä½†å®ç°æ–¹å¼ä¸åŒï¼Œ</span><br><span class="line">NIOä¸»è¦ç”¨åˆ°çš„æ˜¯å—ï¼Œæ‰€ä»¥NIOçš„æ•ˆç‡è¦æ¯”IOé«˜å¾ˆå¤šã€‚åœ¨Java APIä¸­æä¾›äº†ä¸¤å¥—NIOï¼Œä¸€å¥—æ˜¯é’ˆå¯¹æ ‡å‡†è¾“å…¥è¾“å‡ºNIOï¼Œå¦ä¸€å¥—å°±æ˜¯ç½‘ç»œç¼–ç¨‹NIOã€‚</span><br><span class="line"></span><br><span class="line">Java IOå’ŒNIOä¹‹é—´ç¬¬ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«æ˜¯ï¼ŒIOæ˜¯é¢å‘æµçš„ï¼ŒNIOæ˜¯é¢å‘ç¼“å†²åŒºçš„ã€‚ </span><br><span class="line"></span><br><span class="line">Java IOé¢å‘æµæ„å‘³ç€æ¯æ¬¡ä»æµä¸­è¯»ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ï¼Œç›´è‡³è¯»å–æ‰€æœ‰å­—èŠ‚ï¼Œå®ƒä»¬æ²¡æœ‰è¢«ç¼“å­˜åœ¨ä»»ä½•åœ°æ–¹ã€‚æ­¤å¤–ï¼Œå®ƒä¸èƒ½å‰åç§»åŠ¨æµä¸­çš„æ•°æ®ã€‚å¦‚æœéœ€è¦å‰åç§»åŠ¨ä»æµä¸­è¯»å–çš„æ•°æ®ï¼Œéœ€è¦å…ˆå°†å®ƒç¼“å­˜åˆ°ä¸€ä¸ªç¼“å†²åŒºã€‚ </span><br><span class="line">Java NIOçš„ç¼“å†²å¯¼å‘æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚æ•°æ®è¯»å–åˆ°ä¸€ä¸ªå®ƒç¨åå¤„ç†çš„ç¼“å†²åŒºï¼Œéœ€è¦æ—¶å¯åœ¨ç¼“å†²åŒºä¸­å‰åç§»åŠ¨ã€‚è¿™å°±å¢åŠ äº†å¤„ç†è¿‡ç¨‹ä¸­çš„çµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œè¿˜éœ€è¦æ£€æŸ¥æ˜¯å¦è¯¥ç¼“å†²åŒºä¸­åŒ…å«æ‰€æœ‰æ‚¨éœ€è¦å¤„ç†çš„æ•°æ®ã€‚è€Œä¸”ï¼Œéœ€ç¡®ä¿å½“æ›´å¤šçš„æ•°æ®è¯»å…¥ç¼“å†²åŒºæ—¶ï¼Œä¸è¦è¦†ç›–ç¼“å†²åŒºé‡Œå°šæœªå¤„ç†çš„æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">Java IOçš„å„ç§æµæ˜¯é˜»å¡çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨read() æˆ– write()æ—¶ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€äº›æ•°æ®è¢«è¯»å–ï¼Œæˆ–æ•°æ®å®Œå…¨å†™å…¥ã€‚è¯¥çº¿ç¨‹åœ¨æ­¤æœŸé—´ä¸èƒ½å†å¹²ä»»ä½•äº‹æƒ…äº†ã€‚</span><br><span class="line">Java NIOçš„éé˜»å¡æ¨¡å¼ï¼Œä½¿ä¸€ä¸ªçº¿ç¨‹ä»æŸé€šé“å‘é€è¯·æ±‚è¯»å–æ•°æ®ï¼Œä½†æ˜¯å®ƒä»…èƒ½å¾—åˆ°ç›®å‰å¯ç”¨çš„æ•°æ®ï¼Œå¦‚æœç›®å‰æ²¡æœ‰æ•°æ®å¯ç”¨æ—¶ï¼Œå°±ä»€ä¹ˆéƒ½ä¸ä¼šè·å–ï¼Œè€Œä¸æ˜¯ä¿æŒçº¿ç¨‹é˜»å¡ï¼Œæ‰€ä»¥ç›´è‡³æ•°æ®å˜çš„å¯ä»¥è¯»å–ä¹‹å‰ï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­åšå…¶ä»–çš„äº‹æƒ…ã€‚ éé˜»å¡å†™ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚å†™å…¥ä¸€äº›æ•°æ®åˆ°æŸé€šé“ï¼Œä½†ä¸éœ€è¦ç­‰å¾…å®ƒå®Œå…¨å†™å…¥ï¼Œè¿™ä¸ªçº¿ç¨‹åŒæ—¶å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚ çº¿ç¨‹é€šå¸¸å°†éé˜»å¡IOçš„ç©ºé—²æ—¶é—´ç”¨äºåœ¨å…¶å®ƒé€šé“ä¸Šæ‰§è¡ŒIOæ“ä½œï¼Œæ‰€ä»¥ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ç°åœ¨å¯ä»¥ç®¡ç†å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºé€šé“ï¼ˆchannelï¼‰ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Java NIOçš„é€‰æ‹©å™¨å…è®¸ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥ç›‘è§†å¤šä¸ªè¾“å…¥é€šé“ï¼Œä½ å¯ä»¥æ³¨å†Œå¤šä¸ªé€šé“ä½¿ç”¨ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥â€œé€‰æ‹©â€é€šé“ï¼šè¿™äº›é€šé“é‡Œå·²ç»æœ‰å¯ä»¥å¤„ç†çš„è¾“å…¥ï¼Œæˆ–è€…é€‰æ‹©å·²å‡†å¤‡å†™å…¥çš„é€šé“ã€‚è¿™ç§é€‰æ‹©æœºåˆ¶ï¼Œä½¿å¾—ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹å¾ˆå®¹æ˜“æ¥ç®¡ç†å¤šä¸ªé€šé“ã€‚éé˜»å¡æ˜¯å¯¹äºç½‘ç»œioçš„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NIOç¼“å†²åŒºï¼Œbufferï¼Œè´Ÿè´£å­˜å–æ•°æ®çš„ï¼Œé¡¶å±‚æ˜¯æ•°ç»„ã€‚</span><br><span class="line">allocate() åˆ†é…éç›´æ¥ç¼“å†²åŒºï¼Œå»ºç«‹åœ¨jvmçš„å†…å­˜ä¸­ã€‚</span><br><span class="line">allocateDirectï¼ˆï¼‰åˆ†é…ç›´æ¥ç¼“å†²åŒºã€‚</span><br><span class="line"></span><br><span class="line">putï¼ˆï¼‰å­˜å…¥æ•°æ®åˆ°ç¼“å†²åŒº</span><br><span class="line">getï¼ˆï¼‰è·å–ç¼“å†²åŒºä¸­çš„æ•°æ®</span><br><span class="line">flip()  åˆ‡æ¢è¯»å†™æ¨¡å¼    å…ˆè®¾ç½®limitä¸ºå½“å‰çš„positionã€‚ ç„¶åé‡ç½®positionä¸º0</span><br><span class="line">rewindï¼ˆï¼‰å¯é‡å¤è¯»å–æ•°æ®  é‡ç½®positionä¸º0</span><br><span class="line">clearï¼ˆï¼‰é‡ç½®positionä¸º0ï¼Œlimitä¸ºcapacityã€‚</span><br><span class="line"></span><br><span class="line">capacity å®¹é‡ï¼Œç¼“å†²åŒºæœ€å¤§å­˜å‚¨å®¹é‡ï¼Œä¸€æ—¦å£°æ˜ä¸èƒ½æ”¹å˜ã€‚</span><br><span class="line">limit ç•Œé™ï¼Œç¼“å†²åŒºä¸­å¯ä»¥æ“ä½œæ•°æ®çš„å¤§å°ï¼Œlimitåé¢çš„æ•°æ®æ˜¯ä¸èƒ½è¿›è¡Œè¯»å†™æ“ä½œçš„ã€‚</span><br><span class="line">position ä½ç½®ï¼Œç¼“å†²åŒºä¸­æ­£åœ¨æ“ä½œçš„æ•°æ®çš„ä½ç½®ã€‚</span><br><span class="line">mark è®°å½•å½“å‰positionçš„ä½ç½®çš„ï¼Œå¯ä»¥é€šè¿‡markï¼ˆï¼‰å’Œresetï¼ˆï¼‰æ¥è®¾ç½®å’Œæ¢å¤</span><br><span class="line"></span><br><span class="line">0 &lt;= mark &lt;= position &lt;= limit &lt;= capacity</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">é€šé“ç›´æ¥çš„æ•°æ®ä¼ è¾“</span><br><span class="line">inChannel.transferTo(0, inChannel.size(), outChannel);</span><br><span class="line"></span><br><span class="line">outChannel.transferFrom(inChannel, 0, inChannel.size());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åˆ†æ•£è¯»å–ï¼Œèšé›†å†™å…¥</span><br><span class="line">ByteBuffer[] bufs = &#123;byteBuffer1, byteBuffer2&#125;;</span><br><span class="line">channel.read(bufs);</span><br><span class="line">        </span><br><span class="line">ByteBuffer[] bufs = &#123;byteBuffer1, byteBuffer2&#125;;</span><br><span class="line">channel.write(bufs);  //GatheringByteChannel</span><br><span class="line"></span><br><span class="line">å­—ç¬¦ç¼–ç å’Œè§£ç </span><br><span class="line">ç¼–ç æ˜¯  å­—ç¬¦ä¸²   è½¬æ¢ä¸º  å­—èŠ‚æ•°ç»„</span><br><span class="line">è§£ç æ˜¯  å­—èŠ‚æ•°ç»„  è½¬æ¢ä¸º å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦ç¼–ç  </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">1. ASCIIç </span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œæ‰€æœ‰çš„ä¿¡æ¯æœ€ç»ˆéƒ½è¡¨ç¤ºä¸ºä¸€ä¸ªäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰æœ‰0å’Œ1ä¸¤ç§çŠ¶æ€ï¼Œå› æ­¤å…«ä¸ªäºŒè¿›åˆ¶ä½å°±å¯ä»¥ç»„åˆå‡º256ç§çŠ¶æ€ï¼Œè¿™è¢«ç§°ä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå­—èŠ‚ä¸€å…±å¯ä»¥ç”¨æ¥è¡¨ç¤º256ç§ä¸åŒçš„çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªç¬¦å·ï¼Œå°±æ˜¯256ä¸ªç¬¦å·ï¼Œä»0000000åˆ°11111111ã€‚</span><br><span class="line"></span><br><span class="line">ä¸Šä¸ªä¸–çºª60å¹´ä»£ï¼Œç¾å›½åˆ¶å®šäº†ä¸€å¥—å­—ç¬¦ç¼–ç ï¼Œå¯¹è‹±è¯­å­—ç¬¦ä¸äºŒè¿›åˆ¶ä½ä¹‹é—´çš„å…³ç³»ï¼Œåšäº†ç»Ÿä¸€è§„å®šã€‚è¿™è¢«ç§°ä¸ºASCIIç ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚</span><br><span class="line"></span><br><span class="line">ASCIIç ä¸€å…±è§„å®šäº†128ä¸ªå­—ç¬¦çš„ç¼–ç ï¼Œæ¯”å¦‚ç©ºæ ¼&quot;SPACE&quot;æ˜¯32ï¼ˆäºŒè¿›åˆ¶00100000ï¼‰ï¼Œå¤§å†™çš„å­—æ¯Aæ˜¯65ï¼ˆäºŒè¿›åˆ¶01000001ï¼‰ã€‚è¿™128ä¸ªç¬¦å·ï¼ˆåŒ…æ‹¬32ä¸ªä¸èƒ½æ‰“å°å‡ºæ¥çš„æ§åˆ¶ç¬¦å·ï¼‰ï¼Œåªå ç”¨äº†ä¸€ä¸ªå­—èŠ‚çš„åé¢7ä½ï¼Œæœ€å‰é¢çš„1ä½ç»Ÿä¸€è§„å®šä¸º0ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">2ã€éASCIIç¼–ç </span><br><span class="line"></span><br><span class="line">è‹±è¯­ç”¨128ä¸ªç¬¦å·ç¼–ç å°±å¤Ÿäº†ï¼Œä½†æ˜¯ç”¨æ¥è¡¨ç¤ºå…¶ä»–è¯­è¨€ï¼Œ128ä¸ªç¬¦å·æ˜¯ä¸å¤Ÿçš„ã€‚æ¯”å¦‚ï¼Œåœ¨æ³•è¯­ä¸­ï¼Œå­—æ¯ä¸Šæ–¹æœ‰æ³¨éŸ³ç¬¦å·ï¼Œå®ƒå°±æ— æ³•ç”¨ASCIIç è¡¨ç¤ºã€‚äºæ˜¯ï¼Œä¸€äº›æ¬§æ´²å›½å®¶å°±å†³å®šï¼Œåˆ©ç”¨å­—èŠ‚ä¸­é—²ç½®çš„æœ€é«˜ä½ç¼–å…¥æ–°çš„ç¬¦å·ã€‚æ¯”å¦‚ï¼Œæ³•è¯­ä¸­çš„Ã©çš„ç¼–ç ä¸º130ï¼ˆäºŒè¿›åˆ¶10000010ï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™äº›æ¬§æ´²å›½å®¶ä½¿ç”¨çš„ç¼–ç ä½“ç³»ï¼Œå¯ä»¥è¡¨ç¤ºæœ€å¤š256ä¸ªç¬¦å·ã€‚</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯ï¼Œè¿™é‡Œåˆå‡ºç°äº†æ–°çš„é—®é¢˜ã€‚ä¸åŒçš„å›½å®¶æœ‰ä¸åŒçš„å­—æ¯ï¼Œå› æ­¤ï¼Œå“ªæ€•å®ƒä»¬éƒ½ä½¿ç”¨256ä¸ªç¬¦å·çš„ç¼–ç æ–¹å¼ï¼Œä»£è¡¨çš„å­—æ¯å´ä¸ä¸€æ ·ã€‚æ¯”å¦‚ï¼Œ130åœ¨æ³•è¯­ç¼–ç ä¸­ä»£è¡¨äº†Ã©ï¼Œåœ¨å¸Œä¼¯æ¥è¯­ç¼–ç ä¸­å´ä»£è¡¨äº†å­—æ¯Gimel (×’)ï¼Œåœ¨ä¿„è¯­ç¼–ç ä¸­åˆä¼šä»£è¡¨å¦ä¸€ä¸ªç¬¦å·ã€‚ä½†æ˜¯ä¸ç®¡æ€æ ·ï¼Œæ‰€æœ‰è¿™äº›ç¼–ç æ–¹å¼ä¸­ï¼Œ0--127è¡¨ç¤ºçš„ç¬¦å·æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„åªæ˜¯128--255çš„è¿™ä¸€æ®µã€‚</span><br><span class="line"></span><br><span class="line">è‡³äºäºšæ´²å›½å®¶çš„æ–‡å­—ï¼Œä½¿ç”¨çš„ç¬¦å·å°±æ›´å¤šäº†ï¼Œæ±‰å­—å°±å¤šè¾¾10ä¸‡å·¦å³ã€‚ä¸€ä¸ªå­—èŠ‚åªèƒ½è¡¨ç¤º256ç§ç¬¦å·ï¼Œè‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œå°±å¿…é¡»ä½¿ç”¨å¤šä¸ªå­—èŠ‚è¡¨è¾¾ä¸€ä¸ªç¬¦å·ã€‚æ¯”å¦‚ï¼Œç®€ä½“ä¸­æ–‡å¸¸è§çš„ç¼–ç æ–¹å¼æ˜¯GB2312ï¼Œä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å¤šå¯ä»¥è¡¨ç¤º256x256=65536ä¸ªç¬¦å·ã€‚</span><br><span class="line"></span><br><span class="line">ä¸­æ–‡ç¼–ç çš„é—®é¢˜éœ€è¦ä¸“æ–‡è®¨è®ºï¼Œè¿™ç¯‡ç¬”è®°ä¸æ¶‰åŠã€‚è¿™é‡ŒåªæŒ‡å‡ºï¼Œè™½ç„¶éƒ½æ˜¯ç”¨å¤šä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œä½†æ˜¯GBç±»çš„æ±‰å­—ç¼–ç ä¸åæ–‡çš„Unicodeå’ŒUTF-8æ˜¯æ¯«æ— å…³ç³»çš„ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">3.Unicode</span><br><span class="line"></span><br><span class="line">æ­£å¦‚ä¸Šä¸€èŠ‚æ‰€è¯´ï¼Œä¸–ç•Œä¸Šå­˜åœ¨ç€å¤šç§ç¼–ç æ–¹å¼ï¼ŒåŒä¸€ä¸ªäºŒè¿›åˆ¶æ•°å­—å¯ä»¥è¢«è§£é‡Šæˆä¸åŒçš„ç¬¦å·ã€‚å› æ­¤ï¼Œè¦æƒ³æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå°±å¿…é¡»çŸ¥é“å®ƒçš„ç¼–ç æ–¹å¼ï¼Œå¦åˆ™ç”¨é”™è¯¯çš„ç¼–ç æ–¹å¼è§£è¯»ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚ä¸ºä»€ä¹ˆç”µå­é‚®ä»¶å¸¸å¸¸å‡ºç°ä¹±ç ï¼Ÿå°±æ˜¯å› ä¸ºå‘ä¿¡äººå’Œæ”¶ä¿¡äººä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸ä¸€æ ·ã€‚</span><br><span class="line"></span><br><span class="line">å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœæœ‰ä¸€ç§ç¼–ç ï¼Œå°†ä¸–ç•Œä¸Šæ‰€æœ‰çš„ç¬¦å·éƒ½çº³å…¥å…¶ä¸­ã€‚æ¯ä¸€ä¸ªç¬¦å·éƒ½ç»™äºˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–ç ï¼Œé‚£ä¹ˆä¹±ç é—®é¢˜å°±ä¼šæ¶ˆå¤±ã€‚è¿™å°±æ˜¯Unicodeï¼Œå°±åƒå®ƒçš„åå­—éƒ½è¡¨ç¤ºçš„ï¼Œè¿™æ˜¯ä¸€ç§æ‰€æœ‰ç¬¦å·çš„ç¼–ç ã€‚</span><br><span class="line"></span><br><span class="line">Unicodeå½“ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é›†åˆï¼Œç°åœ¨çš„è§„æ¨¡å¯ä»¥å®¹çº³100å¤šä¸‡ä¸ªç¬¦å·ã€‚æ¯ä¸ªç¬¦å·çš„ç¼–ç éƒ½ä¸ä¸€æ ·ï¼Œæ¯”å¦‚ï¼ŒU+0639è¡¨ç¤ºé˜¿æ‹‰ä¼¯å­—æ¯Ainï¼ŒU+0041è¡¨ç¤ºè‹±è¯­çš„å¤§å†™å­—æ¯Aï¼ŒU+4E25è¡¨ç¤ºæ±‰å­—&quot;ä¸¥&quot;ã€‚å…·ä½“çš„ç¬¦å·å¯¹åº”è¡¨ï¼Œå¯ä»¥æŸ¥è¯¢unicode.orgï¼Œæˆ–è€…ä¸“é—¨çš„æ±‰å­—å¯¹åº”è¡¨ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">4. Unicodeçš„é—®é¢˜</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒUnicodeåªæ˜¯ä¸€ä¸ªç¬¦å·é›†ï¼Œå®ƒåªè§„å®šäº†ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå´æ²¡æœ‰è§„å®šè¿™ä¸ªäºŒè¿›åˆ¶ä»£ç åº”è¯¥å¦‚ä½•å­˜å‚¨ã€‚</span><br><span class="line"></span><br><span class="line">æ¯”å¦‚ï¼Œæ±‰å­—&quot;ä¸¥&quot;çš„unicodeæ˜¯åå…­è¿›åˆ¶æ•°4E25ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶æ•°è¶³è¶³æœ‰15ä½ï¼ˆ100111000100101ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç¬¦å·çš„è¡¨ç¤ºè‡³å°‘éœ€è¦2ä¸ªå­—èŠ‚ã€‚è¡¨ç¤ºå…¶ä»–æ›´å¤§çš„ç¬¦å·ï¼Œå¯èƒ½éœ€è¦3ä¸ªå­—èŠ‚æˆ–è€…4ä¸ªå­—èŠ‚ï¼Œç”šè‡³æ›´å¤šã€‚ </span><br><span class="line"></span><br><span class="line">è¿™é‡Œå°±æœ‰ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½åŒºåˆ«Unicodeå’ŒASCIIï¼Ÿè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªç¬¦å·å‘¢ï¼Ÿç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œè‹±æ–‡å­—æ¯åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå°±å¤Ÿäº†ï¼Œå¦‚æœUnicodeç»Ÿä¸€è§„å®šï¼Œæ¯ä¸ªç¬¦å·ç”¨ä¸‰ä¸ªæˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªè‹±æ–‡å­—æ¯å‰éƒ½å¿…ç„¶æœ‰äºŒåˆ°ä¸‰ä¸ªå­—èŠ‚æ˜¯0ï¼Œè¿™å¯¹äºå­˜å‚¨æ¥è¯´æ˜¯æå¤§çš„æµªè´¹ï¼Œæ–‡æœ¬æ–‡ä»¶çš„å¤§å°ä¼šå› æ­¤å¤§å‡ºäºŒä¸‰å€ï¼Œè¿™æ˜¯æ— æ³•æ¥å—çš„ã€‚</span><br><span class="line"></span><br><span class="line">å®ƒä»¬é€ æˆçš„ç»“æœæ˜¯ï¼š1ï¼‰å‡ºç°äº†Unicodeçš„å¤šç§å­˜å‚¨æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰è®¸å¤šç§ä¸åŒçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeã€‚2ï¼‰Unicodeåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æ— æ³•æ¨å¹¿ï¼Œç›´åˆ°äº’è”ç½‘çš„å‡ºç°ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">5.UTF-8</span><br><span class="line"></span><br><span class="line">äº’è”ç½‘çš„æ™®åŠï¼Œå¼ºçƒˆè¦æ±‚å‡ºç°ä¸€ç§ç»Ÿä¸€çš„ç¼–ç æ–¹å¼ã€‚UTF-8å°±æ˜¯åœ¨äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿çš„ä¸€ç§Unicodeçš„å®ç°æ–¹å¼ã€‚å…¶ä»–å®ç°æ–¹å¼è¿˜åŒ…æ‹¬UTF-16ï¼ˆå­—ç¬¦ç”¨ä¸¤ä¸ªå­—èŠ‚æˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼‰å’ŒUTF-32ï¼ˆå­—ç¬¦ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼‰ï¼Œä¸è¿‡åœ¨äº’è”ç½‘ä¸ŠåŸºæœ¬ä¸ç”¨ã€‚é‡å¤ä¸€éï¼Œè¿™é‡Œçš„å…³ç³»æ˜¯ï¼ŒUTF-8æ˜¯Unicodeçš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚ </span><br><span class="line"></span><br><span class="line">UTF-8æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚</span><br><span class="line"></span><br><span class="line">UTF-8çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š</span><br><span class="line"></span><br><span class="line">1ï¼‰å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8ç¼–ç å’ŒASCIIç æ˜¯ç›¸åŒçš„ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼ˆn&gt;1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚</span><br><span class="line"></span><br><span class="line">ä¸‹è¡¨æ€»ç»“äº†ç¼–ç è§„åˆ™ï¼Œå­—æ¯xè¡¨ç¤ºå¯ç”¨ç¼–ç çš„ä½ã€‚</span><br><span class="line">Unicodeç¬¦å·èŒƒå›´          |   UTF-8ç¼–ç æ–¹å¼</span><br><span class="line">(åå…­è¿›åˆ¶)                      | ï¼ˆäºŒè¿›åˆ¶ï¼‰</span><br><span class="line">--------------------+---------------------------------------------</span><br><span class="line">0000 0000-0000 007F   | 0xxxxxxx</span><br><span class="line">0000 0080-0000 07FF   | 110xxxxx 10xxxxxx</span><br><span class="line">0000 0800-0000 FFFF  | 1110xxxx 10xxxxxx 10xxxxxx</span><br><span class="line">0001 0000-0010 FFFF  | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</span><br><span class="line"></span><br><span class="line">è·Ÿæ®ä¸Šè¡¨ï¼Œè§£è¯»UTF-8ç¼–ç éå¸¸ç®€å•ã€‚å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯0ï¼Œåˆ™è¿™ä¸ªå­—èŠ‚å•ç‹¬å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœç¬¬ä¸€ä½æ˜¯1ï¼Œåˆ™è¿ç»­æœ‰å¤šå°‘ä¸ª1ï¼Œå°±è¡¨ç¤ºå½“å‰å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line">ä¸‹é¢ï¼Œè¿˜æ˜¯ä»¥æ±‰å­—&quot;ä¸¥&quot;ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®ç°UTF-8ç¼–ç ã€‚</span><br><span class="line"></span><br><span class="line">å·²çŸ¥&quot;ä¸¥&quot;çš„unicodeæ˜¯4E25ï¼ˆ100111000100101ï¼‰ï¼Œæ ¹æ®ä¸Šè¡¨ï¼Œå¯ä»¥å‘ç°4E25å¤„åœ¨ç¬¬ä¸‰è¡Œçš„èŒƒå›´å†…ï¼ˆ0000 0800-0000 FFFFï¼‰ï¼Œå› æ­¤&quot;ä¸¥&quot;çš„UTF-8ç¼–ç éœ€è¦ä¸‰ä¸ªå­—èŠ‚ï¼Œå³æ ¼å¼æ˜¯&quot;1110xxxx 10xxxxxx 10xxxxxx&quot;ã€‚ç„¶åï¼Œä»&quot;ä¸¥&quot;çš„æœ€åä¸€ä¸ªäºŒè¿›åˆ¶ä½å¼€å§‹ï¼Œä¾æ¬¡ä»åå‘å‰å¡«å…¥æ ¼å¼ä¸­çš„xï¼Œå¤šå‡ºçš„ä½è¡¥0ã€‚è¿™æ ·å°±å¾—åˆ°äº†ï¼Œ&quot;ä¸¥&quot;çš„UTF-8ç¼–ç æ˜¯&quot;11100100 10111000 10100101&quot;ï¼Œè½¬æ¢æˆåå…­è¿›åˆ¶å°±æ˜¯E4B8A5ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">big endian(å¤§ç«¯æ³•)æ˜¯æŒ‡ä½åœ°å€å­˜æ”¾æœ€é«˜æœ‰æ•ˆå­—èŠ‚ï¼ˆMSBï¼‰ï¼Œå¤§ç«¯æ¨¡å¼ï¼Œæ˜¯æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè¿™æ ·çš„å­˜å‚¨æ¨¡å¼æœ‰ç‚¹å„¿ç±»ä¼¼äºæŠŠæ•°æ®å½“ä½œå­—ç¬¦ä¸²é¡ºåºå¤„ç†ï¼šåœ°å€ç”±å°å‘å¤§å¢åŠ ï¼Œè€Œæ•°æ®ä»é«˜ä½å¾€ä½ä½æ”¾ï¼›è¿™å’Œæˆ‘ä»¬çš„é˜…è¯»ä¹ æƒ¯ä¸€è‡´ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">little endian(å°ç«¯æ³•)åˆ™æ˜¯ä½åœ°å€å­˜æ”¾æœ€ä½æœ‰æ•ˆå­—èŠ‚ï¼ˆLSBï¼‰å°ç«¯æ¨¡å¼ï¼Œæ˜¯æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè¿™ç§å­˜å‚¨æ¨¡å¼å°†åœ°å€çš„é«˜ä½å’Œæ•°æ®ä½æƒæœ‰æ•ˆåœ°ç»“åˆèµ·æ¥ï¼Œé«˜åœ°å€éƒ¨åˆ†æƒå€¼é«˜ï¼Œä½åœ°å€éƒ¨åˆ†æƒå€¼ä½ã€‚</span><br><span class="line">ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java å¤šçº¿ç¨‹</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¤šçº¿ç¨‹æ˜¯Javaä¸­ä¸å¯é¿å…çš„ä¸€ä¸ªé‡è¦ä¸»ä½“ã€‚ä»æœ¬ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°†å±•å¼€å¯¹å¤šçº¿ç¨‹çš„å­¦ä¹ ã€‚æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œ</span><br><span class="line">æ˜¯å¯¹â€œJDKä¸­æ–°å¢JUCåŒ…â€ä¹‹å‰çš„Javaå¤šçº¿ç¨‹å†…å®¹çš„è®²è§£ï¼Œæ¶‰åŠåˆ°çš„å†…å®¹åŒ…æ‹¬ï¼ŒObjectç±»ä¸­çš„wait(), notify()ç­‰æ¥å£ï¼›Threadç±»ä¸­çš„æ¥å£ï¼›synchronizedå…³é”®å­—ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨ï¼šJUCåŒ…æ˜¯æŒ‡ï¼ŒJava.util.concurrentåŒ…ï¼Œå®ƒæ˜¯ç”±Javaå¤§å¸ˆDoug Leaå®Œæˆå¹¶åœ¨JDK1.5ç‰ˆæœ¬æ·»åŠ åˆ°Javaä¸­çš„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>çº¿ç¨‹çŠ¶æ€å›¾<br><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%80%BB%E7%BB%93_01.jpg" alt="image182.jpeg"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹å…±åŒ…æ‹¬ä»¥ä¸‹5ç§çŠ¶æ€ã€‚</span><br><span class="line">1. æ–°å»ºçŠ¶æ€(New)         : çº¿ç¨‹å¯¹è±¡è¢«åˆ›å»ºåï¼Œå°±è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒThread thread = new Thread()ã€‚</span><br><span class="line"></span><br><span class="line">2. å°±ç»ªçŠ¶æ€(Runnable): ä¹Ÿè¢«ç§°ä¸ºâ€œå¯æ‰§è¡ŒçŠ¶æ€â€ã€‚çº¿ç¨‹å¯¹è±¡è¢«åˆ›å»ºåï¼Œå…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†è¯¥å¯¹è±¡çš„start()æ–¹æ³•ï¼Œ</span><br><span class="line">    ä»è€Œæ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œthread.start()ã€‚å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹ï¼Œéšæ—¶å¯èƒ½è¢«CPUè°ƒåº¦æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">3. è¿è¡ŒçŠ¶æ€(Running) : çº¿ç¨‹è·å–CPUæƒé™è¿›è¡Œæ‰§è¡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçº¿ç¨‹åªèƒ½ä»å°±ç»ªçŠ¶æ€è¿›å…¥åˆ°è¿è¡ŒçŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">4. é˜»å¡çŠ¶æ€(Blocked)  : é˜»å¡çŠ¶æ€æ˜¯çº¿ç¨‹å› ä¸ºæŸç§åŸå› æ”¾å¼ƒCPUä½¿ç”¨æƒï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œæ‰æœ‰æœºä¼šè½¬åˆ°è¿è¡ŒçŠ¶æ€ã€‚é˜»å¡çš„æƒ…å†µåˆ†ä¸‰ç§ï¼š</span><br><span class="line">    (01) ç­‰å¾…é˜»å¡ -- é€šè¿‡è°ƒç”¨çº¿ç¨‹çš„wait()æ–¹æ³•ï¼Œè®©çº¿ç¨‹ç­‰å¾…æŸå·¥ä½œçš„å®Œæˆã€‚</span><br><span class="line">    (02) åŒæ­¥é˜»å¡ -- çº¿ç¨‹åœ¨è·å–synchronizedåŒæ­¥é”å¤±è´¥(å› ä¸ºé”è¢«å…¶å®ƒçº¿ç¨‹æ‰€å ç”¨)ï¼Œå®ƒä¼šè¿›å…¥åŒæ­¥é˜»å¡çŠ¶æ€ã€‚</span><br><span class="line">    (03) å…¶ä»–é˜»å¡ -- é€šè¿‡è°ƒç”¨çº¿ç¨‹çš„sleep()æˆ–join()æˆ–å‘å‡ºäº†I/Oè¯·æ±‚æ—¶ï¼Œçº¿ç¨‹ä¼šè¿›å…¥åˆ°é˜»å¡çŠ¶æ€ã€‚</span><br><span class="line">    å½“sleep()çŠ¶æ€è¶…æ—¶ã€join()ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€æˆ–è€…I/Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚</span><br><span class="line">    </span><br><span class="line">5. æ­»äº¡çŠ¶æ€(Dead)    : çº¿ç¨‹æ‰§è¡Œå®Œäº†æˆ–è€…å› å¼‚å¸¸é€€å‡ºäº†run()æ–¹æ³•ï¼Œè¯¥çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">è¿™5ç§çŠ¶æ€æ¶‰åŠåˆ°çš„å†…å®¹åŒ…æ‹¬Objectç±», Threadå’Œsynchronizedå…³é”®å­—ã€‚è¿™äº›å†…å®¹æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­é€ä¸ªè¿›è¡Œå­¦ä¹ ã€‚</span><br><span class="line">Objectç±»ï¼Œå®šä¹‰äº†wait(), notify(), notifyAll()ç­‰ä¼‘çœ /å”¤é†’å‡½æ•°ã€‚</span><br><span class="line">Threadç±»ï¼Œå®šä¹‰äº†ä¸€äº›åˆ—çš„çº¿ç¨‹æ“ä½œå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œsleep()ä¼‘çœ å‡½æ•°, interrupt()ä¸­æ–­å‡½æ•°, getName()è·å–çº¿ç¨‹åç§°ç­‰ã€‚</span><br><span class="line">synchronizedï¼Œæ˜¯å…³é”®å­—ï¼›å®ƒåŒºåˆ†ä¸ºsynchronizedä»£ç å—å’Œsynchronizedæ–¹æ³•ã€‚synchronizedçš„ä½œç”¨æ˜¯è®©çº¿ç¨‹è·å–å¯¹è±¡çš„åŒæ­¥é”ã€‚</span><br><span class="line">åœ¨åé¢è¯¦ç»†ä»‹ç»wait(),notify()ç­‰æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬ä¼šåˆ†æä¸ºä»€ä¹ˆâ€œwait(), notify()ç­‰æ–¹æ³•è¦å®šä¹‰åœ¨Objectç±»ï¼Œè€Œä¸æ˜¯Threadç±»ä¸­â€ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„å®ç°å¤šçº¿ç¨‹çš„2ç§æ–¹å¼ï¼šThread å’Œ Runnableã€‚</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Runnable æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£ä¸­åªåŒ…å«äº†ä¸€ä¸ªrun()æ–¹æ³•ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</span><br><span class="line">public interface Runnable &#123;</span><br><span class="line">    public abstract void run();</span><br><span class="line">&#125;</span><br><span class="line">Runnableçš„ä½œç”¨ï¼Œå®ç°å¤šçº¿ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»Aå®ç°Runnableæ¥å£ï¼›ç„¶åï¼Œé€šè¿‡new Thread(new A())ç­‰æ–¹å¼æ–°å»ºçº¿ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">Thread æ˜¯ä¸€ä¸ªç±»ã€‚Threadæœ¬èº«å°±å®ç°äº†Runnableæ¥å£ã€‚å®ƒçš„å£°æ˜å¦‚ä¸‹ï¼š</span><br><span class="line">public class Thread implements Runnable &#123;&#125;</span><br><span class="line">Threadçš„ä½œç”¨ï¼Œå®ç°å¤šçº¿ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">Thread å’Œ Runnable çš„ç›¸åŒç‚¹ï¼šéƒ½æ˜¯â€œå¤šçº¿ç¨‹çš„å®ç°æ–¹å¼â€ã€‚</span><br><span class="line">Thread å’Œ Runnable çš„ä¸åŒç‚¹ï¼š</span><br><span class="line">Thread æ˜¯ç±»ï¼Œè€ŒRunnableæ˜¯æ¥å£ï¼›Threadæœ¬èº«æ˜¯å®ç°äº†Runnableæ¥å£çš„ç±»ã€‚æˆ‘ä»¬çŸ¥é“â€œä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†æ˜¯å´èƒ½å®ç°å¤šä¸ªæ¥å£â€ï¼Œå› æ­¤Runnableå…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ã€‚</span><br><span class="line">æ­¤å¤–ï¼ŒRunnableè¿˜å¯ä»¥ç”¨äºâ€œèµ„æºçš„å…±äº«â€ã€‚å³ï¼Œå¤šä¸ªçº¿ç¨‹éƒ½æ˜¯åŸºäºæŸä¸€ä¸ªRunnableå¯¹è±¡å»ºç«‹çš„ï¼Œå®ƒä»¬ä¼šå…±äº«Runnableå¯¹è±¡ä¸Šçš„èµ„æºã€‚</span><br><span class="line">é€šå¸¸ï¼Œå»ºè®®é€šè¿‡â€œRunnableâ€å®ç°å¤šçº¿ç¨‹ï¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start() å’Œ run()çš„åŒºåˆ«è¯´æ˜</span><br><span class="line">start() : å®ƒçš„ä½œç”¨æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œæ–°çº¿ç¨‹ä¼šæ‰§è¡Œç›¸åº”çš„run()æ–¹æ³•ã€‚start()ä¸èƒ½è¢«é‡å¤è°ƒç”¨ã€‚</span><br><span class="line">run()   : run()å°±å’Œæ™®é€šçš„æˆå‘˜æ–¹æ³•ä¸€æ ·ï¼Œå¯ä»¥è¢«é‡å¤è°ƒç”¨ã€‚å•ç‹¬è°ƒç”¨run()çš„è¯ï¼Œä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œrun()ï¼Œè€Œå¹¶ä¸ä¼šå¯åŠ¨æ–°çº¿ç¨‹ï¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»</span><br><span class="line">æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£</span><br><span class="line">æ–¹å¼ä¸‰ï¼šå®ç°Callableæ¥å£</span><br><span class="line">æ–¹å¼å››ï¼šä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹å¼</span><br></pre></td></tr></table></figure>

<p>synchronizedä»‹ç»</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">synchronizedåŸç†</span><br><span class="line">åœ¨javaä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŒæ­¥é”ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼ŒåŒæ­¥é”æ˜¯ä¾èµ–äºå¯¹è±¡è€Œå­˜åœ¨ã€‚</span><br><span class="line">å½“æˆ‘ä»¬è°ƒç”¨æŸå¯¹è±¡çš„synchronizedæ–¹æ³•æ—¶ï¼Œå°±è·å–äº†è¯¥å¯¹è±¡çš„åŒæ­¥é”ã€‚ä¾‹å¦‚ï¼Œsynchronized(obj)å°±è·å–äº†â€œobjè¿™ä¸ªå¯¹è±¡â€çš„åŒæ­¥é”ã€‚</span><br><span class="line">ä¸åŒçº¿ç¨‹å¯¹åŒæ­¥é”çš„è®¿é—®æ˜¯äº’æ–¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸæ—¶é—´ç‚¹ï¼Œå¯¹è±¡çš„åŒæ­¥é”åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°ï¼é€šè¿‡åŒæ­¥é”ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œ</span><br><span class="line">å®ç°å¯¹â€œå¯¹è±¡/æ–¹æ³•â€çš„äº’æ–¥è®¿é—®ã€‚ ä¾‹å¦‚ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªçº¿ç¨‹Aå’Œçº¿ç¨‹Bï¼Œå®ƒä»¬éƒ½ä¼šè®¿é—®â€œå¯¹è±¡objçš„åŒæ­¥é”â€ã€‚</span><br><span class="line">å‡è®¾ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œçº¿ç¨‹Aè·å–åˆ°â€œobjçš„åŒæ­¥é”â€å¹¶åœ¨æ‰§è¡Œä¸€äº›æ“ä½œï¼›è€Œæ­¤æ—¶ï¼Œçº¿ç¨‹Bä¹Ÿä¼å›¾è·å–â€œobjçš„åŒæ­¥é”â€ â€”â€” çº¿ç¨‹Bä¼šè·å–å¤±è´¥ï¼Œ</span><br><span class="line">å®ƒå¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°çº¿ç¨‹Aé‡Šæ”¾äº†â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€ä¹‹åçº¿ç¨‹Bæ‰èƒ½è·å–åˆ°â€œobjçš„åŒæ­¥é”â€ä»è€Œæ‰å¯ä»¥è¿è¡Œã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å°†synchronizedçš„åŸºæœ¬è§„åˆ™æ€»ç»“ä¸ºä¸‹é¢3æ¡ï¼Œå¹¶é€šè¿‡å®ä¾‹å¯¹å®ƒä»¬è¿›è¡Œè¯´æ˜ã€‚</span><br><span class="line">ç¬¬ä¸€æ¡: å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®â€œæŸå¯¹è±¡â€çš„â€œsynchronizedæ–¹æ³•â€æˆ–è€…â€œsynchronizedä»£ç å—â€æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯¹â€œè¯¥å¯¹è±¡â€çš„è¯¥â€œsynchronizedæ–¹æ³•â€æˆ–è€…â€œsynchronizedä»£ç å—â€çš„è®¿é—®å°†è¢«é˜»å¡ã€‚</span><br><span class="line">ç¬¬äºŒæ¡: å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®â€œæŸå¯¹è±¡â€çš„â€œsynchronizedæ–¹æ³•â€æˆ–è€…â€œsynchronizedä»£ç å—â€æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶å¯ä»¥è®¿é—®â€œè¯¥å¯¹è±¡â€çš„éåŒæ­¥ä»£ç å—ã€‚</span><br><span class="line">ç¬¬ä¸‰æ¡: å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®â€œæŸå¯¹è±¡â€çš„â€œsynchronizedæ–¹æ³•â€æˆ–è€…â€œsynchronizedä»£ç å—â€æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯¹â€œè¯¥å¯¹è±¡â€çš„å…¶ä»–çš„â€œsynchronizedæ–¹æ³•â€æˆ–è€…â€œsynchronizedä»£ç å—â€çš„è®¿é—®å°†è¢«é˜»å¡ã€‚</span><br><span class="line"></span><br><span class="line">å®ä¾‹é” -- é”åœ¨æŸä¸€ä¸ªå®ä¾‹å¯¹è±¡ä¸Šã€‚å¦‚æœè¯¥ç±»æ˜¯å•ä¾‹ï¼Œé‚£ä¹ˆè¯¥é”ä¹Ÿå…·æœ‰å…¨å±€é”çš„æ¦‚å¿µã€‚</span><br><span class="line">               å®ä¾‹é”å¯¹åº”çš„å°±æ˜¯synchronizedå…³é”®å­—ã€‚</span><br><span class="line">å…¨å±€é” -- è¯¥é”é’ˆå¯¹çš„æ˜¯ç±»ï¼Œæ— è®ºå®ä¾‹å¤šå°‘ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆçº¿ç¨‹éƒ½å…±äº«è¯¥é”ã€‚</span><br><span class="line">               å…¨å±€é”å¯¹åº”çš„å°±æ˜¯static synchronizedï¼ˆæˆ–è€…æ˜¯é”åœ¨è¯¥ç±»çš„classæˆ–è€…classloaderå¯¹è±¡ä¸Šï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">å…³äºâ€œå®ä¾‹é”â€å’Œâ€œå…¨å±€é”â€æœ‰ä¸€ä¸ªå¾ˆå½¢è±¡çš„ä¾‹å­ï¼š </span><br><span class="line">pulbic class Something &#123;</span><br><span class="line">    public synchronized void isSyncA()&#123;&#125;</span><br><span class="line">    public synchronized void isSyncB()&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    public static synchronized void cSyncA()&#123;&#125;</span><br><span class="line">    public static synchronized void cSyncB()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">å‡è®¾ï¼ŒSomethingæœ‰ä¸¤ä¸ªå®ä¾‹xå’Œyã€‚åˆ†æä¸‹é¢4ç»„è¡¨è¾¾å¼è·å–çš„é”çš„æƒ…å†µã€‚</span><br><span class="line">(01) x.isSyncA()ä¸x.isSyncB() </span><br><span class="line">(01) ä¸èƒ½è¢«åŒæ—¶è®¿é—®ã€‚å› ä¸ºisSyncA()å’ŒisSyncB()éƒ½æ˜¯è®¿é—®åŒä¸€ä¸ªå¯¹è±¡(å¯¹è±¡x)çš„åŒæ­¥é”ï¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(02) x.isSyncA()ä¸y.isSyncA()</span><br><span class="line">(02) å¯ä»¥åŒæ—¶è¢«è®¿é—®ã€‚å› ä¸ºè®¿é—®çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥é”ï¼Œx.isSyncA()è®¿é—®çš„æ˜¯xçš„åŒæ­¥é”ï¼Œè€Œy.isSyncA()è®¿é—®çš„æ˜¯yçš„åŒæ­¥é”ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(03) x.cSyncA()ä¸y.cSyncB()</span><br><span class="line">(03) ä¸èƒ½è¢«åŒæ—¶è®¿é—®ã€‚å› ä¸ºcSyncA()å’ŒcSyncB()éƒ½æ˜¯staticç±»å‹ï¼Œ</span><br><span class="line">x.cSyncA()ç›¸å½“äºSomething.isSyncA()ï¼Œy.cSyncB()ç›¸å½“äºSomething.isSyncB()ï¼Œå› æ­¤å®ƒä»¬å…±ç”¨ä¸€ä¸ªåŒæ­¥é”ï¼Œä¸èƒ½è¢«åŒæ—¶åé—®ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(04) x.isSyncA()ä¸Something.cSyncA()</span><br><span class="line">å¯ä»¥è¢«åŒæ—¶è®¿é—®ã€‚å› ä¸ºisSyncA()æ˜¯å®ä¾‹æ–¹æ³•ï¼Œx.isSyncA()ä½¿ç”¨çš„æ˜¯å¯¹è±¡xçš„é”ï¼›</span><br><span class="line">è€ŒcSyncA()æ˜¯é™æ€æ–¹æ³•ï¼ŒSomething.cSyncA()å¯ä»¥ç†è§£å¯¹ä½¿ç”¨çš„æ˜¯â€œç±»çš„é”â€ã€‚å› æ­¤ï¼Œå®ƒä»¬æ˜¯å¯ä»¥è¢«åŒæ—¶è®¿é—®çš„ã€‚</span><br></pre></td></tr></table></figure>

<p>wait(), notify(), notifyAll()ç­‰æ–¹æ³•ä»‹ç»</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">åœ¨Object.javaä¸­ï¼Œå®šä¹‰äº†wait(), notify()å’ŒnotifyAll()ç­‰æ¥å£ã€‚wait()çš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒåŒæ—¶ï¼Œwait()ä¹Ÿä¼šè®©å½“å‰çº¿ç¨‹é‡Šæ”¾å®ƒæ‰€æŒæœ‰çš„é”ã€‚è€Œnotify()å’ŒnotifyAll()çš„ä½œç”¨ï¼Œåˆ™æ˜¯å”¤é†’å½“å‰å¯¹è±¡ä¸Šçš„ç­‰å¾…çº¿ç¨‹ï¼›notify()æ˜¯å”¤é†’å•ä¸ªçº¿ç¨‹ï¼Œè€ŒnotifyAll()æ˜¯å”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">Objectç±»ä¸­å…³äºç­‰å¾…/å”¤é†’çš„APIè¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ï¼š</span><br><span class="line">notify()        -- å”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ã€‚</span><br><span class="line">notifyAll()   -- å”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚</span><br><span class="line">wait()                                         -- è®©å½“å‰çº¿ç¨‹å¤„äºâ€œç­‰å¾…(é˜»å¡)çŠ¶æ€â€ï¼Œâ€œç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ notify() æ–¹æ³•æˆ– notifyAll() æ–¹æ³•â€ï¼Œå½“å‰çº¿ç¨‹è¢«å”¤é†’(è¿›å…¥â€œå°±ç»ªçŠ¶æ€â€)ã€‚</span><br><span class="line">wait(long timeout)                    -- è®©å½“å‰çº¿ç¨‹å¤„äºâ€œç­‰å¾…(é˜»å¡)çŠ¶æ€â€ï¼Œâ€œç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ notify() æ–¹æ³•æˆ– notifyAll() æ–¹æ³•ï¼Œæˆ–è€…è¶…è¿‡æŒ‡å®šçš„æ—¶é—´é‡â€ï¼Œå½“å‰çº¿ç¨‹è¢«å”¤é†’(è¿›å…¥â€œå°±ç»ªçŠ¶æ€â€)ã€‚</span><br><span class="line">wait(long timeout, int nanos)  -- è®©å½“å‰çº¿ç¨‹å¤„äºâ€œç­‰å¾…(é˜»å¡)çŠ¶æ€â€ï¼Œâ€œç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ notify() æ–¹æ³•æˆ– notifyAll() æ–¹æ³•ï¼Œæˆ–è€…å…¶ä»–æŸä¸ªçº¿ç¨‹ä¸­æ–­å½“å‰çº¿ç¨‹ï¼Œæˆ–è€…å·²è¶…è¿‡æŸä¸ªå®é™…æ—¶é—´é‡â€ï¼Œå½“å‰çº¿ç¨‹è¢«å”¤é†’(è¿›å…¥â€œå°±ç»ªçŠ¶æ€â€)ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºä»€ä¹ˆnotify(), wait()ç­‰å‡½æ•°å®šä¹‰åœ¨Objectä¸­ï¼Œè€Œä¸æ˜¯Threadä¸­</span><br><span class="line">Objectä¸­çš„wait(), notify()ç­‰å‡½æ•°ï¼Œå’Œsynchronizedä¸€æ ·ï¼Œä¼šå¯¹â€œå¯¹è±¡çš„åŒæ­¥é”â€è¿›è¡Œæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">wait()ä¼šä½¿â€œå½“å‰çº¿ç¨‹â€ç­‰å¾…ï¼Œå› ä¸ºçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œæ‰€ä»¥çº¿ç¨‹åº”è¯¥é‡Šæ”¾å®ƒé”æŒæœ‰çš„â€œåŒæ­¥é”â€ï¼Œå¦åˆ™å…¶å®ƒçº¿ç¨‹è·å–ä¸åˆ°è¯¥â€œåŒæ­¥é”â€è€Œæ— æ³•è¿è¡Œï¼</span><br><span class="line">OKï¼Œçº¿ç¨‹è°ƒç”¨wait()ä¹‹åï¼Œä¼šé‡Šæ”¾å®ƒé”æŒæœ‰çš„â€œåŒæ­¥é”â€ï¼›è€Œä¸”ï¼Œæ ¹æ®å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ï¼šç­‰å¾…çº¿ç¨‹å¯ä»¥è¢«notify()æˆ–notifyAll()å”¤é†’ã€‚ç°åœ¨ï¼Œè¯·æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šnotify()æ˜¯ä¾æ®ä»€ä¹ˆå”¤é†’ç­‰å¾…çº¿ç¨‹çš„ï¼Ÿæˆ–è€…è¯´ï¼Œwait()ç­‰å¾…çº¿ç¨‹å’Œnotify()ä¹‹é—´æ˜¯é€šè¿‡ä»€ä¹ˆå…³è”èµ·æ¥çš„ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾æ®â€œå¯¹è±¡çš„åŒæ­¥é”â€ã€‚</span><br><span class="line"></span><br><span class="line">è´Ÿè´£å”¤é†’ç­‰å¾…çº¿ç¨‹çš„é‚£ä¸ªçº¿ç¨‹(æˆ‘ä»¬ç§°ä¸ºâ€œå”¤é†’çº¿ç¨‹â€)ï¼Œå®ƒåªæœ‰åœ¨è·å–â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€(è¿™é‡Œçš„åŒæ­¥é”å¿…é¡»å’Œç­‰å¾…çº¿ç¨‹çš„åŒæ­¥é”æ˜¯åŒä¸€ä¸ª)ï¼Œå¹¶ä¸”è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•ä¹‹åï¼Œæ‰èƒ½å”¤é†’ç­‰å¾…çº¿ç¨‹ã€‚è™½ç„¶ï¼Œç­‰å¾…çº¿ç¨‹è¢«å”¤é†’ï¼›ä½†æ˜¯ï¼Œå®ƒä¸èƒ½ç«‹åˆ»æ‰§è¡Œï¼Œå› ä¸ºå”¤é†’çº¿ç¨‹è¿˜æŒæœ‰â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€ã€‚å¿…é¡»ç­‰åˆ°å”¤é†’çº¿ç¨‹é‡Šæ”¾äº†â€œå¯¹è±¡çš„åŒæ­¥é”â€ä¹‹åï¼Œç­‰å¾…çº¿ç¨‹æ‰èƒ½è·å–åˆ°â€œå¯¹è±¡çš„åŒæ­¥é”â€è¿›è€Œç»§ç»­è¿è¡Œã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä¹‹ï¼Œnotify(), wait()ä¾èµ–äºâ€œåŒæ­¥é”â€ï¼Œè€Œâ€œåŒæ­¥é”â€æ˜¯å¯¹è±¡é”æŒæœ‰ï¼Œå¹¶ä¸”æ¯ä¸ªå¯¹è±¡æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆnotify(), wait()ç­‰å‡½æ•°å®šä¹‰åœ¨Objectç±»ï¼Œè€Œä¸æ˜¯Threadç±»ä¸­çš„åŸå› ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>çº¿ç¨‹è®©æ­¥ yield</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yield()çš„ä½œç”¨æ˜¯è®©æ­¥ã€‚å®ƒèƒ½è®©å½“å‰çº¿ç¨‹ç”±â€œè¿è¡ŒçŠ¶æ€â€è¿›å…¥åˆ°â€œå°±ç»ªçŠ¶æ€â€ï¼Œä»è€Œè®©å…¶å®ƒå…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„ç­‰å¾…çº¿ç¨‹è·å–æ‰§è¡Œæƒï¼›</span><br><span class="line">ä½†æ˜¯ï¼Œå¹¶ä¸èƒ½ä¿è¯åœ¨å½“å‰çº¿ç¨‹è°ƒç”¨yield()ä¹‹åï¼Œå…¶å®ƒå…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹å°±ä¸€å®šèƒ½è·å¾—æ‰§è¡Œæƒï¼›ä¹Ÿæœ‰å¯èƒ½æ˜¯å½“å‰çº¿ç¨‹åˆè¿›å…¥åˆ°â€œè¿è¡ŒçŠ¶æ€â€ç»§ç»­è¿è¡Œï¼</span><br><span class="line">wait()æ˜¯ä¼šçº¿ç¨‹é‡Šæ”¾å®ƒæ‰€æŒæœ‰å¯¹è±¡çš„åŒæ­¥é”ï¼Œè€Œyield()æ–¹æ³•ä¸ä¼šé‡Šæ”¾é”ã€‚</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹ä¼‘çœ </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sleep() å®šä¹‰åœ¨Thread.javaä¸­ã€‚</span><br><span class="line">sleep() çš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œå³å½“å‰çº¿ç¨‹ä¼šä»â€œè¿è¡ŒçŠ¶æ€â€è¿›å…¥åˆ°â€œä¼‘çœ (é˜»å¡)çŠ¶æ€â€ã€‚</span><br><span class="line">sleep()ä¼šæŒ‡å®šä¼‘çœ æ—¶é—´ï¼Œçº¿ç¨‹ä¼‘çœ çš„æ—¶é—´ä¼šå¤§äº/ç­‰äºè¯¥ä¼‘çœ æ—¶é—´ï¼›åœ¨çº¿ç¨‹é‡æ–°è¢«å”¤é†’æ—¶ï¼Œå®ƒä¼šç”±â€œé˜»å¡çŠ¶æ€â€å˜æˆâ€œå°±ç»ªçŠ¶æ€â€ï¼Œä»è€Œç­‰å¾…cpuçš„è°ƒåº¦æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬çŸ¥é“ï¼Œwait()çš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹ç”±â€œè¿è¡ŒçŠ¶æ€â€è¿›å…¥â€œç­‰å¾…(é˜»å¡)çŠ¶æ€â€çš„åŒæ—¶ï¼Œä¹Ÿä¼šé‡Šæ”¾åŒæ­¥é”ã€‚è€Œsleep()çš„ä½œç”¨æ˜¯ä¹Ÿæ˜¯è®©å½“å‰çº¿ç¨‹ç”±â€œè¿è¡ŒçŠ¶æ€â€è¿›å…¥åˆ°â€œä¼‘çœ (é˜»å¡)çŠ¶æ€â€ã€‚</span><br><span class="line">ä½†æ˜¯ï¼Œwait()ä¼šé‡Šæ”¾å¯¹è±¡çš„åŒæ­¥é”ï¼Œè€Œsleep()åˆ™ä¸ä¼šé‡Šæ”¾é”ã€‚</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹join</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">join() çš„ä½œç”¨ï¼šè®©â€œä¸»çº¿ç¨‹â€ç­‰å¾…â€œå­çº¿ç¨‹â€ç»“æŸä¹‹åæ‰èƒ½ç»§ç»­è¿è¡Œã€‚ </span><br><span class="line">å®ƒå¯ä»¥ä½¿å¾—çº¿ç¨‹ä¹‹é—´çš„å¹¶è¡Œæ‰§è¡Œå˜ä¸ºä¸²è¡Œæ‰§è¡Œ,joinæ–¹æ³•å¿…é¡»åœ¨çº¿ç¨‹startæ–¹æ³•è°ƒç”¨ä¹‹åè°ƒç”¨æ‰æœ‰æ„ä¹‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>çº¿ç¨‹ interrupt()å’Œçº¿ç¨‹ç»ˆæ­¢æ–¹å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interrupt()çš„ä½œç”¨æ˜¯ä¸­æ–­æœ¬çº¿ç¨‹ã€‚</span><br><span class="line">æœ¬çº¿ç¨‹ä¸­æ–­è‡ªå·±æ˜¯è¢«å…è®¸çš„ï¼›å…¶å®ƒçº¿ç¨‹è°ƒç”¨æœ¬çº¿ç¨‹çš„interrupt()æ–¹æ³•æ—¶ï¼Œä¼šé€šè¿‡checkAccess()æ£€æŸ¥æƒé™ã€‚è¿™æœ‰å¯èƒ½æŠ›å‡ºSecurityExceptionå¼‚å¸¸ã€‚</span><br><span class="line">å¦‚æœæœ¬çº¿ç¨‹æ˜¯å¤„äºé˜»å¡çŠ¶æ€ï¼šè°ƒç”¨çº¿ç¨‹çš„wait(), wait(long)æˆ–wait(long, int)ä¼šè®©å®ƒè¿›å…¥ç­‰å¾…(é˜»å¡)çŠ¶æ€ï¼Œæˆ–è€…è°ƒç”¨çº¿ç¨‹çš„join(), join(long), join(long, int), sleep(long), sleep(long, int)ä¹Ÿä¼šè®©å®ƒè¿›å…¥é˜»å¡çŠ¶æ€ã€‚è‹¥çº¿ç¨‹åœ¨é˜»å¡çŠ¶æ€æ—¶ï¼Œè°ƒç”¨äº†å®ƒçš„interrupt()æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒçš„â€œä¸­æ–­çŠ¶æ€â€ä¼šè¢«æ¸…é™¤å¹¶ä¸”ä¼šæ”¶åˆ°ä¸€ä¸ªInterruptedExceptionå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹é€šè¿‡wait()è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œæ­¤æ—¶é€šè¿‡interrupt()ä¸­æ–­è¯¥çº¿ç¨‹ï¼›è°ƒç”¨interrupt()ä¼šç«‹å³å°†çº¿ç¨‹çš„ä¸­æ–­æ ‡è®°è®¾ä¸ºâ€œtrueâ€ï¼Œä½†æ˜¯ç”±äºçº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ‰€ä»¥è¯¥â€œä¸­æ–­æ ‡è®°â€ä¼šç«‹å³è¢«æ¸…é™¤ä¸ºâ€œfalseâ€ï¼ŒåŒæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªInterruptedExceptionçš„å¼‚å¸¸ã€‚</span><br><span class="line">å¦‚æœçº¿ç¨‹è¢«é˜»å¡åœ¨ä¸€ä¸ªSelectoré€‰æ‹©å™¨ä¸­ï¼Œé‚£ä¹ˆé€šè¿‡interrupt()ä¸­æ–­å®ƒæ—¶ï¼›çº¿ç¨‹çš„ä¸­æ–­æ ‡è®°ä¼šè¢«è®¾ç½®ä¸ºtrueï¼Œå¹¶ä¸”å®ƒä¼šç«‹å³ä»é€‰æ‹©æ“ä½œä¸­è¿”å›ã€‚</span><br><span class="line">å¦‚æœä¸å±äºå‰é¢æ‰€è¯´çš„æƒ…å†µï¼Œé‚£ä¹ˆé€šè¿‡interrupt()ä¸­æ–­çº¿ç¨‹æ—¶ï¼Œå®ƒçš„ä¸­æ–­æ ‡è®°ä¼šè¢«è®¾ç½®ä¸ºâ€œtrueâ€ã€‚</span><br><span class="line">ä¸­æ–­ä¸€ä¸ªâ€œå·²ç»ˆæ­¢çš„çº¿ç¨‹â€ä¸ä¼šäº§ç”Ÿä»»ä½•æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">interrupted() å’Œ isInterrupted()éƒ½èƒ½å¤Ÿç”¨äºæ£€æµ‹å¯¹è±¡çš„â€œä¸­æ–­æ ‡è®°â€ã€‚</span><br><span class="line">åŒºåˆ«æ˜¯ï¼Œinterrupted()é™¤äº†è¿”å›ä¸­æ–­æ ‡è®°ä¹‹å¤–ï¼Œå®ƒè¿˜ä¼šæ¸…é™¤ä¸­æ–­æ ‡è®°(å³å°†ä¸­æ–­æ ‡è®°è®¾ä¸ºfalse)ï¼›è€ŒisInterrupted()ä»…ä»…è¿”å›ä¸­æ–­æ ‡è®°ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>çº¿ç¨‹ä¼˜å…ˆçº§</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯1ï½10ï¼Œé»˜è®¤çš„ä¼˜å…ˆçº§æ˜¯5ã€‚â€œé«˜ä¼˜å…ˆçº§çº¿ç¨‹â€ä¼šä¼˜å…ˆäºâ€œä½ä¼˜å…ˆçº§çº¿ç¨‹â€æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">java ä¸­æœ‰ä¸¤ç§çº¿ç¨‹ï¼šç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹ã€‚å¯ä»¥é€šè¿‡isDaemon()æ–¹æ³•æ¥åŒºåˆ«å®ƒä»¬ï¼šå¦‚æœè¿”å›falseï¼Œåˆ™è¯´æ˜è¯¥çº¿ç¨‹æ˜¯â€œç”¨æˆ·çº¿ç¨‹â€ï¼›å¦åˆ™å°±æ˜¯â€œå®ˆæŠ¤çº¿ç¨‹â€ã€‚</span><br><span class="line">ç”¨æˆ·çº¿ç¨‹ä¸€èˆ¬ç”¨æˆ·æ‰§è¡Œç”¨æˆ·çº§ä»»åŠ¡ï¼Œè€Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿå°±æ˜¯â€œåå°çº¿ç¨‹â€ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡Œåå°ä»»åŠ¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šJavaè™šæ‹Ÿæœºåœ¨â€œç”¨æˆ·çº¿ç¨‹â€éƒ½ç»“æŸåä¼šåé€€å‡ºã€‚</span><br><span class="line"></span><br><span class="line">æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ã€‚â€œé«˜ä¼˜å…ˆçº§çº¿ç¨‹â€ä¼šä¼˜å…ˆäºâ€œä½ä¼˜å…ˆçº§çº¿ç¨‹â€æ‰§è¡Œã€‚æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥è¢«æ ‡è®°ä¸ºä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹æˆ–éå®ˆæŠ¤è¿›ç¨‹ã€‚åœ¨ä¸€äº›è¿è¡Œçš„ä¸»çº¿ç¨‹ä¸­åˆ›å»ºæ–°çš„å­çº¿ç¨‹æ—¶ï¼Œå­çº¿ç¨‹çš„ä¼˜å…ˆçº§è¢«è®¾ç½®ä¸ºç­‰äºâ€œåˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹çš„ä¼˜å…ˆçº§â€ï¼Œå½“ä¸”ä»…å½“â€œåˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹â€æ—¶â€œå­çº¿ç¨‹æ‰ä¼šæ˜¯å®ˆæŠ¤çº¿ç¨‹â€ã€‚</span><br><span class="line"></span><br><span class="line">å½“Javaè™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªå•ä¸€çš„éå®ˆæŠ¤çº¿ç¨‹ï¼ˆè¯¥çº¿ç¨‹é€šè¿‡æ˜¯é€šè¿‡main()æ–¹æ³•å¯åŠ¨ï¼‰ã€‚JVMä¼šä¸€ç›´è¿è¡Œç›´åˆ°ä¸‹é¢çš„ä»»æ„ä¸€ä¸ªæ¡ä»¶å‘ç”Ÿï¼ŒJVMå°±ä¼šç»ˆæ­¢è¿è¡Œï¼š</span><br><span class="line">(01) è°ƒç”¨äº†exit()æ–¹æ³•ï¼Œå¹¶ä¸”exit()æœ‰æƒé™è¢«æ­£å¸¸æ‰§è¡Œã€‚</span><br><span class="line">(02) æ‰€æœ‰çš„â€œéå®ˆæŠ¤çº¿ç¨‹â€éƒ½æ­»äº†(å³JVMä¸­ä»…ä»…åªæœ‰â€œå®ˆæŠ¤çº¿ç¨‹â€)ã€‚</span><br><span class="line"></span><br><span class="line">æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½è¢«æ ‡è®°ä¸ºâ€œå®ˆæŠ¤çº¿ç¨‹â€æˆ–â€œç”¨æˆ·çº¿ç¨‹â€ã€‚å½“åªæœ‰å®ˆæŠ¤çº¿ç¨‹è¿è¡Œæ—¶ï¼ŒJVMä¼šè‡ªåŠ¨é€€å‡ºã€‚</span><br></pre></td></tr></table></figure>


<p>å¤šçº¿ç¨‹,çº¿ç¨‹åŒæ­¥ï¼Œå¹¶å‘æ“ä½œæ€ä¹ˆæ§åˆ¶ </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1)ç°åœ¨æœ‰T1ã€T2ã€T3ä¸‰ä¸ªçº¿ç¨‹ï¼Œä½ æ€æ ·ä¿è¯T2åœ¨T1æ‰§è¡Œå®Œåæ‰§è¡Œï¼ŒT3åœ¨T2æ‰§è¡Œå®Œåæ‰§è¡Œï¼Ÿ</span><br><span class="line">è¿™ä¸ªçº¿ç¨‹é—®é¢˜é€šå¸¸ä¼šåœ¨ç¬¬ä¸€è½®æˆ–ç”µè¯é¢è¯•é˜¶æ®µè¢«é—®åˆ°ï¼Œç›®çš„æ˜¯æ£€æµ‹ä½ å¯¹â€joinâ€æ–¹æ³•æ˜¯å¦ç†Ÿæ‚‰ã€‚è¿™ä¸ªå¤šçº¿ç¨‹é—®é¢˜æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç”¨joinæ–¹æ³•å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">Javaä¸­å¯åœ¨æ–¹æ³•åå‰åŠ å…³é”®å­—syschronizedæ¥å¤„ç†å½“æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºæ—¶å€™çš„é—®é¢˜ã€‚syschronizedç›¸å½“äºä¸€æŠŠé”ï¼Œå½“æœ‰ç”³è¯·è€…ç”³è¯·è¯¥</span><br><span class="line">èµ„æºæ—¶ï¼Œå¦‚æœè¯¥èµ„æºæ²¡æœ‰è¢«å ç”¨ï¼Œé‚£ä¹ˆå°†èµ„æºäº¤ä»˜ç»™è¿™ä¸ªç”³è¯·è€…ä½¿ç”¨ï¼Œåœ¨æ­¤æœŸé—´ï¼Œå…¶ä»–ç”³è¯·è€…åªèƒ½ç”³è¯·è€Œä¸èƒ½ä½¿ç”¨è¯¥èµ„æºï¼Œå½“è¯¥èµ„æºè¢«ä½¿ç”¨å®Œæˆåå°†é‡Šæ”¾è¯¥èµ„æºä¸Šçš„é”ï¼Œå…¶ä»–ç”³è¯·è€…å¯ç”³è¯·ä½¿ç”¨ã€‚</span><br><span class="line">å¹¶å‘æ§åˆ¶ä¸»è¦æ˜¯ä¸ºäº†å¤šçº¿ç¨‹æ“ä½œæ—¶å¸¦æ¥çš„èµ„æºè¯»å†™é—®é¢˜ã€‚å¦‚æœä¸åŠ ä»¥æ§åˆ¶å¯èƒ½ä¼šå‡ºç°æ­»é”ï¼Œè¯»è„æ•°æ®ã€ä¸å¯é‡å¤è¯»ã€ä¸¢å¤±æ›´æ–°ç­‰å¼‚å¸¸ã€‚</span><br><span class="line">å¹¶å‘æ“ä½œå¯ä»¥é€šè¿‡åŠ é”çš„æ–¹å¼è¿›è¡Œæ§åˆ¶ï¼Œé”åˆå¯åˆ†ä¸ºä¹è§‚é”å’Œæ‚²è§‚é”ã€‚</span><br><span class="line"></span><br><span class="line">æ‚²è§‚é”ï¼š</span><br><span class="line">æ‚²è§‚é”å¹¶å‘æ¨¡å¼å‡å®šç³»ç»Ÿä¸­å­˜åœ¨è¶³å¤Ÿå¤šçš„æ•°æ®ä¿®æ”¹æ“ä½œï¼Œä»¥è‡´äºä»»ä½•ç¡®å®šçš„è¯»æ“ä½œéƒ½å¯èƒ½ä¼šå—åˆ°ç”±ä¸ªåˆ«çš„ç”¨æˆ·æ‰€åˆ¶é€ çš„æ•°æ®ä¿®æ”¹çš„å½±å“ã€‚</span><br><span class="line">ä¹Ÿå°±æ˜¯è¯´æ‚²è§‚é”å‡å®šå†²çªæ€»ä¼šå‘ç”Ÿï¼Œé€šè¿‡ç‹¬å æ­£åœ¨è¢«è¯»å–çš„æ•°æ®æ¥é¿å…å†²çªã€‚ä½†æ˜¯ç‹¬å æ•°æ®ä¼šå¯¼è‡´å…¶ä»–è¿›ç¨‹æ— æ³•ä¿®æ”¹è¯¥æ•°æ®ï¼Œè¿›è€Œäº§ç”Ÿé˜»å¡ï¼Œè¯»æ•°æ®å’Œå†™æ•°æ®ä¼šç›¸äº’é˜»å¡ã€‚</span><br><span class="line"></span><br><span class="line">ä¹è§‚é”ï¼š</span><br><span class="line">ä¹è§‚é”å‡å®šç³»ç»Ÿçš„æ•°æ®ä¿®æ”¹åªä¼šäº§ç”Ÿéå¸¸å°‘çš„å†²çªï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•è¿›ç¨‹éƒ½ä¸å¤§å¯èƒ½ä¿®æ”¹åˆ«çš„è¿›ç¨‹æ­£åœ¨è®¿é—®çš„æ•°æ®ã€‚</span><br><span class="line">ä¹è§‚å¹¶å‘æ¨¡å¼ä¸‹ï¼Œè¯»æ•°æ®å’Œå†™æ•°æ®ä¹‹é—´ä¸ä¼šå‘ç”Ÿå†²çªï¼Œåªæœ‰å†™æ•°æ®ä¸å†™æ•°æ®ä¹‹é—´ä¼šå‘ç”Ÿå†²çªã€‚å³è¯»æ•°æ®ä¸ä¼šäº§ç”Ÿé˜»å¡ï¼Œåªæœ‰å†™æ•°æ®æ‰ä¼šäº§ç”Ÿé˜»å¡</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>java çº¿ç¨‹æ± </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;interface&gt;Executor </span><br><span class="line">        ^</span><br><span class="line">        |</span><br><span class="line">&lt;interface&gt;ExecutorService    </span><br><span class="line">        ^</span><br><span class="line">        |</span><br><span class="line">AbstractExecutorService</span><br><span class="line">        ^</span><br><span class="line">        |</span><br><span class="line">ThreadPoolExecutor        </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. Executor</span><br><span class="line"></span><br><span class="line">å®ƒæ˜¯&quot;æ‰§è¡Œè€…&quot;æ¥å£ï¼Œå®ƒæ˜¯æ¥æ‰§è¡Œä»»åŠ¡çš„ã€‚å‡†ç¡®çš„è¯´ï¼ŒExecutoræä¾›äº†execute()æ¥å£æ¥æ‰§è¡Œå·²æäº¤çš„ Runnable ä»»åŠ¡çš„å¯¹è±¡ã€‚Executorå­˜åœ¨çš„ç›®çš„æ˜¯æä¾›ä¸€ç§å°†&quot;ä»»åŠ¡æäº¤&quot;ä¸&quot;ä»»åŠ¡å¦‚ä½•è¿è¡Œ&quot;åˆ†ç¦»å¼€æ¥çš„æœºåˆ¶ã€‚</span><br><span class="line">å®ƒåªåŒ…å«ä¸€ä¸ªå‡½æ•°æ¥å£ï¼š</span><br><span class="line"></span><br><span class="line">2. ExecutorService</span><br><span class="line"></span><br><span class="line">ExecutorServiceç»§æ‰¿äºExecutorã€‚å®ƒæ˜¯&quot;æ‰§è¡Œè€…æœåŠ¡&quot;æ¥å£ï¼Œå®ƒæ˜¯ä¸º&quot;æ‰§è¡Œè€…æ¥å£Executor&quot;æœåŠ¡è€Œå­˜åœ¨çš„ï¼›å‡†ç¡®çš„è¯ï¼ŒExecutorServiceæä¾›äº†&quot;å°†ä»»åŠ¡æäº¤ç»™æ‰§è¡Œè€…çš„æ¥å£(submitæ–¹æ³•)&quot;ï¼Œ&quot;è®©æ‰§è¡Œè€…æ‰§è¡Œä»»åŠ¡(invokeAll, invokeAnyæ–¹æ³•)&quot;çš„æ¥å£ç­‰ç­‰ã€‚</span><br><span class="line"></span><br><span class="line">3. AbstractExecutorService</span><br><span class="line"></span><br><span class="line">AbstractExecutorServiceæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå®ç°äº†ExecutorServiceæ¥å£ã€‚</span><br><span class="line">AbstractExecutorServiceå­˜åœ¨çš„ç›®çš„æ˜¯ä¸ºExecutorServiceä¸­çš„å‡½æ•°æ¥å£æä¾›äº†é»˜è®¤å®ç°ã€‚ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4. ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line">ThreadPoolExecutorå°±æ˜¯å¤§åé¼é¼çš„&quot;çº¿ç¨‹æ± &quot;ã€‚å®ƒç»§æ‰¿äºAbstractExecutorServiceæŠ½è±¡ç±»</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5. ScheduledExecutorService</span><br><span class="line"></span><br><span class="line">ScheduledExecutorServiceæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒç»§æ‰¿äºäºExecutorServiceã€‚å®ƒç›¸å½“äºæä¾›äº†&quot;å»¶æ—¶&quot;å’Œ&quot;å‘¨æœŸæ‰§è¡Œ&quot;åŠŸèƒ½çš„ExecutorServiceã€‚</span><br><span class="line">ScheduledExecutorServiceæä¾›äº†ç›¸åº”çš„å‡½æ•°æ¥å£ï¼Œå¯ä»¥å®‰æ’ä»»åŠ¡åœ¨ç»™å®šçš„å»¶è¿Ÿåæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥è®©ä»»åŠ¡å‘¨æœŸçš„æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6. ScheduledThreadPoolExecutor</span><br><span class="line"></span><br><span class="line">ScheduledThreadPoolExecutorç»§æ‰¿äºThreadPoolExecutorï¼Œå¹¶ä¸”å®ç°äº†ScheduledExecutorServiceæ¥å£ã€‚å®ƒç›¸å½“äºæä¾›äº†&quot;å»¶æ—¶&quot;å’Œ&quot;å‘¨æœŸæ‰§è¡Œ&quot;åŠŸèƒ½çš„ScheduledExecutorServiceã€‚</span><br><span class="line">ScheduledThreadPoolExecutorç±»ä¼¼äºTimerï¼Œä½†æ˜¯åœ¨é«˜å¹¶å‘ç¨‹åºä¸­ï¼ŒScheduledThreadPoolExecutorçš„æ€§èƒ½è¦ä¼˜äºTimerã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">7. Executors</span><br><span class="line"></span><br><span class="line">Executorsæ˜¯ä¸ªé™æ€å·¥å‚ç±»ã€‚å®ƒé€šè¿‡é™æ€å·¥å‚æ–¹æ³•è¿”å›ExecutorServiceã€ScheduledExecutorServiceã€ThreadFactory å’Œ Callable ç­‰ç±»çš„å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">// è¿”å› Callable å¯¹è±¡ï¼Œè°ƒç”¨å®ƒæ—¶å¯è¿è¡Œç»™å®šç‰¹æƒçš„æ“ä½œå¹¶è¿”å›å…¶ç»“æœã€‚</span><br><span class="line">static Callable&lt;Object&gt; callable(PrivilegedAction&lt;?&gt; action)</span><br><span class="line"></span><br><span class="line">// è¿”å› Callable å¯¹è±¡ï¼Œè°ƒç”¨å®ƒæ—¶å¯è¿è¡Œç»™å®šç‰¹æƒçš„å¼‚å¸¸æ“ä½œå¹¶è¿”å›å…¶ç»“æœã€‚</span><br><span class="line">static Callable&lt;Object&gt; callable(PrivilegedExceptionAction&lt;?&gt; action)</span><br><span class="line"></span><br><span class="line">// è¿”å› Callable å¯¹è±¡ï¼Œè°ƒç”¨å®ƒæ—¶å¯è¿è¡Œç»™å®šçš„ä»»åŠ¡å¹¶è¿”å› nullã€‚</span><br><span class="line">static Callable&lt;Object&gt; callable(Runnable task)</span><br><span class="line"></span><br><span class="line">// è¿”å› Callable å¯¹è±¡ï¼Œè°ƒç”¨å®ƒæ—¶å¯è¿è¡Œç»™å®šçš„ä»»åŠ¡å¹¶è¿”å›ç»™å®šçš„ç»“æœã€‚</span><br><span class="line">static &lt;T&gt; Callable&lt;T&gt; callable(Runnable task, T result)</span><br><span class="line"></span><br><span class="line">// è¿”å›ç”¨äºåˆ›å»ºæ–°çº¿ç¨‹çš„é»˜è®¤çº¿ç¨‹å·¥å‚ã€‚</span><br><span class="line">static ThreadFactory defaultThreadFactory()</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªå¯æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œä½†æ˜¯åœ¨ä»¥å‰æ„é€ çš„çº¿ç¨‹å¯ç”¨æ—¶å°†é‡ç”¨å®ƒä»¬ã€‚</span><br><span class="line">static ExecutorService newCachedThreadPool()</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªå¯æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œä½†æ˜¯åœ¨ä»¥å‰æ„é€ çš„çº¿ç¨‹å¯ç”¨æ—¶å°†é‡ç”¨å®ƒä»¬ï¼Œå¹¶åœ¨éœ€è¦æ—¶ä½¿ç”¨æä¾›çš„ ThreadFactory åˆ›å»ºæ–°çº¿ç¨‹ã€‚</span><br><span class="line">static ExecutorService newCachedThreadPool(ThreadFactory threadFactory)</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œä»¥å…±äº«çš„æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¿™äº›çº¿ç¨‹ã€‚</span><br><span class="line">static ExecutorService newFixedThreadPool(int nThreads)</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œä»¥å…±äº«çš„æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¿™äº›çº¿ç¨‹ï¼Œåœ¨éœ€è¦æ—¶ä½¿ç”¨æä¾›çš„ ThreadFactory åˆ›å»ºæ–°çº¿ç¨‹ã€‚</span><br><span class="line">static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory)</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚</span><br><span class="line">static ScheduledExecutorService newScheduledThreadPool(int corePoolSize)</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚</span><br><span class="line">static ScheduledExecutorService newScheduledThreadPool(int corePoolSize, ThreadFactory threadFactory)</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªä½¿ç”¨å•ä¸ª worker çº¿ç¨‹çš„ Executorï¼Œä»¥æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¯¥çº¿ç¨‹ã€‚</span><br><span class="line">static ExecutorService newSingleThreadExecutor()</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªä½¿ç”¨å•ä¸ª worker çº¿ç¨‹çš„ Executorï¼Œä»¥æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¯¥çº¿ç¨‹ï¼Œå¹¶åœ¨éœ€è¦æ—¶ä½¿ç”¨æä¾›çš„ ThreadFactory åˆ›å»ºæ–°çº¿ç¨‹ã€‚</span><br><span class="line">static ExecutorService newSingleThreadExecutor(ThreadFactory threadFactory)</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹æ‰§è¡Œç¨‹åºï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚</span><br><span class="line">static ScheduledExecutorService newSingleThreadScheduledExecutor()</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹æ‰§è¡Œç¨‹åºï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚</span><br><span class="line">static ScheduledExecutorService newSingleThreadScheduledExecutor(ThreadFactory threadFactory)</span><br><span class="line"></span><br><span class="line">// è¿”å› Callable å¯¹è±¡ï¼Œè°ƒç”¨å®ƒæ—¶å¯åœ¨å½“å‰çš„è®¿é—®æ§åˆ¶ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œç»™å®šçš„ callable å¯¹è±¡ã€‚</span><br><span class="line">static &lt;T&gt; Callable&lt;T&gt; privilegedCallable(Callable&lt;T&gt; callable)</span><br><span class="line"></span><br><span class="line">// è¿”å› Callable å¯¹è±¡ï¼Œè°ƒç”¨å®ƒæ—¶å¯åœ¨å½“å‰çš„è®¿é—®æ§åˆ¶ä¸Šä¸‹æ–‡ä¸­ï¼Œä½¿ç”¨å½“å‰ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä½œä¸ºä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ¥æ‰§è¡Œç»™å®šçš„ callable å¯¹è±¡ã€‚</span><br><span class="line">static &lt;T&gt; Callable&lt;T&gt; privilegedCallableUsingCurrentClassLoader(Callable&lt;T&gt; callable)</span><br><span class="line"></span><br><span class="line">// è¿”å›ç”¨äºåˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹å·¥å‚ï¼Œè¿™äº›æ–°çº¿ç¨‹ä¸å½“å‰çº¿ç¨‹å…·æœ‰ç›¸åŒçš„æƒé™ã€‚</span><br><span class="line">static ThreadFactory privilegedThreadFactory()</span><br><span class="line"></span><br><span class="line">// è¿”å›ä¸€ä¸ªå°†æ‰€æœ‰å·²å®šä¹‰çš„ ExecutorService æ–¹æ³•å§”æ‰˜ç»™æŒ‡å®šæ‰§è¡Œç¨‹åºçš„å¯¹è±¡ï¼Œä½†æ˜¯ä½¿ç”¨å¼ºåˆ¶è½¬æ¢å¯èƒ½æ— æ³•è®¿é—®å…¶ä»–æ–¹æ³•ã€‚</span><br><span class="line">static ExecutorService unconfigurableExecutorService(ExecutorService executor)</span><br><span class="line"></span><br><span class="line">// è¿”å›ä¸€ä¸ªå°†æ‰€æœ‰å·²å®šä¹‰çš„ ExecutorService æ–¹æ³•å§”æ‰˜ç»™æŒ‡å®šæ‰§è¡Œç¨‹åºçš„å¯¹è±¡ï¼Œä½†æ˜¯ä½¿ç”¨å¼ºåˆ¶è½¬æ¢å¯èƒ½æ— æ³•è®¿é—®å…¶ä»–æ–¹æ³•ã€‚</span><br><span class="line">static ScheduledExecutorService unconfigurableScheduledExecutorService(ScheduledExecutorService executor)</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">- newSingleThreadExecutorï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚è¿™ä¸ªçº¿ç¨‹æ± åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºå•çº¿ç¨‹ä¸²è¡Œæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ã€‚</span><br><span class="line">å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹å› ä¸ºå¼‚å¸¸ç»“æŸï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ›¿ä»£å®ƒã€‚æ­¤çº¿ç¨‹æ± ä¿è¯æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»»åŠ¡çš„æäº¤é¡ºåºæ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">- newFixedThreadPoolï¼šåˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ã€‚æ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ã€‚</span><br><span class="line">çº¿ç¨‹æ± çš„å¤§å°ä¸€æ—¦è¾¾åˆ°æœ€å¤§å€¼å°±ä¼šä¿æŒä¸å˜ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line">- newCachedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ã€‚å¦‚æœçº¿ç¨‹æ± çš„å¤§å°è¶…è¿‡äº†å¤„ç†ä»»åŠ¡æ‰€éœ€è¦çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±ä¼šå›æ”¶éƒ¨åˆ†ç©ºé—²ï¼ˆ60ç§’ä¸</span><br><span class="line">æ‰§è¡Œä»»åŠ¡ï¼‰çš„çº¿ç¨‹ï¼Œå½“ä»»åŠ¡æ•°å¢åŠ æ—¶ï¼Œæ­¤çº¿ç¨‹æ± åˆå¯ä»¥æ™ºèƒ½çš„æ·»åŠ æ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ã€‚æ­¤çº¿ç¨‹æ± ä¸ä¼šå¯¹çº¿ç¨‹æ± å¤§å°åšé™åˆ¶ï¼Œçº¿ç¨‹æ± å¤§å°å®Œå…¨ä¾</span><br><span class="line">èµ–äºæ“ä½œç³»ç»Ÿï¼ˆæˆ–è€…è¯´JVMï¼‰èƒ½å¤Ÿåˆ›å»ºçš„æœ€å¤§çº¿ç¨‹å¤§å°ã€‚</span><br><span class="line"></span><br><span class="line">- newScheduledThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">- newSingleThreadScheduledExecutorï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</span><br></pre></td></tr></table></figure>


<p>String, StringBuffer, StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸStringä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„ï¼Ÿ</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line"></span><br><span class="line">1ã€Stringæ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼ŒStringBufferå’ŒStringBuilderéƒ½æ˜¯å­—ç¬¦ä¸²å˜é‡ã€‚åä¸¤è€…çš„å­—ç¬¦å†…å®¹å¯å˜ï¼Œè€Œå‰è€…åˆ›å»ºåå†…å®¹ä¸å¯å˜ã€‚</span><br><span class="line"></span><br><span class="line">2ã€Stringä¸å¯å˜æ˜¯å› ä¸ºåœ¨JDKä¸­Stringç±»è¢«å£°æ˜ä¸ºä¸€ä¸ªfinalç±»ã€‚</span><br><span class="line"></span><br><span class="line">3ã€StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€ŒStringBuilderæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</span><br><span class="line"></span><br><span class="line">psï¼šçº¿ç¨‹å®‰å…¨ä¼šå¸¦æ¥é¢å¤–çš„ç³»ç»Ÿå¼€é”€ï¼Œæ‰€ä»¥StringBuilderçš„æ•ˆç‡æ¯”StringBufferé«˜ã€‚</span><br><span class="line">å¦‚æœå¯¹ç³»ç»Ÿä¸­çš„çº¿ç¨‹æ˜¯å¦å®‰å…¨å¾ˆæŒæ¡ï¼Œå¯ç”¨StringBufferï¼Œåœ¨çº¿ç¨‹ä¸å®‰å…¨å¤„åŠ ä¸Šå…³é”®å­—Synchronizeã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é›†åˆç›¸å…³é¢è¯•åˆ†æ<br><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%80%BB%E7%BB%93_00.jpg" alt="image182.jpeg"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Javaé›†åˆæ˜¯javaæä¾›çš„å·¥å…·åŒ…ï¼ŒåŒ…å«äº†å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šé›†åˆã€é“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆã€æ•°ç»„ã€æ˜ å°„ç­‰ã€‚Javaé›†åˆå·¥å…·åŒ…ä½ç½®æ˜¯java.util.*</span><br><span class="line">Javaé›†åˆä¸»è¦å¯ä»¥åˆ’åˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼šListåˆ—è¡¨ã€Seté›†åˆã€Mapæ˜ å°„ã€å·¥å…·ç±»(Iteratorè¿­ä»£å™¨ã€Enumerationæšä¸¾ç±»ã€Arrayså’ŒCollections)ã€ã€‚</span><br><span class="line">javaé›†åˆåˆ†ä¸ºä¸¤ç±»ï¼Œcollection å’Œ  map ä¸¤ç§ï¼Œä¸¤ç§æ˜¯å¹¶åˆ—çš„ã€‚</span><br><span class="line"></span><br><span class="line">collection å­˜çš„å€¼ã€‚</span><br><span class="line">    set å­˜å‚¨æ— åºçš„ä¸å¯é‡å¤çš„æ•°æ®</span><br><span class="line">        HashSet   é‡Œé¢å…¶å®æ˜¯ç”¨çš„HashMapæ¥å®ç°çš„      (æ·»åŠ çš„è‡ªå®šä¹‰ç±»çš„å¯¹è±¡éœ€è¦è¿™ä¸ªç±»é‡å†™equalså’ŒhashCodeæ–¹æ³•)</span><br><span class="line">        LinkedHashSet    å­˜å‚¨æ˜¯æŒ‰ç…§å“ˆå¸Œå€¼æ— åºå­˜æ”¾çš„ï¼Œéå†çš„æ—¶å€™å¯ä»¥æŒ‰ç…§é¡ºåºä¾æ¬¡éå†ã€‚</span><br><span class="line">        TreeSet         (è‡ªç„¶æ’åºComparableæ¥å£å’Œå®šåˆ¶æ’åº)</span><br><span class="line">    list å­˜å‚¨æœ‰åºçš„ï¼Œå¯ä»¥é‡å¤çš„æ•°æ®ï¼ŒåŠ¨æ€æ•°ç»„ï¼ˆArrayList, LinkedList, Vectorï¼‰</span><br><span class="line">        ArrayList  çº¿ç¨‹ä¸å®‰å…¨çš„</span><br><span class="line">        LinkedList   å¯¹äºé¢‘ç¹çš„æ’å…¥ï¼Œå’Œåˆ é™¤æ“ä½œå»ºè®®ä½¿ç”¨è¿™ä¸ª</span><br><span class="line">        Vector çº¿ç¨‹å®‰å…¨çš„</span><br><span class="line"></span><br><span class="line">mapå­˜ é”®å’Œå€¼ã€‚</span><br><span class="line">    HashMap</span><br><span class="line">    LinkedHashMap</span><br><span class="line">    HashTable</span><br><span class="line"></span><br><span class="line">Arrayså’ŒCollectionsã€‚å®ƒä»¬æ˜¯æ“ä½œæ•°ç»„ã€é›†åˆçš„ä¸¤ä¸ªå·¥å…·ç±»ã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayListéå†æ–¹å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(01) ç¬¬ä¸€ç§ï¼Œé€šè¿‡è¿­ä»£å™¨éå†ã€‚å³é€šè¿‡Iteratorå»éå†ã€‚</span><br><span class="line">Integer value = null;</span><br><span class="line">Iterator iter = list.iterator();</span><br><span class="line">while (iter.hasNext()) &#123;</span><br><span class="line">    value = (Integer)iter.next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(02) ç¬¬äºŒç§ï¼Œéšæœºè®¿é—®ï¼Œé€šè¿‡ç´¢å¼•å€¼å»éå†ã€‚</span><br><span class="line">Integer value = null;</span><br><span class="line">int size = list.size();</span><br><span class="line">for (int i=0; i&lt;size; i++) &#123;</span><br><span class="line">    value = (Integer)list.get(i);        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(03) ç¬¬ä¸‰ç§ï¼Œforå¾ªç¯éå†ã€‚å¦‚ä¸‹ï¼š</span><br><span class="line">Integer value = null;</span><br><span class="line">for (Integer integ:list) &#123;</span><br><span class="line">    value = integ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> éå†ArrayListæ—¶ï¼Œä½¿ç”¨éšæœºè®¿é—®(å³ï¼Œé€šè¿‡ç´¢å¼•åºå·è®¿é—®)æ•ˆç‡æœ€é«˜ï¼Œè€Œä½¿ç”¨è¿­ä»£å™¨çš„æ•ˆç‡æœ€ä½ï¼</span><br><span class="line"> </span><br></pre></td></tr></table></figure>


<p>LinkedListéå†æ–¹å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">(01) ç¬¬ä¸€ç§ï¼Œé€šè¿‡è¿­ä»£å™¨éå†ã€‚å³é€šè¿‡Iteratorå»éå†ã€‚</span><br><span class="line">for(Iterator iter = list.iterator(); iter.hasNext();)</span><br><span class="line">    iter.next();</span><br><span class="line">    </span><br><span class="line">(02) é€šè¿‡å¿«é€Ÿéšæœºè®¿é—®éå†LinkedList</span><br><span class="line">int size = list.size();</span><br><span class="line">for (int i=0; i&lt;size; i++) &#123;</span><br><span class="line">    list.get(i);        </span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">(03) é€šè¿‡å¦å¤–ä¸€ç§forå¾ªç¯æ¥éå†LinkedList</span><br><span class="line">for (Integer integ:list) </span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">(04) é€šè¿‡pollFirst()æ¥éå†LinkedList</span><br><span class="line">while(list.pollFirst() != null)</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">(05) é€šè¿‡pollLast()æ¥éå†LinkedList</span><br><span class="line">while(list.pollLast() != null)</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">(06) é€šè¿‡removeFirst()æ¥éå†LinkedList</span><br><span class="line">try &#123;</span><br><span class="line">    while(list.removeFirst() != null)</span><br><span class="line">        ;</span><br><span class="line">&#125; catch (NoSuchElementException e) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(07) é€šè¿‡removeLast()æ¥éå†LinkedList</span><br><span class="line">try &#123;</span><br><span class="line">    while(list.removeLast() != null)</span><br><span class="line">        ;</span><br><span class="line">&#125; catch (NoSuchElementException e) &#123;</span><br><span class="line">&#125;</span><br><span class="line">ç”±æ­¤å¯è§ï¼Œéå†LinkedListæ—¶ï¼Œä½¿ç”¨removeFist()æˆ–removeLast()æ•ˆç‡æœ€é«˜ã€‚ä½†ç”¨å®ƒä»¬éå†æ—¶ï¼Œä¼šåˆ é™¤åŸå§‹æ•°æ®ï¼›è‹¥å•çº¯åªè¯»å–ï¼Œè€Œä¸åˆ é™¤ï¼Œåº”è¯¥ä½¿ç”¨ç¬¬3ç§éå†æ–¹å¼ã€‚</span><br><span class="line">æ— è®ºå¦‚ä½•ï¼Œåƒä¸‡ä¸è¦é€šè¿‡éšæœºè®¿é—®å»éå†LinkedListï¼</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Vectoréå†æ–¹å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">(01) ç¬¬ä¸€ç§ï¼Œé€šè¿‡è¿­ä»£å™¨éå†ã€‚å³é€šè¿‡Iteratorå»éå†ã€‚</span><br><span class="line">Integer value = null;</span><br><span class="line">int size = vec.size();</span><br><span class="line">for (int i=0; i&lt;size; i++) &#123;</span><br><span class="line">    value = (Integer)vec.get(i);        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(02) ç¬¬äºŒç§ï¼Œéšæœºè®¿é—®ï¼Œé€šè¿‡ç´¢å¼•å€¼å»éå†ã€‚</span><br><span class="line">Integer value = null;</span><br><span class="line">int size = vec.size();</span><br><span class="line">for (int i=0; i&lt;size; i++) &#123;</span><br><span class="line">    value = (Integer)vec.get(i);        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(03) ç¬¬ä¸‰ç§ï¼Œå¦ä¸€ç§forå¾ªç¯ã€‚å¦‚ä¸‹ï¼š</span><br><span class="line">Integer value = null;</span><br><span class="line">for (Integer integ:vec) &#123;</span><br><span class="line">    value = integ;</span><br><span class="line">&#125;</span><br><span class="line">(04) ç¬¬å››ç§ï¼ŒEnumerationéå†ã€‚å¦‚ä¸‹ï¼š </span><br><span class="line">Integer value = null;</span><br><span class="line">Enumeration enu = vec.elements();</span><br><span class="line">while (enu.hasMoreElements()) &#123;</span><br><span class="line">    value = (Integer)enu.nextElement();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ€»ç»“ï¼šéå†Vectorï¼Œä½¿ç”¨ç´¢å¼•çš„éšæœºè®¿é—®æ–¹å¼æœ€å¿«ï¼Œä½¿ç”¨è¿­ä»£å™¨æœ€æ…¢ã€‚</span><br><span class="line">ç´¢å¼•å˜é‡ &gt; å¢å¼ºforå¾ªç¯ &gt;  Enumerationéå† &gt;    è¿­ä»£å™¨éå†</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Comparableå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå†…æ¯”è¾ƒå™¨ï¼Œå®ç°äº†Comparableæ¥å£çš„ç±»æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯è¿™äº›ç±»æ˜¯å¯ä»¥å’Œè‡ªå·±æ¯”è¾ƒçš„ï¼Œ</span><br><span class="line">è‡³äºå…·ä½“å’Œå¦ä¸€ä¸ªå®ç°äº†Comparableæ¥å£çš„ç±»å¦‚ä½•æ¯”è¾ƒï¼Œåˆ™ä¾èµ–compareToæ–¹æ³•çš„å®ç°ï¼ŒcompareToæ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºè‡ªç„¶æ¯”è¾ƒæ–¹æ³•ã€‚</span><br><span class="line">å¦‚æœå¼€å‘è€…addè¿›å…¥ä¸€ä¸ªCollectionçš„å¯¹è±¡æƒ³è¦Collectionsçš„sortæ–¹æ³•å¸®ä½ è‡ªåŠ¨è¿›è¡Œæ’åºçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å¿…é¡»å®ç°Comparableæ¥å£ã€‚</span><br><span class="line">compareToæ–¹æ³•çš„è¿”å›å€¼æ˜¯intï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š</span><br><span class="line">1ã€æ¯”è¾ƒè€…å¤§äºè¢«æ¯”è¾ƒè€…ï¼ˆä¹Ÿå°±æ˜¯compareToæ–¹æ³•é‡Œé¢çš„å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆè¿”å›æ­£æ•´æ•°</span><br><span class="line">2ã€æ¯”è¾ƒè€…ç­‰äºè¢«æ¯”è¾ƒè€…ï¼Œé‚£ä¹ˆè¿”å›0</span><br><span class="line">3ã€æ¯”è¾ƒè€…å°äºè¢«æ¯”è¾ƒè€…ï¼Œé‚£ä¹ˆè¿”å›è´Ÿæ•´æ•°</span><br><span class="line">æ¥å£æ‰€åœ¨åŒ…   java.lang.Comparable    </span><br><span class="line">æ’åºæ–¹æ³•    int compareTo(T o);    </span><br><span class="line">è§¦å‘æ’åº    Collections.sort(List)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Comparatorå¯ä»¥è®¤ä¸ºæ˜¯æ˜¯ä¸€ä¸ªå¤–æ¯”è¾ƒå™¨ï¼Œä¸ªäººè®¤ä¸ºæœ‰ä¸¤ç§æƒ…å†µå¯ä»¥ä½¿ç”¨å®ç°Comparatoræ¥å£çš„æ–¹å¼ï¼š</span><br><span class="line">1ã€ä¸€ä¸ªå¯¹è±¡ä¸æ”¯æŒè‡ªå·±å’Œè‡ªå·±æ¯”è¾ƒï¼ˆæ²¡æœ‰å®ç°Comparableæ¥å£ï¼‰ï¼Œä½†æ˜¯åˆæƒ³å¯¹ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒ</span><br><span class="line">2ã€ä¸€ä¸ªå¯¹è±¡å®ç°äº†Comparableæ¥å£ï¼Œä½†æ˜¯å¼€å‘è€…è®¤ä¸ºcompareToæ–¹æ³•ä¸­çš„æ¯”è¾ƒæ–¹å¼å¹¶ä¸æ˜¯è‡ªå·±æƒ³è¦çš„é‚£ç§æ¯”è¾ƒæ–¹å¼</span><br><span class="line">Comparatoræ¥å£é‡Œé¢æœ‰ä¸€ä¸ªcompareæ–¹æ³•ï¼Œæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°T o1å’ŒT o2ï¼Œæ˜¯æ³›å‹çš„è¡¨ç¤ºæ–¹å¼ï¼Œåˆ†åˆ«è¡¨ç¤ºå¾…æ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œæ–¹æ³•è¿”å›å€¼å’ŒComparableæ¥å£ä¸€æ ·æ˜¯intï¼Œ</span><br><span class="line">æœ‰ä¸‰ç§æƒ…å†µï¼š </span><br><span class="line">1ã€o1å¤§äºo2ï¼Œè¿”å›æ­£æ•´æ•°</span><br><span class="line">2ã€o1ç­‰äºo2ï¼Œè¿”å›0</span><br><span class="line">3ã€o1å°äºo3ï¼Œè¿”å›è´Ÿæ•´æ•°</span><br><span class="line"></span><br><span class="line">æ¥å£æ‰€åœ¨åŒ…   java.util.Comparator</span><br><span class="line">æ’åºæ–¹æ³•    int compare(T o1, T o2); </span><br><span class="line">è§¦å‘æ’åº    Collections.sort(List, Comparator)</span><br></pre></td></tr></table></figure>


<p>Vector, ArrayList, LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1ã€Vectorã€ArrayListéƒ½æ˜¯ä»¥ç±»ä¼¼æ•°ç»„çš„å½¢å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒLinkedListåˆ™ä»¥åŒå‘é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚</span><br><span class="line">Vectorã€ArrayListéƒ½æ˜¯listæ¥å£çš„å®ç°ç±»,ä¹Ÿéƒ½ç»§æ‰¿äº†AbstractListç±»ã€‚</span><br><span class="line"></span><br><span class="line">2ã€Listä¸­çš„å…ƒç´ æœ‰åºã€å…è®¸æœ‰é‡å¤çš„å…ƒç´ ï¼ŒSetä¸­çš„å…ƒç´ æ— åºã€ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">3ã€Vectorçº¿ç¨‹åŒæ­¥,å…¶ä¸­æœ‰äº›æ–¹æ³•æ˜¯å¸¦synchronizedå…³é”®å­—çš„ï¼ŒArrayListã€LinkedListçº¿ç¨‹ä¸åŒæ­¥ã€‚</span><br><span class="line"></span><br><span class="line">4ã€LinkedListé€‚åˆæŒ‡å®šä½ç½®æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œä¸é€‚åˆæŸ¥æ‰¾ï¼›ArrayListã€Vectoré€‚åˆæŸ¥æ‰¾ï¼Œä¸é€‚åˆæŒ‡å®šä½ç½®çš„æ’å…¥ã€åˆ é™¤æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">5ã€ArrayListåœ¨å…ƒç´ å¡«æ»¡å®¹å™¨æ—¶ä¼šè‡ªåŠ¨æ‰©å……å®¹å™¨å¤§å°çš„50%ï¼Œè€ŒVectoråˆ™æ˜¯100%ï¼Œå› æ­¤ArrayListæ›´èŠ‚çœç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">List l = new ArrayList();</span><br><span class="line">jdk8å½“ä¸­åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™æ‰å»åˆ›å»ºåº•å±‚çš„é‚£ä¸ªæ•°ç»„ï¼Œjdk7ä¸€å¼€å§‹å°±åˆ›å»ºä¸€ä¸ªé»˜è®¤é•¿åº¦10çš„æ•°ç»„ã€‚</span><br><span class="line"></span><br><span class="line">(01) List æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒç»§æ‰¿äºCollectionçš„æ¥å£ã€‚å®ƒä»£è¡¨ç€æœ‰åºçš„é˜Ÿåˆ—ã€‚</span><br><span class="line">(02) AbstractList æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒç»§æ‰¿äºAbstractCollectionã€‚AbstractListå®ç°Listæ¥å£ä¸­é™¤size()ã€get(int location)ä¹‹å¤–çš„å‡½æ•°ã€‚</span><br><span class="line">(03) AbstractSequentialList æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒç»§æ‰¿äºAbstractListã€‚AbstractSequentialList å®ç°äº†â€œé“¾è¡¨ä¸­ï¼Œæ ¹æ®indexç´¢å¼•å€¼æ“ä½œé“¾è¡¨çš„å…¨éƒ¨å‡½æ•°â€ã€‚</span><br><span class="line"></span><br><span class="line">(04) ArrayList, LinkedList, Vector, Stackæ˜¯Listçš„4ä¸ªå®ç°ç±»ã€‚</span><br><span class="line">    ArrayList æ˜¯ä¸€ä¸ªæ•°ç»„é˜Ÿåˆ—ï¼Œç›¸å½“äºåŠ¨æ€æ•°ç»„ã€‚å®ƒç”±æ•°ç»„å®ç°ï¼Œéšæœºè®¿é—®æ•ˆç‡é«˜ï¼Œéšæœºæ’å…¥ã€éšæœºåˆ é™¤æ•ˆç‡ä½ã€‚</span><br><span class="line">    LinkedList æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚å®ƒä¹Ÿå¯ä»¥è¢«å½“ä½œå †æ ˆã€é˜Ÿåˆ—æˆ–åŒç«¯é˜Ÿåˆ—è¿›è¡Œæ“ä½œã€‚LinkedListéšæœºè®¿é—®æ•ˆç‡ä½ï¼Œä½†éšæœºæ’å…¥ã€éšæœºåˆ é™¤æ•ˆç‡ä½ã€‚</span><br><span class="line">    Vector æ˜¯çŸ¢é‡é˜Ÿåˆ—ï¼Œå’ŒArrayListä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œç”±æ•°ç»„å®ç°ã€‚ä½†æ˜¯ArrayListæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè€ŒVectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</span><br><span class="line">    Stack æ˜¯æ ˆï¼Œå®ƒç»§æ‰¿äºVectorã€‚å®ƒçš„ç‰¹æ€§æ˜¯ï¼šå…ˆè¿›åå‡º(FILO, First In Last Out)ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>HashTable, HashMapï¼ŒTreeMap åŒºåˆ«ï¼Ÿ</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">HashTableå­˜å‚¨æ•°æ®æ˜¯ç”¨çš„çš„è¿™ä¸ªï¼štransient Entry&lt;?,?&gt;[] table</span><br><span class="line"></span><br><span class="line">HashMapå­˜å‚¨æ•°æ®æ˜¯ç”¨çš„çš„è¿™ä¸ªï¼štransient Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1ã€HashTableçº¿ç¨‹åŒæ­¥ï¼ŒHashMapéçº¿ç¨‹åŒæ­¥ã€‚</span><br><span class="line"></span><br><span class="line">2ã€HashTableä¸å…è®¸&lt;é”®,å€¼&gt;æœ‰ç©ºå€¼ï¼ŒHashMapå…è®¸&lt;é”®,å€¼&gt;æœ‰ç©ºå€¼ã€‚</span><br><span class="line"></span><br><span class="line">3ã€HashTableä½¿ç”¨Enumerationï¼ŒHashMapä½¿ç”¨Iteratorã€‚</span><br><span class="line"></span><br><span class="line">4ã€HashTableä¸­hashæ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯11ï¼Œå¢åŠ æ–¹å¼çš„old*2+1ï¼ŒHashMapä¸­hashæ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯16ï¼Œå¢é•¿æ–¹å¼ä¸€å®šæ˜¯2çš„æŒ‡æ•°å€ã€‚</span><br><span class="line"></span><br><span class="line">5ã€TreeMapèƒ½å¤ŸæŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®æ’åºï¼Œé»˜è®¤æ˜¯æŒ‰å‡åºæ’åºã€‚é€‚ç”¨äºæŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºéå†é”®(key)</span><br><span class="line"></span><br><span class="line">Mapä¸»è¦ç”¨äºå­˜å‚¨å¥å€¼å¯¹ï¼Œæ ¹æ®é”®å¾—åˆ°å€¼ï¼Œå› æ­¤ä¸å…è®¸é”®é‡å¤(é‡å¤äº†è¦†ç›–äº†),ä½†å…è®¸å€¼é‡å¤ã€‚</span><br><span class="line"></span><br><span class="line">Hashmap æ˜¯ä¸€ä¸ªæœ€å¸¸ç”¨çš„Map,å®ƒæ ¹æ®é”®çš„HashCodeå€¼å­˜å‚¨æ•°æ®,æ ¹æ®é”®å¯ä»¥ç›´æ¥è·å–å®ƒçš„å€¼ï¼Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ï¼Œéå†æ—¶ï¼Œå–å¾—æ•°æ®çš„é¡ºåºæ˜¯å®Œå…¨éšæœºçš„ã€‚</span><br><span class="line">HashMapæœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„é”®ä¸ºNull;å…è®¸å¤šæ¡è®°å½•çš„å€¼ä¸º Null;HashMapä¸æ”¯æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œå³ä»»ä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™HashMap;å¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚</span><br><span class="line">å¦‚æœéœ€è¦åŒæ­¥ï¼Œå¯ä»¥ç”¨ Collectionsçš„synchronizedMapæ–¹æ³•ä½¿HashMapå…·æœ‰åŒæ­¥çš„èƒ½åŠ›ï¼Œæˆ–è€…ä½¿ç”¨ConcurrentHashMapã€‚</span><br><span class="line"></span><br><span class="line">Hashtableä¸ HashMapç±»ä¼¼,å®ƒç»§æ‰¿è‡ªDictionaryç±»ï¼Œä¸åŒçš„æ˜¯:å®ƒä¸å…è®¸è®°å½•çš„é”®æˆ–è€…å€¼ä¸ºç©º;å®ƒæ”¯æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œ</span><br><span class="line">å³ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å†™Hashtable,å› æ­¤ä¹Ÿå¯¼è‡´äº† Hashtableåœ¨å†™å…¥æ—¶ä¼šæ¯”è¾ƒæ…¢ã€‚</span><br><span class="line"></span><br><span class="line">LinkedHashMapæ˜¯HashMapçš„ä¸€ä¸ªå­ç±»ï¼Œä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåºï¼Œåœ¨ç”¨Iteratoréå†LinkedHashMapæ—¶ï¼Œå…ˆå¾—åˆ°çš„è®°å½•è‚¯å®šæ˜¯å…ˆæ’å…¥çš„.</span><br><span class="line">ä¹Ÿå¯ä»¥åœ¨æ„é€ æ—¶ç”¨å¸¦å‚æ•°ï¼ŒæŒ‰ç…§åº”ç”¨æ¬¡æ•°æ’åºã€‚</span><br><span class="line">åœ¨éå†çš„æ—¶å€™ä¼šæ¯”HashMapæ…¢ï¼Œä¸è¿‡æœ‰ç§æƒ…å†µä¾‹å¤–ï¼Œå½“HashMapå®¹é‡å¾ˆå¤§ï¼Œå®é™…æ•°æ®è¾ƒå°‘æ—¶ï¼Œéå†èµ·æ¥å¯èƒ½ä¼šæ¯”LinkedHashMapæ…¢ï¼Œ</span><br><span class="line">å› ä¸ºLinkedHashMapçš„éå†é€Ÿåº¦åªå’Œå®é™…æ•°æ®æœ‰å…³ï¼Œå’Œå®¹é‡æ— å…³ï¼Œè€ŒHashMapçš„éå†é€Ÿåº¦å’Œä»–çš„å®¹é‡æœ‰å…³ã€‚</span><br><span class="line"></span><br><span class="line">TreeMapå®ç°SortMapæ¥å£ï¼Œèƒ½å¤ŸæŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®æ’åº,é»˜è®¤æ˜¯æŒ‰é”®å€¼çš„å‡åºæ’åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ’åºçš„æ¯”è¾ƒå™¨ï¼Œå½“ç”¨Iterator éå†TreeMapæ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æ’è¿‡åºçš„ã€‚</span><br><span class="line"></span><br><span class="line">ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨çš„æœ€å¤šçš„æ˜¯HashMap,åœ¨Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ ï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</span><br><span class="line">ä½†å¦‚æœæ‚¨è¦æŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºéå†é”®ï¼Œé‚£ä¹ˆTreeMapä¼šæ›´å¥½ã€‚</span><br><span class="line">å¦‚æœéœ€è¦è¾“å‡ºçš„é¡ºåºå’Œè¾“å…¥çš„ç›¸åŒ,é‚£ä¹ˆç”¨LinkedHashMapå¯ä»¥å®ç°,å®ƒè¿˜å¯ä»¥æŒ‰è¯»å–é¡ºåºæ¥æ’åˆ—.</span><br><span class="line"></span><br><span class="line">hashMapä½¿ç”¨arrayå’Œlistä¿©è¡¨ç¤ºï¼Œæ ¹æ®é”®çš„hashcodeæ¥è®¡ç®—åœ¨æ•°ç»„ä¸­å“ªä¸ªä½ç½®å­˜æ”¾æ•°æ®ï¼Œç„¶ååœ¨æ•°æ®å­˜æ”¾åˆ°listä¸­ã€‚</span><br><span class="line">å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œä¼šæŠŠlistè½¬ä¸ºçº¢é»‘æ ‘æ¥å­˜æ”¾çš„ï¼ˆæ­¤æ•°ç»„iä½ç½®ä¸Šçš„é“¾è¡¨å…ƒç´ ä¸ªæ•°å¤§äº8ä¸”æ•´ä¸ªæ•°ç»„é•¿åº¦å¤§äº64æ‰ä½¿ç”¨çº¢é»‘æ ‘ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p>HashMapéå†æ–¹å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">éå†HashMapçš„é”®å€¼å¯¹</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ­¥ï¼šæ ¹æ®entrySet()è·å–HashMapçš„â€œé”®å€¼å¯¹â€çš„Seté›†åˆã€‚</span><br><span class="line">ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚</span><br><span class="line">// å‡è®¾mapæ˜¯HashMapå¯¹è±¡</span><br><span class="line">// mapä¸­çš„keyæ˜¯Stringç±»å‹ï¼Œvalueæ˜¯Integerç±»å‹</span><br><span class="line">Integer integ = null;</span><br><span class="line">Iterator iter = map.entrySet().iterator();</span><br><span class="line">while(iter.hasNext()) &#123;</span><br><span class="line">    Map.Entry entry = (Map.Entry)iter.next();</span><br><span class="line">    </span><br><span class="line">    key = (String)entry.getKey();// è·å–key</span><br><span class="line">        </span><br><span class="line">    integ = (Integer)entry.getValue();// è·å–value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> éå†HashMapçš„é”®</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ­¥ï¼šæ ¹æ®keySet()è·å–HashMapçš„â€œé”®â€çš„Seté›†åˆã€‚</span><br><span class="line">ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚</span><br><span class="line">// å‡è®¾mapæ˜¯HashMapå¯¹è±¡</span><br><span class="line">// mapä¸­çš„keyæ˜¯Stringç±»å‹ï¼Œvalueæ˜¯Integerç±»å‹</span><br><span class="line">String key = null;</span><br><span class="line">Integer integ = null;</span><br><span class="line">Iterator iter = map.keySet().iterator();</span><br><span class="line">while (iter.hasNext()) &#123;</span><br><span class="line">       </span><br><span class="line">    key = (String)iter.next(); // è·å–key</span><br><span class="line">        </span><br><span class="line">    integ = (Integer)map.get(key);// æ ¹æ®keyï¼Œè·å–value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">éå†HashMapçš„å€¼</span><br><span class="line">ç¬¬ä¸€æ­¥ï¼šæ ¹æ®value()è·å–HashMapçš„â€œå€¼â€çš„é›†åˆã€‚</span><br><span class="line">ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚</span><br><span class="line">// å‡è®¾mapæ˜¯HashMapå¯¹è±¡</span><br><span class="line">// mapä¸­çš„keyæ˜¯Stringç±»å‹ï¼Œvalueæ˜¯Integerç±»å‹</span><br><span class="line">Integer value = null;</span><br><span class="line">Collection c = map.values();</span><br><span class="line">Iterator iter= c.iterator();</span><br><span class="line">while (iter.hasNext()) &#123;</span><br><span class="line">    value = (Integer)iter.next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Hashtableéå†æ–¹å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">é€šè¿‡Enumerationéå†Hashtableçš„é”®</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ­¥ï¼šæ ¹æ®keys()è·å–Hashtableçš„é›†åˆã€‚</span><br><span class="line">ç¬¬äºŒæ­¥ï¼šé€šè¿‡Enumerationéå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚</span><br><span class="line">Enumeration enu = table.keys();</span><br><span class="line">while(enu.hasMoreElements()) &#123;</span><br><span class="line">    System.out.println(enu.nextElement());</span><br><span class="line">&#125;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">é€šè¿‡Enumerationéå†Hashtableçš„å€¼</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ­¥ï¼šæ ¹æ®elements()è·å–Hashtableçš„é›†åˆã€‚</span><br><span class="line">ç¬¬äºŒæ­¥ï¼šé€šè¿‡Enumerationéå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚</span><br><span class="line">Enumeration enu = table.elements();</span><br><span class="line">while(enu.hasMoreElements()) &#123;</span><br><span class="line">    System.out.println(enu.nextElement());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>javaå¼‚å¸¸ç®€ä»‹åŠå…¶æ¶æ„</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Javaå¼‚å¸¸æœºåˆ¶å¯ä»¥ä½¿ç¨‹åºä¸­å¼‚å¸¸å¤„ç†ä»£ç å’Œæ­£å¸¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¿è¯ç¨‹åºä»£ç æ›´åŠ ä¼˜é›…ï¼Œå¹¶æé«˜ç¨‹åºå¥å£®æ€§ã€‚</span><br><span class="line">åœ¨æœ‰æ•ˆä½¿ç”¨å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œå¼‚å¸¸èƒ½æ¸…æ™°çš„å›ç­”what, where, whyè¿™3ä¸ªé—®é¢˜ï¼šå¼‚å¸¸ç±»å‹å›ç­”äº†â€œä»€ä¹ˆâ€è¢«æŠ›å‡ºï¼Œ</span><br><span class="line">å¼‚å¸¸å †æ ˆè·Ÿè¸ªå›ç­”äº†â€œåœ¨å“ªâ€œæŠ›å‡ºï¼Œå¼‚å¸¸ä¿¡æ¯å›ç­”äº†â€œä¸ºä»€ä¹ˆâ€œä¼šæŠ›å‡ºã€‚</span><br><span class="line"></span><br><span class="line">Javaå¼‚å¸¸æœºåˆ¶ç”¨åˆ°çš„å‡ ä¸ªå…³é”®å­—ï¼štryã€catchã€finallyã€throwã€throwsã€‚</span><br><span class="line">â€¢ try        -- ç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ç (å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç )æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚</span><br><span class="line">â€¢ catch   -- ç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚</span><br><span class="line">â€¢ finally  -- finallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„ç‰©åŠ›èµ„æº(å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶)ã€‚</span><br><span class="line">åªæœ‰finallyå—ï¼Œæ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰ä¼šå›æ¥æ‰§è¡Œtryæˆ–è€…catchå—ä¸­çš„returnæˆ–è€…throwè¯­å¥ï¼Œå¦‚æœfinallyä¸­ä½¿ç”¨äº†returnæˆ–è€…throwç­‰ç»ˆæ­¢æ–¹æ³•çš„è¯­å¥ï¼Œåˆ™å°±ä¸ä¼šè·³å›æ‰§è¡Œï¼Œç›´æ¥åœæ­¢ã€‚</span><br><span class="line">â€¢ throw   -- ç”¨äºæŠ›å‡ºå¼‚å¸¸ã€‚</span><br><span class="line">â€¢ throws -- ç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. Throwable</span><br><span class="line">ã€€ã€€Throwableæ˜¯ Java è¯­è¨€ä¸­æ‰€æœ‰é”™è¯¯æˆ–å¼‚å¸¸çš„è¶…ç±»ã€‚</span><br><span class="line">ã€€ã€€ThrowableåŒ…å«ä¸¤ä¸ªå­ç±»: Error å’Œ Exceptionã€‚å®ƒä»¬é€šå¸¸ç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†å¼‚å¸¸æƒ…å†µã€‚</span><br><span class="line">ã€€ã€€ThrowableåŒ…å«äº†å…¶çº¿ç¨‹åˆ›å»ºæ—¶çº¿ç¨‹æ‰§è¡Œå †æ ˆçš„å¿«ç…§ï¼Œå®ƒæä¾›äº†printStackTrace()ç­‰æ¥å£ç”¨äºè·å–å †æ ˆè·Ÿè¸ªæ•°æ®ç­‰ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">2. Exception</span><br><span class="line">ã€€ã€€ExceptionåŠå…¶å­ç±»æ˜¯ Throwable çš„ä¸€ç§å½¢å¼ï¼Œå®ƒæŒ‡å‡ºäº†åˆç†çš„åº”ç”¨ç¨‹åºæƒ³è¦æ•è·çš„æ¡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">3. RuntimeException </span><br><span class="line">ã€€ã€€RuntimeExceptionæ˜¯é‚£äº›å¯èƒ½åœ¨ Java è™šæ‹Ÿæœºæ­£å¸¸è¿è¡ŒæœŸé—´æŠ›å‡ºçš„å¼‚å¸¸çš„è¶…ç±»ã€‚</span><br><span class="line">ã€€ã€€ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥RuntimeExceptionå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œé™¤æ•°ä¸ºé›¶æ—¶ï¼ŒæŠ›å‡ºArithmeticExceptionå¼‚å¸¸ã€‚RuntimeExceptionæ˜¯ArithmeticExceptionçš„è¶…ç±»ã€‚å½“ä»£ç å‘ç”Ÿé™¤æ•°ä¸ºé›¶çš„æƒ…å†µæ—¶ï¼Œå€˜è‹¥æ—¢&quot;æ²¡æœ‰é€šè¿‡throwså£°æ˜æŠ›å‡ºArithmeticExceptionå¼‚å¸¸&quot;ï¼Œä¹Ÿ&quot;æ²¡æœ‰é€šè¿‡try...catch...å¤„ç†è¯¥å¼‚å¸¸&quot;ï¼Œä¹Ÿèƒ½é€šè¿‡ç¼–è¯‘ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„&quot;ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥RuntimeExceptionå¼‚å¸¸&quot;ï¼</span><br><span class="line">ã€€ã€€å¦‚æœä»£ç ä¼šäº§ç”ŸRuntimeExceptionå¼‚å¸¸ï¼Œåˆ™éœ€è¦é€šè¿‡ä¿®æ”¹ä»£ç è¿›è¡Œé¿å…ã€‚ä¾‹å¦‚ï¼Œè‹¥ä¼šå‘ç”Ÿé™¤æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç é¿å…è¯¥æƒ…å†µçš„å‘ç”Ÿï¼</span><br><span class="line"></span><br><span class="line">4. Error</span><br><span class="line">ã€€ã€€å’ŒExceptionä¸€æ ·ï¼ŒErrorä¹Ÿæ˜¯Throwableçš„å­ç±»ã€‚å®ƒç”¨äºæŒ‡ç¤ºåˆç†çš„åº”ç”¨ç¨‹åºä¸åº”è¯¥è¯•å›¾æ•è·çš„ä¸¥é‡é—®é¢˜ï¼Œå¤§å¤šæ•°è¿™æ ·çš„é”™è¯¯éƒ½æ˜¯å¼‚å¸¸æ¡ä»¶ã€‚</span><br><span class="line">ã€€ã€€å’ŒRuntimeExceptionä¸€æ ·ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæ£€æŸ¥Errorã€‚</span><br><span class="line"></span><br><span class="line">Javaå°†å¯æŠ›å‡º(Throwable)çš„ç»“æ„åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šè¢«æ£€æŸ¥çš„å¼‚å¸¸(Checked Exception)ï¼Œè¿è¡Œæ—¶å¼‚å¸¸(RuntimeException)å’Œé”™è¯¯(Error)ã€‚</span><br><span class="line"></span><br><span class="line">(01) è¿è¡Œæ—¶å¼‚å¸¸</span><br><span class="line">å®šä¹‰: RuntimeExceptionåŠå…¶å­ç±»éƒ½è¢«ç§°ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚</span><br><span class="line">ç‰¹ç‚¹: Javaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¨‹åºä¸­å¯èƒ½å‡ºç°è¿™ç±»å¼‚å¸¸æ—¶ï¼Œå€˜è‹¥æ—¢&quot;æ²¡æœ‰é€šè¿‡throwså£°æ˜æŠ›å‡ºå®ƒ&quot;ï¼Œä¹Ÿ&quot;æ²¡æœ‰ç”¨try-catchè¯­å¥æ•è·å®ƒ&quot;ï¼Œè¿˜æ˜¯ä¼šç¼–è¯‘é€šè¿‡ã€‚ä¾‹å¦‚ï¼Œé™¤æ•°ä¸ºé›¶æ—¶äº§ç”Ÿçš„ArithmeticExceptionå¼‚å¸¸ï¼Œæ•°ç»„è¶Šç•Œæ—¶äº§ç”Ÿçš„IndexOutOfBoundsExceptionå¼‚å¸¸ï¼Œfail-failæœºåˆ¶äº§ç”Ÿçš„ConcurrentModificationExceptionå¼‚å¸¸ç­‰ï¼Œéƒ½å±äºè¿è¡Œæ—¶å¼‚å¸¸ã€‚</span><br><span class="line">ã€€ã€€è™½ç„¶Javaç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡try-catchå¯¹å®ƒè¿›è¡Œæ•è·å¤„ç†ã€‚</span><br><span class="line">ã€€ã€€å¦‚æœäº§ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåˆ™éœ€è¦é€šè¿‡ä¿®æ”¹ä»£ç æ¥è¿›è¡Œé¿å…ã€‚ä¾‹å¦‚ï¼Œè‹¥ä¼šå‘ç”Ÿé™¤æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç é¿å…è¯¥æƒ…å†µçš„å‘ç”Ÿï¼</span><br><span class="line"></span><br><span class="line">(02) è¢«æ£€æŸ¥çš„å¼‚å¸¸</span><br><span class="line">å®šä¹‰: Exceptionç±»æœ¬èº«ï¼Œä»¥åŠExceptionçš„å­ç±»ä¸­é™¤äº†&quot;è¿è¡Œæ—¶å¼‚å¸¸&quot;ä¹‹å¤–çš„å…¶å®ƒå­ç±»éƒ½å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚</span><br><span class="line">ç‰¹ç‚¹: Javaç¼–è¯‘å™¨ä¼šæ£€æŸ¥å®ƒã€‚æ­¤ç±»å¼‚å¸¸ï¼Œè¦ä¹ˆé€šè¿‡throwsè¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œè¦ä¹ˆé€šè¿‡try-catchè¿›è¡Œæ•è·å¤„ç†ï¼Œå¦åˆ™ä¸èƒ½é€šè¿‡ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼ŒCloneNotSupportedExceptionå°±å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚å½“é€šè¿‡clone()æ¥å£å»å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¯¥å¯¹è±¡å¯¹åº”çš„ç±»æ²¡æœ‰å®ç°Cloneableæ¥å£ï¼Œå°±ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸ã€‚</span><br><span class="line">ã€€ã€€è¢«æ£€æŸ¥å¼‚å¸¸é€šå¸¸éƒ½æ˜¯å¯ä»¥æ¢å¤çš„ã€‚</span><br><span class="line"></span><br><span class="line">(03) é”™è¯¯</span><br><span class="line">å®šä¹‰: Errorç±»åŠå…¶å­ç±»ã€‚</span><br><span class="line">ç‰¹ç‚¹: å’Œè¿è¡Œæ—¶å¼‚å¸¸ä¸€æ ·ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå¯¹é”™è¯¯è¿›è¡Œæ£€æŸ¥ã€‚</span><br><span class="line">ã€€ã€€å½“èµ„æºä¸è¶³ã€çº¦æŸå¤±è´¥ã€æˆ–æ˜¯å…¶å®ƒç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œçš„æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œå°±äº§ç”Ÿé”™è¯¯ã€‚ç¨‹åºæœ¬èº«æ— æ³•ä¿®å¤è¿™äº›é”™è¯¯çš„ã€‚ä¾‹å¦‚ï¼ŒVirtualMachineErrorå°±å±äºé”™è¯¯ã€‚</span><br><span class="line">ã€€ã€€æŒ‰ç…§Javaæƒ¯ä¾‹ï¼Œæˆ‘ä»¬æ˜¯ä¸åº”è¯¥æ˜¯å®ç°ä»»ä½•æ–°çš„Errorå­ç±»çš„ï¼</span><br><span class="line"></span><br><span class="line">å¯¹äºä¸Šé¢çš„3ç§ç»“æ„ï¼Œæˆ‘ä»¬åœ¨æŠ›å‡ºå¼‚å¸¸æˆ–é”™è¯¯æ—¶ï¼Œåˆ°åº•è¯¥å“ªä¸€ç§ï¼Ÿã€ŠEffective Javaã€‹ä¸­ç»™å‡ºçš„å»ºè®®æ˜¯ï¼šå¯¹äºå¯ä»¥æ¢å¤çš„æ¡ä»¶ä½¿ç”¨è¢«æ£€æŸ¥å¼‚å¸¸ï¼Œå¯¹äºç¨‹åºé”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure>


<p>JUCåŸå­ç±»</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ ¹æ®ä¿®æ”¹çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥å°†JUCåŒ…ä¸­çš„åŸå­æ“ä½œç±»å¯ä»¥åˆ†ä¸º4ç±»ã€‚</span><br><span class="line"></span><br><span class="line">1. åŸºæœ¬ç±»å‹: AtomicInteger, AtomicLong, AtomicBoolean ;</span><br><span class="line">2. æ•°ç»„ç±»å‹: AtomicIntegerArray, AtomicLongArray, AtomicReferenceArray ;</span><br><span class="line">3. å¼•ç”¨ç±»å‹: AtomicReference, AtomicStampedRerence, AtomicMarkableReference ;</span><br><span class="line">4. å¯¹è±¡çš„å±æ€§ä¿®æ”¹ç±»å‹: AtomicIntegerFieldUpdater, AtomicLongFieldUpdater, AtomicReferenceFieldUpdater ã€‚</span><br><span class="line"></span><br><span class="line">è¿™äº›ç±»å­˜åœ¨çš„ç›®çš„æ˜¯å¯¹ç›¸åº”çš„æ•°æ®è¿›è¡ŒåŸå­æ“ä½œã€‚æ‰€è°“åŸå­æ“ä½œï¼Œæ˜¯æŒ‡æ“ä½œè¿‡ç¨‹ä¸ä¼šè¢«ä¸­æ–­ï¼Œä¿è¯æ•°æ®æ“ä½œæ˜¯ä»¥åŸå­æ–¹å¼è¿›è¡Œçš„ã€‚</span><br><span class="line"></span><br><span class="line">AtomicLong æ˜¯ä½œç”¨æ˜¯å¯¹é•¿æ•´å½¢è¿›è¡ŒåŸå­æ“ä½œã€‚</span><br><span class="line">åœ¨32ä½æ“ä½œç³»ç»Ÿä¸­ï¼Œ64ä½çš„long å’Œ double å˜é‡ç”±äºä¼šè¢«JVMå½“ä½œä¸¤ä¸ªåˆ†ç¦»çš„32ä½æ¥è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥ä¸å…·æœ‰åŸå­æ€§ã€‚è€Œä½¿ç”¨AtomicLongèƒ½è®©longçš„æ“ä½œä¿æŒåŸå­å‹ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŒæ­¥é”</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å³é€šè¿‡synchronizedå…³é”®å­—æ¥è¿›è¡ŒåŒæ­¥ï¼Œå®ç°å¯¹ç«äº‰èµ„æºçš„äº’æ–¥è®¿é—®çš„é”ã€‚Java 1.0ç‰ˆæœ¬ä¸­å°±å·²ç»æ”¯æŒåŒæ­¥é”äº†ã€‚</span><br><span class="line">åŒæ­¥é”çš„åŸç†æ˜¯ï¼Œå¯¹äºæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŒæ­¥é”ï¼›ä¸åŒçš„çº¿ç¨‹èƒ½å…±åŒè®¿é—®è¯¥åŒæ­¥é”ã€‚ä½†æ˜¯ï¼Œåœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œè¯¥åŒæ­¥é”èƒ½ä¸”åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°ã€‚</span><br><span class="line">è¿™æ ·ï¼Œè·å–åˆ°åŒæ­¥é”çš„çº¿ç¨‹å°±èƒ½è¿›è¡ŒCPUè°ƒåº¦ï¼Œä»è€Œåœ¨CPUä¸Šæ‰§è¡Œï¼›è€Œæ²¡æœ‰è·å–åˆ°åŒæ­¥é”çš„çº¿ç¨‹ï¼Œå¿…é¡»è¿›è¡Œç­‰å¾…ï¼Œç›´åˆ°è·å–åˆ°åŒæ­¥é”ä¹‹åæ‰èƒ½ç»§ç»­è¿è¡Œã€‚</span><br><span class="line">è¿™å°±æ˜¯ï¼Œå¤šçº¿ç¨‹é€šè¿‡åŒæ­¥é”è¿›è¡ŒåŒæ­¥çš„åŸç†ï¼</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>JUCåŒ…ä¸­çš„é” </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">ç›¸æ¯”åŒæ­¥é”ï¼ŒJUCåŒ…ä¸­çš„é”çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œå®ƒä¸ºé”æä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œè¯¥æ¡†æ¶å…è®¸æ›´çµæ´»åœ°ä½¿ç”¨é”ï¼Œåªæ˜¯å®ƒçš„ç”¨æ³•æ›´éš¾ç½¢äº†ã€‚</span><br><span class="line"></span><br><span class="line">JUCåŒ…ä¸­çš„é”ï¼ŒåŒ…æ‹¬ï¼šLockæ¥å£ï¼ŒReadWriteLockæ¥å£ï¼ŒLockSupporté˜»å¡åŸè¯­ï¼ŒConditionæ¡ä»¶ï¼Œ</span><br><span class="line">AbstractOwnableSynchronizer/AbstractQueuedSynchronizer/AbstractQueuedLongSynchronizerä¸‰ä¸ªæŠ½è±¡ç±»ï¼Œ</span><br><span class="line">ReentrantLockç‹¬å é”ï¼ŒReentrantReadWriteLockè¯»å†™é”ã€‚</span><br><span class="line"></span><br><span class="line">ç”±äºCountDownLatchï¼ŒCyclicBarrierå’ŒSemaphoreä¹Ÿæ˜¯é€šè¿‡AQSæ¥å®ç°çš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">01. Lockæ¥å£</span><br><span class="line">JUCåŒ…ä¸­çš„ Lock æ¥å£æ”¯æŒé‚£äº›è¯­ä¹‰ä¸åŒ(é‡å…¥ã€å…¬å¹³ç­‰)çš„é”è§„åˆ™ã€‚æ‰€è°“è¯­ä¹‰ä¸åŒï¼Œæ˜¯æŒ‡é”å¯æ˜¯æœ‰&quot;å…¬å¹³æœºåˆ¶çš„é”&quot;ã€&quot;éå…¬å¹³æœºåˆ¶çš„é”&quot;ã€&quot;å¯é‡å…¥çš„é”&quot;ç­‰ç­‰ã€‚</span><br><span class="line">&quot;å…¬å¹³æœºåˆ¶&quot;æ˜¯æŒ‡&quot;ä¸åŒçº¿ç¨‹è·å–é”çš„æœºåˆ¶æ˜¯å…¬å¹³çš„&quot;ï¼Œè€Œ&quot;éå…¬å¹³æœºåˆ¶&quot;åˆ™æ˜¯æŒ‡&quot;ä¸åŒçº¿ç¨‹è·å–é”çš„æœºåˆ¶æ˜¯éå…¬å¹³çš„&quot;ï¼Œ&quot;å¯é‡å…¥çš„é”&quot;æ˜¯æŒ‡åŒä¸€ä¸ªé”èƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è·å–ã€‚</span><br><span class="line"></span><br><span class="line">02. ReadWriteLock</span><br><span class="line">ReadWriteLock æ¥å£ä»¥å’ŒLockç±»ä¼¼çš„æ–¹å¼å®šä¹‰äº†ä¸€äº›è¯»å–è€…å¯ä»¥å…±äº«è€Œå†™å…¥è€…ç‹¬å çš„é”ã€‚JUCåŒ…åªæœ‰ä¸€ä¸ªç±»å®ç°äº†è¯¥æ¥å£ï¼Œ</span><br><span class="line">å³ ReentrantReadWriteLockï¼Œå› ä¸ºå®ƒé€‚ç”¨äºå¤§éƒ¨åˆ†çš„æ ‡å‡†ç”¨æ³•ä¸Šä¸‹æ–‡ã€‚ä½†ç¨‹åºå‘˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„ã€é€‚ç”¨äºéæ ‡å‡†è¦æ±‚çš„å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">03. AbstractOwnableSynchronizer/AbstractQueuedSynchronizer/AbstractQueuedLongSynchronizer</span><br><span class="line">AbstractQueuedSynchronizerå°±æ˜¯è¢«ç§°ä¹‹ä¸ºAQSçš„ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„è¶…ç±»ï¼Œå¯ç”¨æ¥å®šä¹‰é”ä»¥åŠä¾èµ–äºæ’é˜Ÿé˜»å¡çº¿ç¨‹çš„å…¶ä»–åŒæ­¥å™¨ï¼›</span><br><span class="line">ReentrantLockï¼ŒReentrantReadWriteLockï¼ŒCountDownLatchï¼ŒCyclicBarrierå’ŒSemaphoreç­‰è¿™äº›ç±»éƒ½æ˜¯åŸºäºAQSç±»å®ç°çš„ã€‚</span><br><span class="line">AbstractQueuedLongSynchronizer ç±»æä¾›ç›¸åŒçš„åŠŸèƒ½ä½†æ‰©å±•äº†å¯¹åŒæ­¥çŠ¶æ€çš„ 64 ä½çš„æ”¯æŒã€‚</span><br><span class="line">ä¸¤è€…éƒ½æ‰©å±•äº†ç±» AbstractOwnableSynchronizerï¼ˆä¸€ä¸ªå¸®åŠ©è®°å½•å½“å‰ä¿æŒç‹¬å åŒæ­¥çš„çº¿ç¨‹çš„ç®€å•ç±»ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">04. LockSupport</span><br><span class="line">LockSupportæä¾›â€œåˆ›å»ºé”â€å’Œâ€œå…¶ä»–åŒæ­¥ç±»çš„åŸºæœ¬çº¿ç¨‹é˜»å¡åŸè¯­â€ã€‚ </span><br><span class="line">LockSupportçš„åŠŸèƒ½å’Œ&quot;Threadä¸­çš„Thread.suspend()å’ŒThread.resume()æœ‰ç‚¹ç±»ä¼¼&quot;ï¼ŒLockSupportä¸­çš„park() </span><br><span class="line">å’Œ unpark() çš„ä½œç”¨åˆ†åˆ«æ˜¯é˜»å¡çº¿ç¨‹å’Œè§£é™¤é˜»å¡çº¿ç¨‹ã€‚ä½†æ˜¯park()å’Œunpark()ä¸ä¼šé‡åˆ°â€œThread.suspend å’Œ Thread.resumeæ‰€å¯èƒ½å¼•å‘çš„æ­»é”â€é—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">05. Condition</span><br><span class="line">Conditionéœ€è¦å’ŒLockè”åˆä½¿ç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»£æ›¿Objectç›‘è§†å™¨æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡await(),signal()æ¥ä¼‘çœ /å”¤é†’çº¿ç¨‹ã€‚</span><br><span class="line">Condition æ¥å£æè¿°äº†å¯èƒ½ä¼šä¸é”æœ‰å…³è”çš„æ¡ä»¶å˜é‡ã€‚è¿™äº›å˜é‡åœ¨ç”¨æ³•ä¸Šä¸ä½¿ç”¨ Object.wait è®¿é—®çš„éšå¼ç›‘è§†å™¨ç±»ä¼¼ï¼Œ</span><br><span class="line">ä½†æä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼Œå•ä¸ª Lock å¯èƒ½ä¸å¤šä¸ª Condition å¯¹è±¡å…³è”ã€‚ä¸ºäº†é¿å…å…¼å®¹æ€§é—®é¢˜ï¼ŒCondition æ–¹æ³•çš„åç§°ä¸å¯¹åº”çš„ Object ç‰ˆæœ¬ä¸­çš„ä¸åŒã€‚</span><br><span class="line"></span><br><span class="line">06. ReentrantLock</span><br><span class="line">ReentrantLockæ˜¯ç‹¬å é”ã€‚æ‰€è°“ç‹¬å é”ï¼Œæ˜¯æŒ‡åªèƒ½è¢«ç‹¬è‡ªå é¢†ï¼Œå³åŒä¸€ä¸ªæ—¶é—´ç‚¹åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹é”è·å–åˆ°çš„é”ã€‚</span><br><span class="line">ReentrantLocké”åŒ…æ‹¬&quot;å…¬å¹³çš„ReentrantLock&quot;å’Œ&quot;éå…¬å¹³çš„ReentrantLock&quot;ã€‚&quot;å…¬å¹³çš„ReentrantLock&quot;æ˜¯æŒ‡</span><br><span class="line">&quot;ä¸åŒçº¿ç¨‹è·å–é”çš„æœºåˆ¶æ˜¯å…¬å¹³çš„&quot;ï¼Œè€Œ&quot;éå…¬å¹³çš„ReentrantLock&quot;åˆ™æ˜¯æŒ‡&quot;ä¸åŒçº¿ç¨‹è·å–é”çš„æœºåˆ¶æ˜¯éå…¬å¹³çš„&quot;ï¼ŒReentrantLockæ˜¯&quot;å¯é‡å…¥çš„é”&quot;ã€‚</span><br><span class="line">(01) ReentrantLockå®ç°äº†Lockæ¥å£ã€‚</span><br><span class="line">(02) ReentrantLockä¸­æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡syncï¼Œsyncæ˜¯Syncç±»å‹ï¼›Syncæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œä¸”å®ƒç»§æ‰¿äºAQSã€‚</span><br><span class="line">(03) ReentrantLockä¸­æœ‰&quot;å…¬å¹³é”ç±»&quot;FairSyncå’Œ&quot;éå…¬å¹³é”ç±»&quot;NonfairSyncï¼Œå®ƒä»¬éƒ½æ˜¯Syncçš„å­ç±»ã€‚</span><br><span class="line">ReentrantReadWriteLockä¸­syncå¯¹è±¡ï¼Œæ˜¯FairSyncä¸NonfairSyncä¸­çš„ä¸€ç§ï¼Œè¿™ä¹Ÿæ„å‘³ç€ReentrantLockæ˜¯&quot;å…¬å¹³é”&quot;æˆ–&quot;éå…¬å¹³é”&quot;ä¸­çš„ä¸€ç§ï¼ŒReentrantLocké»˜è®¤æ˜¯éå…¬å¹³é”ã€‚</span><br><span class="line"></span><br><span class="line">07. ReentrantReadWriteLock</span><br><span class="line">ReentrantReadWriteLockæ˜¯è¯»å†™é”æ¥å£ReadWriteLockçš„å®ç°ç±»ï¼Œå®ƒåŒ…æ‹¬å­ç±»ReadLockå’ŒWriteLockã€‚ReentrantLockæ˜¯å…±äº«é”ï¼Œè€ŒWriteLockæ˜¯ç‹¬å é”ã€‚</span><br><span class="line">(01) ReentrantReadWriteLockå®ç°äº†ReadWriteLockæ¥å£ã€‚</span><br><span class="line">(02) ReentrantReadWriteLockä¸­åŒ…å«syncå¯¹è±¡ï¼Œè¯»é”readerLockå’Œå†™é”writerLockã€‚è¯»é”ReadLockå’Œå†™é”WriteLockéƒ½å®ç°äº†Lockæ¥å£ã€‚</span><br><span class="line">(03) å’Œ&quot;ReentrantLock&quot;ä¸€æ ·ï¼Œsyncæ˜¯Syncç±»å‹ï¼›è€Œä¸”ï¼ŒSyncä¹Ÿæ˜¯ä¸€ä¸ªç»§æ‰¿äºAQSçš„æŠ½è±¡ç±»ã€‚Syncä¹ŸåŒ…æ‹¬&quot;å…¬å¹³é”&quot;FairSyncå’Œ&quot;éå…¬å¹³é”&quot;NonfairSyncã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">08. CountDownLatch</span><br><span class="line">CountDownLatchæ˜¯ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ï¼Œåœ¨å®Œæˆä¸€ç»„æ­£åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œä¹‹å‰ï¼Œå®ƒå…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ä¸€ç›´ç­‰å¾…ã€‚ </span><br><span class="line">CountDownLatchåŒ…å«äº†syncå¯¹è±¡ï¼Œsyncæ˜¯Syncç±»å‹ã€‚CountDownLatchçš„Syncæ˜¯å®ä¾‹ç±»ï¼Œå®ƒç»§æ‰¿äºAQSã€‚</span><br><span class="line"></span><br><span class="line">09. CyclicBarrier</span><br><span class="line">CyclicBarrieræ˜¯ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ï¼Œå…è®¸ä¸€ç»„çº¿ç¨‹äº’ç›¸ç­‰å¾…ï¼Œç›´åˆ°åˆ°è¾¾æŸä¸ªå…¬å…±å±éšœç‚¹ (common barrier point)ã€‚</span><br><span class="line">å› ä¸ºè¯¥ barrier åœ¨é‡Šæ”¾ç­‰å¾…çº¿ç¨‹åå¯ä»¥é‡ç”¨ï¼Œæ‰€ä»¥ç§°å®ƒä¸ºå¾ªç¯ çš„ barrierã€‚</span><br><span class="line">CyclicBarrieræ˜¯åŒ…å«äº†&quot;ReentrantLockå¯¹è±¡lock&quot;å’Œ&quot;Conditionå¯¹è±¡trip&quot;ï¼Œå®ƒæ˜¯é€šè¿‡ç‹¬å é”å®ç°çš„ã€‚</span><br><span class="line">CyclicBarrierå’ŒCountDownLatchçš„åŒºåˆ«æ˜¯ï¼š</span><br><span class="line">(01) CountDownLatchçš„ä½œç”¨æ˜¯å…è®¸1æˆ–Nä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å®Œæˆæ‰§è¡Œï¼›è€ŒCyclicBarrieråˆ™æ˜¯å…è®¸Nä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…ã€‚</span><br><span class="line">(02) CountDownLatchçš„è®¡æ•°å™¨æ— æ³•è¢«é‡ç½®ï¼›CyclicBarrierçš„è®¡æ•°å™¨å¯ä»¥è¢«é‡ç½®åä½¿ç”¨ï¼Œå› æ­¤å®ƒè¢«ç§°ä¸ºæ˜¯å¾ªç¯çš„barrierã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">10. Semaphore</span><br><span class="line">Semaphoreæ˜¯ä¸€ä¸ªè®¡æ•°ä¿¡å·é‡ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ª&quot;å…±äº«é”&quot;ã€‚</span><br><span class="line">ä¿¡å·é‡ç»´æŠ¤äº†ä¸€ä¸ªä¿¡å·é‡è®¸å¯é›†ã€‚çº¿ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨acquire()æ¥è·å–ä¿¡å·é‡çš„è®¸å¯ï¼›å½“ä¿¡å·é‡ä¸­æœ‰å¯ç”¨çš„è®¸å¯æ—¶ï¼Œçº¿ç¨‹èƒ½è·å–è¯¥è®¸å¯ï¼›å¦åˆ™çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°æœ‰å¯ç”¨çš„è®¸å¯ä¸ºæ­¢ã€‚ çº¿ç¨‹å¯ä»¥é€šè¿‡release()æ¥é‡Šæ”¾å®ƒæ‰€æŒæœ‰çš„ä¿¡å·é‡è®¸å¯ã€‚</span><br><span class="line">å’Œ&quot;ReentrantLock&quot;ä¸€æ ·ï¼ŒSemaphoreåŒ…å«äº†syncå¯¹è±¡ï¼Œsyncæ˜¯Syncç±»å‹ï¼›è€Œä¸”ï¼ŒSyncä¹Ÿæ˜¯ä¸€ä¸ªç»§æ‰¿äºAQSçš„æŠ½è±¡ç±»ã€‚Syncä¹ŸåŒ…æ‹¬&quot;å…¬å¹³ä¿¡å·é‡&quot;FairSyncå’Œ&quot;éå…¬å¹³ä¿¡å·é‡&quot;NonfairSyncã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>JUCä¸­çš„é›†åˆç±»</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. Listå’ŒSet</span><br><span class="line">JUCé›†åˆåŒ…ä¸­çš„Listå’ŒSetå®ç°ç±»åŒ…æ‹¬: CopyOnWriteArrayList, CopyOnWriteArraySetå’ŒConcurrentSkipListSetã€‚</span><br><span class="line">(01) CopyOnWriteArrayListç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„ArrayListï¼Œå®ƒå®ç°äº†Listæ¥å£ã€‚CopyOnWriteArrayListæ˜¯æ”¯æŒé«˜å¹¶å‘çš„ã€‚</span><br><span class="line">(02) CopyOnWriteArraySetç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„HashSetï¼Œå®ƒç»§æ‰¿äºAbstractSetç±»ã€‚CopyOnWriteArraySetå†…éƒ¨åŒ…å«ä¸€ä¸ªCopyOnWriteArrayListå¯¹è±¡ï¼Œå®ƒæ˜¯é€šè¿‡CopyOnWriteArrayListå®ç°çš„ã€‚</span><br><span class="line"></span><br><span class="line">2. Map</span><br><span class="line"></span><br><span class="line">JUCé›†åˆåŒ…ä¸­Mapçš„å®ç°ç±»åŒ…æ‹¬: ConcurrentHashMapå’ŒConcurrentSkipListMapã€‚ </span><br><span class="line">(01) ConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œè¡¨(ç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„HashMap)ï¼›å®ƒç»§æ‰¿äºAbstractMapç±»ï¼Œ</span><br><span class="line">å¹¶ä¸”å®ç°ConcurrentMapæ¥å£ã€‚ConcurrentHashMapæ˜¯é€šè¿‡â€œé”åˆ†æ®µâ€æ¥å®ç°çš„ï¼Œå®ƒæ”¯æŒå¹¶å‘ã€‚</span><br><span class="line"></span><br><span class="line">(02) ConcurrentSkipListMapæ˜¯çº¿ç¨‹å®‰å…¨çš„æœ‰åºçš„å“ˆå¸Œè¡¨(ç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„TreeMap); å®ƒç»§æ‰¿äºAbstractMapç±»ï¼Œå¹¶ä¸”å®ç°ConcurrentNavigableMapæ¥å£ã€‚</span><br><span class="line">ConcurrentSkipListMapæ˜¯é€šè¿‡â€œè·³è¡¨â€æ¥å®ç°çš„ï¼Œå®ƒæ”¯æŒå¹¶å‘ã€‚</span><br><span class="line"></span><br><span class="line">(03) ConcurrentSkipListSetæ˜¯çº¿ç¨‹å®‰å…¨çš„æœ‰åºçš„é›†åˆ(ç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„TreeSet)ï¼›å®ƒç»§æ‰¿äºAbstractSetï¼Œ</span><br><span class="line">å¹¶å®ç°äº†NavigableSetæ¥å£ã€‚ConcurrentSkipListSetæ˜¯é€šè¿‡ConcurrentSkipListMapå®ç°çš„ï¼Œå®ƒä¹Ÿæ”¯æŒå¹¶å‘ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. Queue</span><br><span class="line">JUCé›†åˆåŒ…ä¸­Queueçš„å®ç°ç±»åŒ…æ‹¬: ArrayBlockingQueue, LinkedBlockingQueue, LinkedBlockingDeque, ConcurrentLinkedQueueå’ŒConcurrentLinkedDequeã€‚ </span><br><span class="line">(01) ArrayBlockingQueueæ˜¯æ•°ç»„å®ç°çš„çº¿ç¨‹å®‰å…¨çš„æœ‰ç•Œçš„é˜»å¡é˜Ÿåˆ—ã€‚</span><br><span class="line"></span><br><span class="line">(02) LinkedBlockingQueueæ˜¯å•å‘é“¾è¡¨å®ç°çš„(æŒ‡å®šå¤§å°)é˜»å¡é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—æŒ‰ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æ’åºå…ƒç´ ã€‚</span><br><span class="line">(03) LinkedBlockingDequeæ˜¯åŒå‘é“¾è¡¨å®ç°çš„(æŒ‡å®šå¤§å°)åŒå‘å¹¶å‘é˜»å¡é˜Ÿåˆ—ï¼Œè¯¥é˜»å¡é˜Ÿåˆ—åŒæ—¶æ”¯æŒFIFOå’ŒFILOä¸¤ç§æ“ä½œæ–¹å¼ã€‚</span><br><span class="line"></span><br><span class="line">(04) ConcurrentLinkedQueueæ˜¯å•å‘é“¾è¡¨å®ç°çš„æ— ç•Œé˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—æŒ‰ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æ’åºå…ƒç´ ã€‚</span><br><span class="line">(05) ConcurrentLinkedDequeæ˜¯åŒå‘é“¾è¡¨å®ç°çš„æ— ç•Œé˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—åŒæ—¶æ”¯æŒFIFOå’ŒFILOä¸¤ç§æ“ä½œæ–¹å¼ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>CopyOnWriteArrayListä»‹ç»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">å®ƒç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„ArrayListã€‚å’ŒArrayListä¸€æ ·ï¼Œå®ƒæ˜¯ä¸ªå¯å˜æ•°ç»„ï¼›ä½†æ˜¯å’ŒArrayListä¸åŒçš„æ—¶ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</span><br><span class="line">1. å®ƒæœ€é€‚åˆäºå…·æœ‰ä»¥ä¸‹ç‰¹å¾çš„åº”ç”¨ç¨‹åºï¼šList å¤§å°é€šå¸¸ä¿æŒå¾ˆå°ï¼Œåªè¯»æ“ä½œè¿œå¤šäºå¯å˜æ“ä½œï¼Œéœ€è¦åœ¨éå†æœŸé—´é˜²æ­¢çº¿ç¨‹é—´çš„å†²çªã€‚</span><br><span class="line">2. å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</span><br><span class="line">3. å› ä¸ºé€šå¸¸éœ€è¦å¤åˆ¶æ•´ä¸ªåŸºç¡€æ•°ç»„ï¼Œæ‰€ä»¥å¯å˜æ“ä½œï¼ˆadd()ã€set() å’Œ remove() ç­‰ç­‰ï¼‰çš„å¼€é”€å¾ˆå¤§ã€‚</span><br><span class="line">4. è¿­ä»£å™¨æ”¯æŒhasNext(), next()ç­‰ä¸å¯å˜æ“ä½œï¼Œä½†ä¸æ”¯æŒå¯å˜ remove()ç­‰æ“ä½œã€‚</span><br><span class="line">5. ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œéå†çš„é€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶ä¸”ä¸ä¼šä¸å…¶ä»–çº¿ç¨‹å‘ç”Ÿå†²çªã€‚åœ¨æ„é€ è¿­ä»£å™¨æ—¶ï¼Œè¿­ä»£å™¨ä¾èµ–äºä¸å˜çš„æ•°ç»„å¿«ç…§ã€‚</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">1. CopyOnWriteArrayListå®ç°äº†Listæ¥å£ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ã€‚</span><br><span class="line">2. CopyOnWriteArrayListåŒ…å«äº†æˆå‘˜lockã€‚æ¯ä¸€ä¸ªCopyOnWriteArrayListéƒ½å’Œä¸€ä¸ªäº’æ–¥é”lockç»‘å®šï¼Œé€šè¿‡lockï¼Œå®ç°äº†å¯¹CopyOnWriteArrayListçš„äº’æ–¥è®¿é—®ã€‚</span><br><span class="line">3. CopyOnWriteArrayListåŒ…å«äº†æˆå‘˜arrayæ•°ç»„ï¼Œè¿™è¯´æ˜CopyOnWriteArrayListæœ¬è´¨ä¸Šé€šè¿‡æ•°ç»„å®ç°çš„ã€‚</span><br><span class="line"></span><br><span class="line">ä¸‹é¢ä»â€œåŠ¨æ€æ•°ç»„â€å’Œâ€œçº¿ç¨‹å®‰å…¨â€ä¸¤ä¸ªæ–¹é¢è¿›ä¸€æ­¥å¯¹CopyOnWriteArrayListçš„åŸç†è¿›è¡Œè¯´æ˜ã€‚</span><br><span class="line">1. CopyOnWriteArrayListçš„â€œåŠ¨æ€æ•°ç»„â€æœºåˆ¶ -- å®ƒå†…éƒ¨æœ‰ä¸ªâ€œvolatileæ•°ç»„â€(array)æ¥ä¿æŒæ•°æ®ã€‚åœ¨â€œæ·»åŠ /ä¿®æ”¹/åˆ é™¤â€æ•°æ®æ—¶ï¼Œéƒ½ä¼šæ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å°†æ›´æ–°åçš„æ•°æ®æ‹·è´åˆ°æ–°å»ºçš„æ•°ç»„ä¸­ï¼Œæœ€åå†å°†è¯¥æ•°ç»„èµ‹å€¼ç»™â€œvolatileæ•°ç»„â€ã€‚è¿™å°±æ˜¯å®ƒå«åšCopyOnWriteArrayListçš„åŸå› ï¼CopyOnWriteArrayListå°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„åŠ¨æ€æ•°ç»„ï¼›ä¸è¿‡æ­£ç”±äºå®ƒåœ¨â€œæ·»åŠ /ä¿®æ”¹/åˆ é™¤â€æ•°æ®æ—¶ï¼Œéƒ½ä¼šæ–°å»ºæ•°ç»„ï¼Œæ‰€ä»¥æ¶‰åŠåˆ°ä¿®æ”¹æ•°æ®çš„æ“ä½œï¼ŒCopyOnWriteArrayListæ•ˆç‡å¾ˆ</span><br><span class="line">ä½ï¼›ä½†æ˜¯å•å•åªæ˜¯è¿›è¡Œéå†æŸ¥æ‰¾çš„è¯ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚</span><br><span class="line">2. CopyOnWriteArrayListçš„â€œçº¿ç¨‹å®‰å…¨â€æœºåˆ¶ -- æ˜¯é€šè¿‡volatileå’Œäº’æ–¥é”æ¥å®ç°çš„ã€‚</span><br><span class="line">(01) CopyOnWriteArrayListæ˜¯é€šè¿‡â€œvolatileæ•°ç»„â€æ¥ä¿å­˜æ•°æ®çš„ã€‚ä¸€ä¸ªçº¿ç¨‹è¯»å–volatileæ•°ç»„æ—¶ï¼Œæ€»èƒ½çœ‹åˆ°å…¶å®ƒçº¿ç¨‹å¯¹è¯¥volatileå˜é‡æœ€åçš„å†™å…¥ï¼›</span><br><span class="line">å°±è¿™æ ·ï¼Œé€šè¿‡volatileæä¾›äº†â€œè¯»å–åˆ°çš„æ•°æ®æ€»æ˜¯æœ€æ–°çš„â€è¿™ä¸ªæœºåˆ¶çš„ä¿è¯ã€‚</span><br><span class="line">(02) CopyOnWriteArrayListé€šè¿‡äº’æ–¥é”æ¥ä¿æŠ¤æ•°æ®ã€‚åœ¨â€œæ·»åŠ /ä¿®æ”¹/åˆ é™¤â€æ•°æ®æ—¶ï¼Œä¼šå…ˆâ€œè·å–äº’æ–¥é”â€ï¼Œå†ä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œå…ˆå°†æ•°æ®æ›´æ–°åˆ°â€œvolatileæ•°ç»„â€ä¸­ï¼Œ</span><br><span class="line">ç„¶åå†â€œé‡Šæ”¾äº’æ–¥é”â€ï¼›è¿™æ ·ï¼Œå°±è¾¾åˆ°äº†ä¿æŠ¤æ•°æ®çš„ç›®çš„ã€‚ </span><br><span class="line"></span><br><span class="line">public CopyOnWriteArrayList() &#123;</span><br><span class="line">    setArray(new Object[0]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public CopyOnWriteArrayList(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">    Object[] elements = c.toArray();</span><br><span class="line">    if (elements.getClass() != Object[].class)</span><br><span class="line">        elements = Arrays.copyOf(elements, elements.length, Object[].class);</span><br><span class="line">    setArray(elements);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public CopyOnWriteArrayList(E[] toCopyIn) &#123;</span><br><span class="line">    setArray(Arrays.copyOf(toCopyIn, toCopyIn.length, Object[].class));</span><br><span class="line">&#125; </span><br><span class="line">è¯´æ˜ï¼šè¿™3ä¸ªæ„é€ å‡½æ•°éƒ½è°ƒç”¨äº†setArray()ï¼ŒsetArray()çš„æºç å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">private volatile transient Object[] array;</span><br><span class="line"></span><br><span class="line">final Object[] getArray() &#123;</span><br><span class="line">    return array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">final void setArray(Object[] a) &#123;</span><br><span class="line">    array = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼šsetArray()çš„ä½œç”¨æ˜¯ç»™arrayèµ‹å€¼ï¼›å…¶ä¸­ï¼Œarrayæ˜¯volatile transient Object[]ç±»å‹ï¼Œå³arrayæ˜¯â€œvolatileæ•°ç»„â€ã€‚</span><br><span class="line">å…³äºvolatileå…³é”®å­—ï¼Œæˆ‘ä»¬çŸ¥é“â€œvolatileèƒ½è®©å˜é‡å˜å¾—å¯è§â€ï¼Œå³å¯¹ä¸€ä¸ªvolatileå˜é‡çš„è¯»ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°ï¼ˆä»»æ„çº¿ç¨‹ï¼‰å¯¹è¿™ä¸ªvolatileå˜é‡æœ€åçš„å†™å…¥ã€‚</span><br><span class="line">æ­£åœ¨ç”±äºè¿™ç§ç‰¹æ€§ï¼Œæ¯æ¬¡æ›´æ–°äº†â€œvolatileæ•°ç»„â€ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°å¯¹å®ƒæ‰€åšçš„æ›´æ–°ã€‚</span><br><span class="line">å…³äºtransientå…³é”®å­—ï¼Œå®ƒæ˜¯åœ¨åºåˆ—åŒ–ä¸­æ‰èµ·ä½œç”¨ï¼Œtransientå˜é‡ä¸ä¼šè¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚transientä¸æ˜¯æœ¬æ–‡å…³æ³¨çš„é‡ç‚¹ï¼Œäº†è§£å³å¯ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. æ·»åŠ </span><br><span class="line"></span><br><span class="line">ä»¥add(E e)ä¸ºä¾‹ï¼Œæ¥å¯¹â€œCopyOnWriteArrayListçš„æ·»åŠ æ“ä½œâ€è¿›è¡Œè¯´æ˜ã€‚ä¸‹é¢æ˜¯add(E e)çš„ä»£ç ï¼š</span><br><span class="line">public boolean add(E e) &#123;</span><br><span class="line">    final ReentrantLock lock = this.lock;</span><br><span class="line">    // è·å–â€œé”â€</span><br><span class="line">    lock.lock();</span><br><span class="line">    try &#123;</span><br><span class="line">        // è·å–åŸå§‹â€volatileæ•°ç»„â€œä¸­çš„æ•°æ®å’Œæ•°æ®é•¿åº¦ã€‚</span><br><span class="line">        Object[] elements = getArray();</span><br><span class="line">        int len = elements.length;</span><br><span class="line">        // æ–°å»ºä¸€ä¸ªæ•°ç»„newElementsï¼Œå¹¶å°†åŸå§‹æ•°æ®æ‹·è´åˆ°newElementsä¸­ï¼›</span><br><span class="line">        // newElementsæ•°ç»„çš„é•¿åº¦=â€œåŸå§‹æ•°ç»„çš„é•¿åº¦â€+1</span><br><span class="line">        Object[] newElements = Arrays.copyOf(elements, len + 1);</span><br><span class="line">        // å°†â€œæ–°å¢åŠ çš„å…ƒç´ â€ä¿å­˜åˆ°newElementsä¸­ã€‚</span><br><span class="line">        newElements[len] = e;</span><br><span class="line">        // å°†newElementsèµ‹å€¼ç»™â€volatileæ•°ç»„â€œã€‚</span><br><span class="line">        setArray(newElements);</span><br><span class="line">        return true;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        // é‡Šæ”¾â€œé”â€</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">add(E e)çš„ä½œç”¨å°±æ˜¯å°†æ•°æ®eæ·»åŠ åˆ°â€volatileæ•°ç»„â€œä¸­ã€‚å®ƒçš„å®ç°æ–¹å¼æ˜¯ï¼Œæ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ¥ç€å°†åŸå§‹çš„â€volatileæ•°ç»„â€œçš„æ•°æ®æ‹·è´åˆ°æ–°æ•°ç»„ä¸­ï¼Œ</span><br><span class="line">ç„¶åå°†æ–°å¢æ•°æ®ä¹Ÿæ·»åŠ åˆ°æ–°æ•°ç»„ä¸­ï¼›æœ€åï¼Œå°†æ–°æ•°ç»„èµ‹å€¼ç»™â€volatileæ•°ç»„â€œã€‚</span><br><span class="line">åœ¨add(E e)ä¸­æœ‰ä¸¤ç‚¹éœ€è¦å…³æ³¨ã€‚</span><br><span class="line">ç¬¬ä¸€ï¼Œåœ¨â€æ·»åŠ æ“ä½œâ€œå¼€å§‹å‰ï¼Œè·å–ç‹¬å é”(lock)ï¼Œè‹¥æ­¤æ—¶æœ‰éœ€è¦çº¿ç¨‹è¦è·å–é”ï¼Œåˆ™å¿…é¡»ç­‰å¾…ï¼›åœ¨æ“ä½œå®Œæ¯•åï¼Œé‡Šæ”¾ç‹¬å é”(lock)ï¼Œ</span><br><span class="line">æ­¤æ—¶å…¶å®ƒçº¿ç¨‹æ‰èƒ½è·å–é”ã€‚é€šè¿‡ç‹¬å é”ï¼Œæ¥é˜²æ­¢å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹æ•°æ®ï¼lockçš„å®šä¹‰å¦‚ä¸‹ï¼š</span><br><span class="line">transient final ReentrantLock lock = new ReentrantLock();</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒï¼Œæ“ä½œå®Œæ¯•æ—¶ï¼Œä¼šé€šè¿‡setArray()æ¥æ›´æ–°â€volatileæ•°ç»„â€œã€‚è€Œä¸”ï¼Œå‰é¢æˆ‘ä»¬æè¿‡â€å³å¯¹ä¸€ä¸ªvolatileå˜é‡çš„è¯»ï¼Œ</span><br><span class="line">æ€»æ˜¯èƒ½çœ‹åˆ°ï¼ˆä»»æ„çº¿ç¨‹ï¼‰å¯¹è¿™ä¸ªvolatileå˜é‡æœ€åçš„å†™å…¥â€œï¼›è¿™æ ·ï¼Œæ¯æ¬¡æ·»åŠ å…ƒç´ ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°æ–°æ·»åŠ çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. è·å–</span><br><span class="line"></span><br><span class="line">ä»¥get(int index)ä¸ºä¾‹ï¼Œæ¥å¯¹â€œCopyOnWriteArrayListçš„åˆ é™¤æ“ä½œâ€è¿›è¡Œè¯´æ˜ã€‚ä¸‹é¢æ˜¯get(int index)çš„ä»£ç ï¼š</span><br><span class="line">public E get(int index) &#123;</span><br><span class="line">    return get(getArray(), index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private E get(Object[] a, int index) &#123;</span><br><span class="line">    return (E) a[index];</span><br><span class="line">&#125;</span><br><span class="line">è¯´æ˜ï¼šget(int index)çš„å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯è¿”å›â€volatileæ•°ç»„â€œä¸­çš„ç¬¬indexä¸ªå…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4. åˆ é™¤</span><br><span class="line"></span><br><span class="line">ä»¥remove(int index)ä¸ºä¾‹ï¼Œæ¥å¯¹â€œCopyOnWriteArrayListçš„åˆ é™¤æ“ä½œâ€è¿›è¡Œè¯´æ˜ã€‚ä¸‹é¢æ˜¯remove(int index)çš„ä»£ç ï¼š</span><br><span class="line">public E remove(int index) &#123;</span><br><span class="line">    final ReentrantLock lock = this.lock;</span><br><span class="line">    // è·å–â€œé”â€</span><br><span class="line">    lock.lock();</span><br><span class="line">    try &#123;</span><br><span class="line">        // è·å–åŸå§‹â€volatileæ•°ç»„â€œä¸­çš„æ•°æ®å’Œæ•°æ®é•¿åº¦ã€‚</span><br><span class="line">        Object[] elements = getArray();</span><br><span class="line">        int len = elements.length;</span><br><span class="line">        // è·å–elementsæ•°ç»„ä¸­çš„ç¬¬indexä¸ªæ•°æ®ã€‚</span><br><span class="line">        E oldValue = get(elements, index);</span><br><span class="line">        int numMoved = len - index - 1;</span><br><span class="line">        // å¦‚æœè¢«åˆ é™¤çš„æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ç›´æ¥é€šè¿‡Arrays.copyOf()è¿›è¡Œå¤„ç†ï¼Œè€Œä¸éœ€è¦æ–°å»ºæ•°ç»„ã€‚</span><br><span class="line">        // å¦åˆ™ï¼Œæ–°å»ºæ•°ç»„ï¼Œç„¶åå°†â€volatileæ•°ç»„ä¸­è¢«åˆ é™¤å…ƒç´ ä¹‹å¤–çš„å…¶å®ƒå…ƒç´ â€œæ‹·è´åˆ°æ–°æ•°ç»„ä¸­ï¼›æœ€åï¼Œå°†æ–°æ•°ç»„èµ‹å€¼ç»™â€volatileæ•°ç»„â€œã€‚</span><br><span class="line">        if (numMoved == 0)</span><br><span class="line">            setArray(Arrays.copyOf(elements, len - 1));</span><br><span class="line">        else &#123;</span><br><span class="line">            Object[] newElements = new Object[len - 1];</span><br><span class="line">            System.arraycopy(elements, 0, newElements, 0, index);</span><br><span class="line">            System.arraycopy(elements, index + 1, newElements, index,</span><br><span class="line">                             numMoved);</span><br><span class="line">            setArray(newElements);</span><br><span class="line">        &#125;</span><br><span class="line">        return oldValue;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        // é‡Šæ”¾â€œé”â€</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">è¯´æ˜ï¼šremove(int index)çš„ä½œç”¨å°±æ˜¯å°†â€volatileæ•°ç»„â€œä¸­ç¬¬indexä¸ªå…ƒç´ åˆ é™¤ã€‚å®ƒçš„å®ç°æ–¹å¼æ˜¯ï¼Œå¦‚æœè¢«åˆ é™¤çš„æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ç›´æ¥é€šè¿‡Arrays.copyOf()è¿›è¡Œå¤„ç†ï¼Œè€Œä¸éœ€è¦æ–°å»ºæ•°ç»„ã€‚å¦åˆ™ï¼Œæ–°å»ºæ•°ç»„ï¼Œç„¶åå°†â€volatileæ•°ç»„ä¸­è¢«åˆ é™¤å…ƒç´ ä¹‹å¤–çš„å…¶å®ƒå…ƒç´ â€œæ‹·è´åˆ°æ–°æ•°ç»„ä¸­ï¼›æœ€åï¼Œå°†æ–°æ•°ç»„èµ‹å€¼ç»™â€volatileæ•°ç»„â€œã€‚</span><br><span class="line">å’Œadd(E e)ä¸€æ ·ï¼Œremove(int index)ä¹Ÿæ˜¯â€åœ¨æ“ä½œä¹‹å‰ï¼Œè·å–ç‹¬å é”ï¼›æ“ä½œå®Œæˆä¹‹åï¼Œé‡Šæ”¾ç‹¬å æ˜¯â€œï¼›å¹¶ä¸”â€åœ¨æ“ä½œå®Œæˆæ—¶ï¼Œä¼šé€šè¿‡å°†æ•°æ®æ›´æ–°åˆ°volatileæ•°ç»„ä¸­â€œã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">5. éå†</span><br><span class="line"></span><br><span class="line">ä»¥iterator()ä¸ºä¾‹ï¼Œæ¥å¯¹â€œCopyOnWriteArrayListçš„éå†æ“ä½œâ€è¿›è¡Œè¯´æ˜ã€‚ä¸‹é¢æ˜¯iterator()çš„ä»£ç ï¼š</span><br><span class="line">public Iterator&lt;E&gt; iterator() &#123;</span><br><span class="line">    return new COWIterator&lt;E&gt;(getArray(), 0);</span><br><span class="line">&#125;</span><br><span class="line">è¯´æ˜ï¼šiterator()ä¼šè¿”å›COWIteratorå¯¹è±¡ã€‚</span><br><span class="line">COWIteratorå®ç°é¢ListIteratoræ¥å£ï¼Œå®ƒçš„æºç å¦‚ä¸‹ï¼š</span><br><span class="line">è¯´æ˜ï¼šCOWIteratorä¸æ”¯æŒä¿®æ”¹å…ƒç´ çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¯¹äºremove(),set(),add()ç­‰æ“ä½œï¼ŒCOWIteratoréƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼</span><br><span class="line">å¦å¤–ï¼Œéœ€è¦æåˆ°çš„ä¸€ç‚¹æ˜¯ï¼ŒCopyOnWriteArrayListè¿”å›è¿­ä»£å™¨ä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ï¼Œå³å®ƒä¸æ˜¯fail-fastæœºåˆ¶çš„ï¼</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>CopyOnWriteArraySetä»‹ç»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„æ— åºçš„é›†åˆï¼Œå¯ä»¥å°†å®ƒç†è§£æˆçº¿ç¨‹å®‰å…¨çš„HashSetã€‚æœ‰æ„æ€çš„æ˜¯ï¼ŒCopyOnWriteArraySetå’ŒHashSetè™½ç„¶éƒ½ç»§æ‰¿äºå…±åŒçš„çˆ¶ç±»AbstractSetï¼›</span><br><span class="line">ä½†æ˜¯ï¼ŒHashSetæ˜¯é€šè¿‡â€œæ•£åˆ—è¡¨(HashMap)â€å®ç°çš„ï¼Œè€ŒCopyOnWriteArraySetåˆ™æ˜¯é€šè¿‡â€œåŠ¨æ€æ•°ç»„(CopyOnWriteArrayList)â€å®ç°çš„ï¼Œå¹¶ä¸æ˜¯æ•£åˆ—è¡¨ã€‚</span><br><span class="line">å’ŒCopyOnWriteArrayListç±»ä¼¼ï¼ŒCopyOnWriteArraySetå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</span><br><span class="line">1. å®ƒæœ€é€‚åˆäºå…·æœ‰ä»¥ä¸‹ç‰¹å¾çš„åº”ç”¨ç¨‹åºï¼šSet å¤§å°é€šå¸¸ä¿æŒå¾ˆå°ï¼Œåªè¯»æ“ä½œè¿œå¤šäºå¯å˜æ“ä½œï¼Œéœ€è¦åœ¨éå†æœŸé—´é˜²æ­¢çº¿ç¨‹é—´çš„å†²çªã€‚</span><br><span class="line">2. å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</span><br><span class="line">3. å› ä¸ºé€šå¸¸éœ€è¦å¤åˆ¶æ•´ä¸ªåŸºç¡€æ•°ç»„ï¼Œæ‰€ä»¥å¯å˜æ“ä½œï¼ˆadd()ã€set() å’Œ remove() ç­‰ç­‰ï¼‰çš„å¼€é”€å¾ˆå¤§ã€‚</span><br><span class="line">4. è¿­ä»£å™¨æ”¯æŒhasNext(), next()ç­‰ä¸å¯å˜æ“ä½œï¼Œä½†ä¸æ”¯æŒå¯å˜ remove()ç­‰ æ“ä½œã€‚</span><br><span class="line">5. ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œéå†çš„é€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶ä¸”ä¸ä¼šä¸å…¶ä»–çº¿ç¨‹å‘ç”Ÿå†²çªã€‚åœ¨æ„é€ è¿­ä»£å™¨æ—¶ï¼Œè¿­ä»£å™¨ä¾èµ–äºä¸å˜çš„æ•°ç»„å¿«ç…§ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">1. CopyOnWriteArraySetç»§æ‰¿äºAbstractSetï¼Œè¿™å°±æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªé›†åˆã€‚</span><br><span class="line">2. CopyOnWriteArraySetåŒ…å«CopyOnWriteArrayListå¯¹è±¡ï¼Œå®ƒæ˜¯é€šè¿‡CopyOnWriteArrayListå®ç°çš„ã€‚è€ŒCopyOnWriteArrayListæœ¬è´¨æ˜¯ä¸ªåŠ¨æ€æ•°ç»„é˜Ÿåˆ—ï¼Œ</span><br><span class="line">æ‰€ä»¥CopyOnWriteArraySetç›¸å½“äºé€šè¿‡é€šè¿‡åŠ¨æ€æ•°ç»„å®ç°çš„â€œé›†åˆâ€ï¼ CopyOnWriteArrayListä¸­å…è®¸æœ‰é‡å¤çš„å…ƒç´ ï¼›</span><br><span class="line">ä½†æ˜¯ï¼ŒCopyOnWriteArraySetæ˜¯ä¸€ä¸ªé›†åˆï¼Œæ‰€ä»¥å®ƒä¸èƒ½æœ‰é‡å¤é›†åˆã€‚å› æ­¤ï¼ŒCopyOnWriteArrayListé¢å¤–æä¾›äº†addIfAbsent()å’ŒaddAllAbsent()è¿™ä¸¤ä¸ªæ·»åŠ å…ƒç´ çš„APIï¼Œ</span><br><span class="line">é€šè¿‡è¿™äº›APIæ¥æ·»åŠ å…ƒç´ æ—¶ï¼Œåªæœ‰å½“å…ƒç´ ä¸å­˜åœ¨æ—¶æ‰æ‰§è¡Œæ·»åŠ æ“ä½œï¼</span><br><span class="line">è‡³äºCopyOnWriteArraySetçš„â€œçº¿ç¨‹å®‰å…¨â€æœºåˆ¶ï¼Œå’ŒCopyOnWriteArrayListä¸€æ ·ï¼Œæ˜¯é€šè¿‡volatileå’Œäº’æ–¥é”æ¥å®ç°çš„ã€‚</span><br><span class="line">è¿™ä¸ªåœ¨å‰ä¸€ç« èŠ‚ä»‹ç»CopyOnWriteArrayListæ—¶æ•°æ®ç»“æ„æ—¶ï¼Œå·²ç»è¿›è¡Œäº†è¯´æ˜ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤å™è¿°äº†ã€‚</span><br></pre></td></tr></table></figure>

<p>ConcurrentHashMapä»‹ç»</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œè¡¨ã€‚HashMap, Hashtable, ConcurrentHashMapä¹‹é—´çš„å…³è”å¦‚ä¸‹ï¼š</span><br><span class="line"> </span><br><span class="line">HashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œè¡¨ï¼Œå¸¸ç”¨äºå•çº¿ç¨‹ç¨‹åºä¸­ã€‚</span><br><span class="line"> </span><br><span class="line">Hashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œè¡¨ï¼Œå®ƒæ˜¯é€šè¿‡synchronizedæ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼›å³ï¼Œå¤šçº¿ç¨‹é€šè¿‡åŒä¸€ä¸ªâ€œå¯¹è±¡çš„åŒæ­¥é”â€æ¥å®ç°å¹¶å‘æ§åˆ¶ã€‚</span><br><span class="line">Hashtableåœ¨çº¿ç¨‹ç«äº‰æ¿€çƒˆæ—¶ï¼Œæ•ˆç‡æ¯”è¾ƒä½(æ­¤æ—¶å»ºè®®ä½¿ç”¨ConcurrentHashMap)ï¼å› ä¸ºå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®Hashtableçš„åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹å°±è®¿é—®Hashtableçš„åŒæ­¥æ–¹æ³•æ—¶ï¼Œå¯èƒ½ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚</span><br><span class="line"> </span><br><span class="line">ConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œè¡¨ï¼Œå®ƒæ˜¯é€šè¿‡â€œé”åˆ†æ®µâ€æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ã€‚ConcurrentHashMapå°†å“ˆå¸Œè¡¨åˆ†æˆè®¸å¤šç‰‡æ®µ(Segment)ï¼Œ</span><br><span class="line">æ¯ä¸€ä¸ªç‰‡æ®µé™¤äº†ä¿å­˜å“ˆå¸Œè¡¨ä¹‹å¤–ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªâ€œå¯é‡å…¥çš„äº’æ–¥é”â€(ReentrantLock)ã€‚å¤šçº¿ç¨‹å¯¹åŒä¸€ä¸ªç‰‡æ®µçš„è®¿é—®ï¼Œæ˜¯äº’æ–¥çš„ï¼›ä½†æ˜¯ï¼Œå¯¹äºä¸åŒç‰‡æ®µçš„è®¿é—®ï¼Œå´æ˜¯å¯ä»¥åŒæ­¥è¿›è¡Œçš„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(01) ConcurrentHashMap ç»§æ‰¿äºAbstractMapæŠ½è±¡ç±»ã€‚</span><br><span class="line">(02) Segmentæ˜¯ConcurrentHashMapä¸­çš„å†…éƒ¨ç±»ï¼Œå®ƒå°±æ˜¯ConcurrentHashMapä¸­çš„â€œé”åˆ†æ®µâ€å¯¹åº”çš„å­˜å‚¨ç»“æ„ã€‚</span><br><span class="line">ConcurrentHashMapä¸Segmentæ˜¯ç»„åˆå…³ç³»ï¼Œ1ä¸ªConcurrentHashMapå¯¹è±¡åŒ…å«è‹¥å¹²ä¸ªSegmentå¯¹è±¡ã€‚åœ¨ä»£ç ä¸­ï¼Œè¿™è¡¨ç°ä¸ºConcurrentHashMapç±»ä¸­å­˜åœ¨â€œSegmentæ•°ç»„â€æˆå‘˜ã€‚</span><br><span class="line">(03) Segmentç±»ç»§æ‰¿äºReentrantLockç±»ï¼Œæ‰€ä»¥Segmentæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é”ã€‚</span><br><span class="line">(04) HashEntryä¹Ÿæ˜¯ConcurrentHashMapçš„å†…éƒ¨ç±»ï¼Œæ˜¯å•å‘é“¾è¡¨èŠ‚ç‚¹ï¼Œå­˜å‚¨ç€key-valueé”®å€¼å¯¹ã€‚Segmentä¸HashEntryæ˜¯ç»„åˆå…³ç³»ï¼ŒSegmentç±»ä¸­å­˜åœ¨â€œHashEntryæ•°ç»„â€æˆå‘˜ï¼Œâ€œHashEntryæ•°ç»„â€ä¸­çš„æ¯ä¸ªHashEntryå°±æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚</span><br><span class="line"></span><br><span class="line">å¯¹äºå¤šçº¿ç¨‹è®¿é—®å¯¹ä¸€ä¸ªâ€œå“ˆå¸Œè¡¨å¯¹è±¡â€ç«äº‰èµ„æºï¼ŒHashtableæ˜¯é€šè¿‡ä¸€æŠŠé”æ¥æ§åˆ¶å¹¶å‘ï¼›è€ŒConcurrentHashMapåˆ™æ˜¯å°†å“ˆå¸Œè¡¨åˆ†æˆè®¸å¤šç‰‡æ®µï¼Œ</span><br><span class="line">å¯¹äºæ¯ä¸€ä¸ªç‰‡æ®µåˆ†åˆ«é€šè¿‡ä¸€ä¸ªäº’æ–¥é”æ¥æ§åˆ¶å¹¶å‘ã€‚ConcurrentHashMapå¯¹å¹¶å‘çš„æ§åˆ¶æ›´åŠ ç»†è…»ï¼Œå®ƒä¹Ÿæ›´åŠ é€‚åº”äºé«˜å¹¶å‘åœºæ™¯ï¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>Javaæ˜¯å¦‚ä½•å®ç°è·¨å¹³å°çš„ï¼Ÿ</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">è·¨å¹³å°æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿè¿™å°±è¦è°ˆåŠJavaè™šæ‹Ÿæœºï¼ˆJava Virtual Machineï¼Œç®€ç§° JVMï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">JVMä¹Ÿæ˜¯ä¸€ä¸ªè½¯ä»¶ï¼Œä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬ç¼–å†™çš„Javaæºç ï¼Œç¼–è¯‘åä¼šç”Ÿæˆä¸€ç§ .class æ–‡ä»¶ï¼Œç§°ä¸ºå­—èŠ‚ç æ–‡ä»¶ã€‚Javaè™šæ‹Ÿæœºå°±æ˜¯è´Ÿè´£å°†å­—èŠ‚ç æ–‡ä»¶ç¿»è¯‘æˆç‰¹å®šå¹³å°ä¸‹çš„æœºå™¨ç ç„¶åè¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦åœ¨ä¸åŒå¹³å°ä¸Šå®‰è£…å¯¹åº”çš„JVMï¼Œå°±å¯ä»¥è¿è¡Œå­—èŠ‚ç æ–‡ä»¶ï¼Œè¿è¡Œæˆ‘ä»¬ç¼–å†™çš„Javaç¨‹åºã€‚</span><br><span class="line"></span><br><span class="line">è€Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™çš„Javaç¨‹åºæ²¡æœ‰åšä»»ä½•æ”¹å˜ï¼Œä»…ä»…æ˜¯é€šè¿‡JVMè¿™ä¸€â€ä¸­é—´å±‚â€œï¼Œå°±èƒ½åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œï¼ŒçœŸæ­£å®ç°äº†â€ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œâ€œçš„ç›®çš„ã€‚</span><br><span class="line"></span><br><span class="line">JVMæ˜¯ä¸€ä¸ªâ€æ¡¥æ¢â€œï¼Œæ˜¯ä¸€ä¸ªâ€ä¸­é—´ä»¶â€œï¼Œæ˜¯å®ç°è·¨å¹³å°çš„å…³é”®ï¼ŒJavaä»£ç é¦–å…ˆè¢«ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼Œå†ç”±JVMå°†å­—èŠ‚ç æ–‡ä»¶ç¿»è¯‘æˆæœºå™¨è¯­è¨€ï¼Œä»è€Œè¾¾åˆ°è¿è¡ŒJavaç¨‹åºçš„ç›®çš„ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šç¼–è¯‘çš„ç»“æœä¸æ˜¯ç”Ÿæˆæœºå™¨ç ï¼Œè€Œæ˜¯ç”Ÿæˆå­—èŠ‚ç ï¼Œå­—èŠ‚ç ä¸èƒ½ç›´æ¥è¿è¡Œï¼Œå¿…é¡»é€šè¿‡JVMç¿»è¯‘æˆæœºå™¨ç æ‰èƒ½è¿è¡Œã€‚ä¸åŒå¹³å°ä¸‹ç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”±JVMç¿»è¯‘æˆçš„æœºå™¨ç å´ä¸ä¸€æ ·ã€‚</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œè¿è¡ŒJavaç¨‹åºå¿…é¡»æœ‰JVMçš„æ”¯æŒï¼Œå› ä¸ºç¼–è¯‘çš„ç»“æœä¸æ˜¯æœºå™¨ç ï¼Œå¿…é¡»è¦ç»è¿‡JVMçš„å†æ¬¡ç¿»è¯‘æ‰èƒ½æ‰§è¡Œã€‚å³ä½¿ä½ å°†Javaç¨‹åºæ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆä¾‹å¦‚ .exeï¼‰ï¼Œä»ç„¶éœ€è¦JVMçš„æ”¯æŒã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šè·¨å¹³å°çš„æ˜¯Javaç¨‹åºï¼Œä¸æ˜¯JVMã€‚JVMæ˜¯ç”¨C/C++å¼€å‘çš„ï¼Œæ˜¯ç¼–è¯‘åçš„æœºå™¨ç ï¼Œä¸èƒ½è·¨å¹³å°ï¼Œä¸åŒå¹³å°ä¸‹éœ€è¦å®‰è£…ä¸åŒç‰ˆæœ¬çš„JVMã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>JVMå†…å­˜æ¨¡å‹</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">å †</span><br><span class="line">ä½ çš„Javaç¨‹åºä¸­æ‰€åˆ†é…çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦å­˜å‚¨åœ¨å†…å­˜é‡Œã€‚å †æ˜¯è¿™äº›å®ä¾‹åŒ–çš„å¯¹è±¡æ‰€å­˜å‚¨çš„åœ°æ–¹ã€‚æ˜¯çš„â€”â€”éƒ½æ€ªnewæ“ä½œç¬¦ï¼Œæ˜¯å®ƒæŠŠä½ çš„Javaå †éƒ½å æ»¡äº†çš„ï¼</span><br><span class="line">å®ƒç”±æ‰€æœ‰çº¿ç¨‹å…±äº«</span><br><span class="line">å½“å †è€—å°½çš„æ—¶å€™ï¼ŒJVMä¼šæŠ›å‡ºjava.lang.OutOfMemoryError å¼‚å¸¸</span><br><span class="line">å †çš„å¤§å°å¯ä»¥é€šè¿‡JVMé€‰é¡¹-Xmsï¼ˆåˆå§‹å¤§å°ï¼Œé»˜è®¤ç‰©ç†å†…å­˜64åˆ†ä¹‹1ï¼‰å’Œ-Xmxï¼ˆæœ€å¤§å¤§å°,é»˜è®¤æ˜¯ç‰©ç†å†…å­˜4åˆ†ä¹‹1ï¼‰æ¥è¿›è¡Œè°ƒæ•´ java -Xmx10m -Xmx10m -XX:+PrintGCDetails</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError é€‰é¡¹ å¯¼å‡ºå †æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">å †è¢«åˆ†ä¸ºï¼š</span><br><span class="line">    EdenåŒº â€”â€” æ–°å¯¹è±¡æˆ–è€…ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­çš„å¯¹è±¡ä¼šå­˜å‚¨åœ¨è¿™ä¸ªåŒºåŸŸä¸­ï¼Œè¿™ä¸ªåŒºçš„å¤§å°å¯ä»¥é€šè¿‡-XX:NewSizeå’Œ-XX:MaxNewSizeå‚æ•°æ¥è°ƒæ•´ã€‚æ–°ç”Ÿä»£GCï¼ˆåƒåœ¾å›æ”¶å™¨ï¼‰ä¼šæ¸…ç†è¿™ä¸€åŒºåŸŸã€‚</span><br><span class="line">        ä¼Šç”¸å›­åŒº</span><br><span class="line">    SurvivoråŒº â€”â€” é‚£äº›å†ç»äº†EdenåŒºçš„åƒåœ¾å›æ”¶ä»èƒ½å­˜æ´»ä¸‹æ¥çš„ä¾æ—§å­˜åœ¨å¼•ç”¨çš„å¯¹è±¡ä¼šå¾…åœ¨è¿™ä¸ªåŒºåŸŸã€‚è¿™ä¸ªåŒºçš„å¤§å°å¯ä»¥ç”±JVMå‚æ•°-XX:SurvivorRatioæ¥è¿›è¡Œè°ƒèŠ‚ã€‚</span><br><span class="line">        å¹¸å­˜è€…0åŒº</span><br><span class="line">        å¹¸å­˜è€…1åŒº</span><br><span class="line">    è€å¹´ä»£ â€”â€” é‚£äº›åœ¨å†ç»äº†EdenåŒºå’ŒSurvivoråŒºçš„å¤šæ¬¡GCåä»ç„¶å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ï¼ˆå½“ç„¶äº†ï¼Œæ˜¯æ‹œé‚£äº›æŒ¥ä¹‹ä¸å»çš„å¼•ç”¨æ‰€èµï¼‰ä¼šå­˜å‚¨åœ¨è¿™ä¸ªåŒºé‡Œã€‚è¿™ä¸ªåŒºä¼šç”±ä¸€ä¸ªç‰¹æ®Šçš„åƒåœ¾å›æ”¶å™¨æ¥è´Ÿè´£ã€‚å¹´è€ä»£ä¸­çš„å¯¹è±¡çš„å›æ”¶æ˜¯ç”±è€å¹´ä»£çš„GCï¼ˆmajor GCï¼‰æ¥è¿›è¡Œçš„ã€‚</span><br><span class="line">    æ°¸ä¹…åŒº   ï¼ˆjava8æ¢æˆäº† metaåŒºï¼Œå…ƒç©ºé—´ï¼‰</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ–¹æ³•åŒº</span><br><span class="line">ä¹Ÿè¢«ç§°ä¸ºéå †åŒºåŸŸï¼ˆåœ¨HotSpot JVMçš„å®ç°å½“ä¸­ï¼‰</span><br><span class="line">å®ƒè¢«åˆ†ä¸ºä¸¤ä¸ªä¸»è¦çš„å­åŒºåŸŸ</span><br><span class="line">    æŒä¹…ä»£ â€”â€” è¿™ä¸ªåŒºåŸŸä¼š å­˜å‚¨åŒ…æ‹¬ç±»å®šä¹‰ï¼Œç»“æ„ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼ˆæ•°æ®åŠä»£ç ï¼‰ä»¥åŠå¸¸é‡åœ¨å†…çš„ç±»ç›¸å…³æ•°æ®ã€‚</span><br><span class="line">    å®ƒå¯ä»¥é€šè¿‡-XX:PermSizeåŠ -XX:MaxPermSizeæ¥è¿›è¡Œè°ƒèŠ‚ã€‚å¦‚æœå®ƒçš„ç©ºé—´ç”¨å®Œäº†ï¼Œä¼šå¯¼è‡´java.lang.OutOfMemoryError: PermGen spaceçš„å¼‚å¸¸ã€‚</span><br><span class="line">    ä»£ç ç¼“å­˜â€”â€”è¿™ä¸ªç¼“å­˜åŒºåŸŸæ˜¯ç”¨æ¥å­˜å‚¨ç¼–è¯‘åçš„ä»£ç ã€‚ç¼–è¯‘åçš„ä»£ç å°±æ˜¯æœ¬åœ°ä»£ç ï¼ˆç¡¬ä»¶ç›¸å…³çš„ï¼‰ï¼Œå®ƒæ˜¯ç”±JITï¼ˆJust In Time)ç¼–è¯‘å™¨ç”Ÿæˆçš„ï¼Œè¿™ä¸ªç¼–è¯‘å™¨æ˜¯Oracle HotSpot JVMæ‰€ç‰¹æœ‰çš„ã€‚</span><br><span class="line"></span><br><span class="line">JVMæ ˆ</span><br><span class="line">    å’ŒJavaç±»ä¸­çš„æ–¹æ³•å¯†åˆ‡ç›¸å…³</span><br><span class="line">    å®ƒä¼šå­˜å‚¨å±€éƒ¨å˜é‡ä»¥åŠæ–¹æ³•è°ƒç”¨çš„ä¸­é—´ç»“æœåŠè¿”å›å€¼</span><br><span class="line">    Javaä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ä¸“å±çš„æ ˆï¼Œè¿™ä¸ªæ ˆæ˜¯åˆ«çš„çº¿ç¨‹æ— æ³•è®¿é—®çš„ã€‚</span><br><span class="line">    å¯ä»¥é€šè¿‡JVMé€‰é¡¹-Xssæ¥è¿›è¡Œè°ƒæ•´</span><br><span class="line"></span><br><span class="line">æœ¬åœ°æ ˆ</span><br><span class="line">    ç”¨äºæœ¬åœ°æ–¹æ³•ï¼ˆéJavaä»£ç ï¼‰</span><br><span class="line">    æŒ‰çº¿ç¨‹åˆ†é…</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PCå¯„å­˜å™¨</span><br><span class="line">    ç‰¹å®šçº¿ç¨‹çš„ç¨‹åºè®¡æ•°å™¨</span><br><span class="line">    åŒ…å«JVMæ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ï¼ˆå¦‚æœæ˜¯æœ¬åœ°æ–¹æ³•çš„è¯å®ƒçš„å€¼åˆ™æœªå®šä¹‰ï¼‰</span><br></pre></td></tr></table></figure>

<p>Javaä¸­objectå¸¸ç”¨æ–¹æ³•</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1ã€clone() </span><br><span class="line">2ã€equals() </span><br><span class="line">3ã€finalize() </span><br><span class="line">4ã€getclass() </span><br><span class="line">5ã€hashcode() </span><br><span class="line">6ã€notify() </span><br><span class="line">7ã€notifyAll() </span><br><span class="line">8ã€toString()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å•ä¾‹æ¨¡å¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">è§£æ³•ä¸€ï¼šåªé€‚åˆå•çº¿ç¨‹ç¯å¢ƒï¼ˆä¸å¥½ï¼‰</span><br><span class="line">public class Singleton &#123;</span><br><span class="line">    private static Singleton instance=null;</span><br><span class="line">    private Singleton()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        if(instance==null)&#123;</span><br><span class="line">            instance=new Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ³¨è§£:Singletonçš„é™æ€å±æ€§instanceä¸­ï¼Œåªæœ‰instanceä¸ºnullçš„æ—¶å€™æ‰åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ„é€ å‡½æ•°ç§æœ‰ï¼Œç¡®ä¿æ¯æ¬¡éƒ½åªåˆ›å»ºä¸€ä¸ªï¼Œé¿å…é‡å¤åˆ›å»ºã€‚</span><br><span class="line">ç¼ºç‚¹ï¼šåªåœ¨å•çº¿ç¨‹çš„æƒ…å†µä¸‹æ­£å¸¸è¿è¡Œï¼Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šå‡ºé—®é¢˜ã€‚ä¾‹å¦‚ï¼šå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œåˆ°åˆ¤æ–­instanceæ˜¯å¦ä¸ºç©ºçš„ifè¯­å¥ï¼Œå¹¶ä¸”instanceç¡®å®æ²¡æœ‰åˆ›å»ºå¥½æ—¶ï¼Œé‚£ä¹ˆä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</span><br><span class="line"></span><br><span class="line">è§£æ³•äºŒï¼šå¤šçº¿ç¨‹çš„æƒ…å†µå¯ä»¥ç”¨ã€‚ï¼ˆæ‡’æ±‰å¼ï¼Œä¸å¥½ï¼‰</span><br><span class="line">public class Singleton &#123;</span><br><span class="line">    private static Singleton instance=null;</span><br><span class="line">    private Singleton()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    public static synchronized Singleton getInstance()&#123;</span><br><span class="line">        if(instance==null)&#123;</span><br><span class="line">            instance=new Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ³¨è§£ï¼šåœ¨è§£æ³•ä¸€çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†åŒæ­¥é”ï¼Œä½¿å¾—åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å¯ä»¥ç”¨ã€‚ä¾‹å¦‚ï¼šå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æƒ³åˆ›å»ºå®ä¾‹ï¼Œç”±äºåœ¨ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¾—åˆ°åŒæ­¥é”ï¼Œå½“ç¬¬ä¸€ä¸ªçº¿ç¨‹åŠ ä¸Šé”ä»¥åï¼Œç¬¬äºŒä¸ªçº¿ç¨‹åªèƒ½ç­‰å¾…ã€‚ç¬¬ä¸€ä¸ªçº¿ç¨‹å‘ç°å®ä¾‹æ²¡æœ‰åˆ›å»ºï¼Œåˆ›å»ºä¹‹ã€‚ç¬¬ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾åŒæ­¥é”ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹æ‰å¯ä»¥åŠ ä¸ŠåŒæ­¥é”ï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚ç”±äºç¬¬ä¸€ä¸ªçº¿ç¨‹å·²ç»åˆ›å»ºäº†å®ä¾‹ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªçº¿ç¨‹ä¸éœ€è¦åˆ›å»ºå®ä¾‹ã€‚ä¿è¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä¹Ÿåªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</span><br><span class="line">ç¼ºç‚¹ï¼šæ¯æ¬¡é€šè¿‡getInstanceæ–¹æ³•å¾—åˆ°singletonå®ä¾‹çš„æ—¶å€™éƒ½æœ‰ä¸€ä¸ªè¯•å›¾å»è·å–åŒæ­¥é”çš„è¿‡ç¨‹ã€‚è€Œä¼—æ‰€å‘¨çŸ¥ï¼ŒåŠ é”æ˜¯å¾ˆè€—æ—¶çš„ã€‚èƒ½é¿å…åˆ™é¿å…ã€‚</span><br><span class="line"></span><br><span class="line">è§£æ³•ä¸‰ï¼šåŠ åŒæ­¥é”æ—¶ï¼Œå‰åä¸¤æ¬¡åˆ¤æ–­å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼ˆå¯è¡Œï¼‰</span><br><span class="line">public class Singleton &#123;</span><br><span class="line">    private static Singleton instance=null;</span><br><span class="line">    private Singleton()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        if(instance==null)&#123;</span><br><span class="line">            synchronized(Singleton.class)&#123;</span><br><span class="line">                if(instance==null)&#123;</span><br><span class="line">                    instance=new Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ³¨è§£ï¼šåªæœ‰å½“instanceä¸ºnullæ—¶ï¼Œéœ€è¦è·å–åŒæ­¥é”ï¼Œåˆ›å»ºä¸€æ¬¡å®ä¾‹ã€‚å½“å®ä¾‹è¢«åˆ›å»ºï¼Œåˆ™æ— éœ€è¯•å›¾åŠ é”ã€‚</span><br><span class="line">ç¼ºç‚¹ï¼šç”¨åŒé‡ifåˆ¤æ–­ï¼Œå¤æ‚ï¼Œå®¹æ˜“å‡ºé”™ã€‚</span><br><span class="line"></span><br><span class="line">è§£æ³•å››ï¼šé¥¿æ±‰å¼ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰</span><br><span class="line">public class Singleton &#123;</span><br><span class="line">    private static Singleton instance=new Singleton();</span><br><span class="line">    private Singleton()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ³¨è§£ï¼šåˆè¯•åŒ–é™æ€çš„instanceåˆ›å»ºä¸€æ¬¡ã€‚å¦‚æœæˆ‘ä»¬åœ¨Singletonç±»é‡Œé¢å†™ä¸€ä¸ªé™æ€çš„æ–¹æ³•ä¸éœ€è¦åˆ›å»ºå®ä¾‹ï¼Œå®ƒä»ç„¶ä¼šæ—©æ—©çš„åˆ›å»ºä¸€æ¬¡å®ä¾‹ã€‚è€Œé™ä½å†…å­˜çš„ä½¿ç”¨ç‡ã€‚</span><br><span class="line">ç¼ºç‚¹ï¼šæ²¡æœ‰lazy loadingçš„æ•ˆæœï¼Œä»è€Œé™ä½å†…å­˜çš„ä½¿ç”¨ç‡ã€‚</span><br><span class="line"></span><br><span class="line">è§£æ³•äº”ï¼šé™æ€å†…éƒ¨å†…ã€‚ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰</span><br><span class="line">public class Singleton &#123;</span><br><span class="line">    private Singleton()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    private static class SingletonHolder&#123;</span><br><span class="line">        private final static Singleton instance=new Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        return SingletonHolder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ³¨è§£ï¼šå®šä¹‰ä¸€ä¸ªç§æœ‰çš„å†…éƒ¨ç±»ï¼Œåœ¨ç¬¬ä¸€æ¬¡ç”¨è¿™ä¸ªåµŒå¥—ç±»æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚è€Œç±»å‹ä¸ºSingletonHolderçš„ç±»ï¼Œåªæœ‰åœ¨Singleton.getInstance()ä¸­è°ƒç”¨ï¼Œç”±äºç§æœ‰çš„å±æ€§ï¼Œä»–äººæ— æ³•ä½¿ç”¨SingleHolderï¼Œä¸è°ƒç”¨Singleton.getInstance()å°±ä¸ä¼šåˆ›å»ºå®ä¾‹ã€‚</span><br><span class="line">ä¼˜ç‚¹ï¼šè¾¾åˆ°äº†lazy loadingçš„æ•ˆæœï¼Œå³æŒ‰éœ€åˆ›å»ºå®ä¾‹ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>jvmåƒåœ¾å›æ”¶åŸç†</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1. å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ </span><br><span class="line">æ¯”è¾ƒå¤è€çš„å›æ”¶ç®—æ³•ã€‚åŸç†æ˜¯æ­¤å¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨ï¼Œå³å¢åŠ ä¸€ä¸ªè®¡æ•°ï¼Œåˆ é™¤ä¸€ä¸ªå¼•ç”¨åˆ™å‡å°‘ä¸€ä¸ªè®¡æ•°ã€‚</span><br><span class="line">åƒåœ¾å›æ”¶æ—¶ï¼Œåªç”¨æ”¶é›†è®¡æ•°ä¸º0çš„å¯¹è±¡ã€‚æ­¤ç®—æ³•æœ€è‡´å‘½çš„æ˜¯æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰ </span><br><span class="line">æ­¤ç®—æ³•æ‰§è¡Œåˆ†ä¸¤é˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µä»å¼•ç”¨æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œ</span><br><span class="line">ç¬¬äºŒé˜¶æ®µéå†æ•´ä¸ªå †ï¼ŒæŠŠæœªæ ‡è®°çš„å¯¹è±¡æ¸…é™¤ã€‚æ­¤ç®—æ³•éœ€è¦æš‚åœæ•´ä¸ªåº”ç”¨ï¼ŒåŒæ—¶ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. å¤åˆ¶ï¼ˆCopyingï¼‰ </span><br><span class="line">æ­¤ç®—æ³•æŠŠå†…å­˜ç©ºé—´åˆ’ä¸ºä¸¤ä¸ªç›¸ç­‰çš„åŒºåŸŸï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªåŒºåŸŸã€‚åƒåœ¾å›æ”¶æ—¶ï¼Œéå†å½“å‰ä½¿ç”¨åŒºåŸŸï¼Œ</span><br><span class="line">æŠŠæ­£åœ¨ä½¿ç”¨ä¸­çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªåŒºåŸŸä¸­ã€‚æ¬¡ç®—æ³•æ¯æ¬¡åªå¤„ç†æ­£åœ¨ä½¿ç”¨ä¸­çš„å¯¹è±¡ï¼Œå› æ­¤å¤åˆ¶æˆæœ¬æ¯”è¾ƒå°ï¼Œ</span><br><span class="line">åŒæ—¶å¤åˆ¶è¿‡å»ä»¥åè¿˜èƒ½è¿›è¡Œç›¸åº”çš„å†…å­˜æ•´ç†ï¼Œä¸è¿‡å‡ºç°â€œç¢ç‰‡â€é—®é¢˜ã€‚å½“ç„¶ï¼Œæ­¤ç®—æ³•çš„ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œå°±æ˜¯éœ€è¦ä¸¤å€å†…å­˜ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">4. æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰ </span><br><span class="line">æ­¤ç®—æ³•ç»“åˆäº† â€œæ ‡è®°-æ¸…é™¤â€å’Œâ€œå¤åˆ¶â€ä¸¤ä¸ªç®—æ³•çš„ä¼˜ç‚¹ã€‚ä¹Ÿæ˜¯åˆ†ä¸¤é˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µä»æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨å¯¹è±¡ï¼Œ</span><br><span class="line">ç¬¬äºŒé˜¶æ®µéå†æ•´ä¸ªå †ï¼Œæ¸…é™¤æœªæ ‡è®°å¯¹è±¡å¹¶ä¸”æŠŠå­˜æ´»å¯¹è±¡ â€œå‹ç¼©â€åˆ°å †çš„å…¶ä¸­ä¸€å—ï¼ŒæŒ‰é¡ºåºæ’æ”¾ã€‚</span><br><span class="line">æ­¤ç®—æ³•é¿å…äº†â€œæ ‡è®°-æ¸…é™¤â€çš„ç¢ç‰‡é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†â€œå¤åˆ¶â€ç®—æ³•çš„ç©ºé—´é—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">5. å¢é‡æ”¶é›†ï¼ˆIncremental Collectingï¼‰ </span><br><span class="line">å®æ–½åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå³ï¼šåœ¨åº”ç”¨è¿›è¡Œçš„åŒæ—¶è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ä¸çŸ¥é“ä»€ä¹ˆåŸå› JDK5.0ä¸­çš„æ”¶é›†å™¨æ²¡æœ‰ä½¿ç”¨è¿™ç§ç®—æ³•çš„ã€‚ </span><br><span class="line"> </span><br><span class="line">6. åˆ†ä»£ï¼ˆGenerational Collectingï¼‰ </span><br><span class="line">åŸºäºå¯¹å¯¹è±¡ç”Ÿå‘½å‘¨æœŸåˆ†æåå¾—å‡ºçš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚æŠŠå¯¹è±¡åˆ†ä¸ºå¹´é’ä»£ã€å¹´è€ä»£ã€æŒä¹…ä»£ï¼Œå¯¹ä¸åŒç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ä½¿ç”¨</span><br><span class="line">ä¸åŒçš„ç®—æ³•ï¼ˆä¸Šè¿°æ–¹å¼ä¸­çš„ä¸€ä¸ªï¼‰è¿›è¡Œå›æ”¶ã€‚ç°åœ¨çš„åƒåœ¾å›æ”¶å™¨ï¼ˆä»J2SE1.2å¼€å§‹ï¼‰éƒ½æ˜¯ä½¿ç”¨æ­¤ç®—æ³•çš„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>jvmç±»åŠ è½½å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">bootstrap class loader åŠ è½½å™¨</span><br><span class="line">extension class loader æ‰©å±•åŠ è½½å™¨</span><br><span class="line">appåŠ è½½å™¨</span><br><span class="line"></span><br><span class="line">è‡ªå®šä¹‰çš„è£…è½½å™¨</span><br><span class="line"></span><br><span class="line">JVMä¸­ç±»çš„è£…è½½æ˜¯ç”±ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰å’Œå®ƒçš„å­ç±»æ¥å®ç°çš„ï¼ŒJavaä¸­çš„ç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ªé‡è¦çš„Javaè¿è¡Œæ—¶ç³»ç»Ÿç»„ä»¶ï¼Œå®ƒè´Ÿè´£åœ¨è¿è¡Œæ—¶æŸ¥æ‰¾å’Œè£…å…¥ç±»æ–‡ä»¶ä¸­çš„ç±»ã€‚</span><br><span class="line">ç”±äºJavaçš„è·¨å¹³å°æ€§ï¼Œç»è¿‡ç¼–è¯‘çš„Javaæºç¨‹åºå¹¶ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œè€Œæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç±»æ–‡ä»¶ã€‚å½“Javaç¨‹åºéœ€è¦ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼ŒJVMä¼šç¡®ä¿è¿™ä¸ªç±»å·²ç»è¢«åŠ è½½ã€è¿æ¥</span><br><span class="line">ï¼ˆéªŒè¯ã€å‡†å¤‡å’Œè§£æï¼‰å’Œåˆå§‹åŒ–ã€‚ç±»çš„åŠ è½½æ˜¯æŒ‡æŠŠç±»çš„.classæ–‡ä»¶ä¸­çš„æ•°æ®è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œé€šå¸¸æ˜¯åˆ›å»ºä¸€ä¸ªå­—èŠ‚æ•°ç»„è¯»å…¥.classæ–‡ä»¶ï¼Œç„¶åäº§ç”Ÿä¸æ‰€åŠ è½½ç±»å¯¹åº”çš„Classå¯¹è±¡ã€‚</span><br><span class="line">åŠ è½½å®Œæˆåï¼ŒClasså¯¹è±¡è¿˜ä¸å®Œæ•´ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ç±»è¿˜ä¸å¯ç”¨ã€‚å½“ç±»è¢«åŠ è½½åå°±è¿›å…¥è¿æ¥é˜¶æ®µï¼Œè¿™ä¸€é˜¶æ®µåŒ…æ‹¬éªŒè¯ã€å‡†å¤‡ï¼ˆä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®é»˜è®¤çš„åˆå§‹å€¼ï¼‰</span><br><span class="line">å’Œè§£æï¼ˆå°†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼‰ä¸‰ä¸ªæ­¥éª¤ã€‚æœ€åJVMå¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ï¼š1)å¦‚æœç±»å­˜åœ¨ç›´æ¥çš„çˆ¶ç±»å¹¶ä¸”è¿™ä¸ªç±»è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œé‚£ä¹ˆå°±å…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼›</span><br><span class="line">2)å¦‚æœç±»ä¸­å­˜åœ¨åˆå§‹åŒ–è¯­å¥ï¼Œå°±ä¾æ¬¡æ‰§è¡Œè¿™äº›åˆå§‹åŒ–è¯­å¥ã€‚ç±»çš„åŠ è½½æ˜¯ç”±ç±»åŠ è½½å™¨å®Œæˆçš„ï¼Œç±»åŠ è½½å™¨åŒ…æ‹¬ï¼šæ ¹åŠ è½½å™¨ï¼ˆBootStrapï¼‰ã€æ‰©å±•åŠ è½½å™¨ï¼ˆExtensionï¼‰ã€</span><br><span class="line">ç³»ç»ŸåŠ è½½å™¨ï¼ˆSystemï¼‰å’Œç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼ˆjava.lang.ClassLoaderçš„å­ç±»ï¼‰ã€‚ä»Java 2ï¼ˆJDK 1.2ï¼‰å¼€å§‹ï¼Œç±»åŠ è½½è¿‡ç¨‹é‡‡å–äº†çˆ¶äº²å§”æ‰˜æœºåˆ¶ï¼ˆPDMï¼‰ã€‚</span><br><span class="line">PDMæ›´å¥½çš„ä¿è¯äº†Javaå¹³å°çš„å®‰å…¨æ€§ï¼Œåœ¨è¯¥æœºåˆ¶ä¸­ï¼ŒJVMè‡ªå¸¦çš„Bootstrapæ˜¯æ ¹åŠ è½½å™¨ï¼Œå…¶ä»–çš„åŠ è½½å™¨éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨ã€‚ç±»</span><br><span class="line">çš„åŠ è½½é¦–å…ˆè¯·æ±‚çˆ¶ç±»åŠ è½½å™¨åŠ è½½ï¼Œçˆ¶ç±»åŠ è½½å™¨æ— èƒ½ä¸ºåŠ›æ—¶æ‰ç”±å…¶å­ç±»åŠ è½½å™¨è‡ªè¡ŒåŠ è½½ã€‚</span><br><span class="line"></span><br><span class="line">JVMä¸ä¼šå‘Javaç¨‹åºæä¾›å¯¹Bootstrapçš„å¼•ç”¨ã€‚ä¸‹é¢æ˜¯å…³äºå‡ ä¸ªç±»åŠ è½½å™¨çš„è¯´æ˜ï¼š</span><br><span class="line">â€¢ Bootstrapï¼šä¸€èˆ¬ç”¨æœ¬åœ°ä»£ç å®ç°ï¼Œè´Ÿè´£åŠ è½½JVMåŸºç¡€æ ¸å¿ƒç±»åº“ï¼ˆrt.jarï¼‰ï¼›</span><br><span class="line">â€¢ Extensionï¼šä»java.ext.dirsç³»ç»Ÿå±æ€§æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»åº“ï¼Œå®ƒçš„çˆ¶åŠ è½½å™¨æ˜¯Bootstrapï¼›</span><br><span class="line">â€¢ Systemï¼šåˆå«åº”ç”¨ç±»åŠ è½½å™¨ï¼Œå…¶çˆ¶ç±»æ˜¯Extensionã€‚å®ƒæ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ç±»åŠ è½½å™¨ã€‚å®ƒä»ç¯å¢ƒå˜é‡classpathæˆ–è€…ç³»ç»Ÿå±æ€§java.class.pathæ‰€æŒ‡å®šçš„ç›®å½•</span><br><span class="line">ä¸­è®°è½½ç±»ï¼Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰åŠ è½½å™¨çš„é»˜è®¤çˆ¶åŠ è½½å™¨ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


















</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/b14f90edbe9e3105196b7b64814e4c6b7f3eeede/">https://magesfc.github.io/mage/b14f90edbe9e3105196b7b64814e4c6b7f3eeede/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://magesfc.github.io" target="_blank">é©¬å“¥ç§æˆ¿èœ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a></div><div class="post_share"><div class="social-share" data-image="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="æ”¯ä»˜å¯¶"/></a><div class="post-qr-code-desc">æ”¯ä»˜å¯¶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/01a4e2c2bca9919196ce3bb7cc6d0a0990b88d82/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">jenkinsæ’ä»¶å­¦ä¹ ä¹‹throttle-concurrent-builds-plugin</div></div></a></div><div class="next-post pull-right"><a href="/mage/25fa14ac848a10fef0b2b94b5568f9d5cc31c7e6/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gitç›¸å…³çš„å¸¸è§é—®é¢˜</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/mage/69d7da8634130ea768d96e0e25dac2ac0ef0fe0f/" title="Javaå­¦ä¹ ç¬”è®°ä¹‹æ’åºç®—æ³•"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Javaå­¦ä¹ ç¬”è®°ä¹‹æ’åºç®—æ³•</div></div></a></div><div><a href="/mage/a30eac2981acce8893919cfbbabc5f7a577cb4de/" title="Javaä¸­ä½¿ç”¨iniæ ¼å¼é…ç½®æ–‡ä»¶"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Javaä¸­ä½¿ç”¨iniæ ¼å¼é…ç½®æ–‡ä»¶</div></div></a></div><div><a href="/mage/ce721bd84e103ce2de46f6ab10278d370a515a90/" title="Javaä¸­ä½¿ç”¨yamlæ ¼å¼é…ç½®æ–‡ä»¶"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Javaä¸­ä½¿ç”¨yamlæ ¼å¼é…ç½®æ–‡ä»¶</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> è¿™é‡Œæ˜¯ é©¬å“¥ çš„ä¸ªäººåšå®¢ </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">166</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">184</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">34</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/6118b9bf91824574204e116d5b138ffbaab72268/" title="Golangå­¦ä¹ ä¹‹structè½¬json"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golangå­¦ä¹ ä¹‹structè½¬json"/></a><div class="content"><a class="title" href="/mage/6118b9bf91824574204e116d5b138ffbaab72268/" title="Golangå­¦ä¹ ä¹‹structè½¬json">Golangå­¦ä¹ ä¹‹structè½¬json</a><time datetime="2022-11-14T06:06:32.000Z" title="æ›´æ–°äº 2022-11-14 14:06:32">2022-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/9e24b8712fd7596796aa8992d2b6496d0660585a/" title="jenkinså­¦ä¹ ä¹‹è®°masterçš„ä¸€æ¬¡æŠ¥é”™"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinså­¦ä¹ ä¹‹è®°masterçš„ä¸€æ¬¡æŠ¥é”™"/></a><div class="content"><a class="title" href="/mage/9e24b8712fd7596796aa8992d2b6496d0660585a/" title="jenkinså­¦ä¹ ä¹‹è®°masterçš„ä¸€æ¬¡æŠ¥é”™">jenkinså­¦ä¹ ä¹‹è®°masterçš„ä¸€æ¬¡æŠ¥é”™</a><time datetime="2022-11-11T05:29:56.000Z" title="æ›´æ–°äº 2022-11-11 13:29:56">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/3b62171753fddbbf78c36e3f6d7c9ba008365560/" title="Golangå­¦ä¹ ä¹‹mtail"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golangå­¦ä¹ ä¹‹mtail"/></a><div class="content"><a class="title" href="/mage/3b62171753fddbbf78c36e3f6d7c9ba008365560/" title="Golangå­¦ä¹ ä¹‹mtail">Golangå­¦ä¹ ä¹‹mtail</a><time datetime="2022-11-11T02:54:18.000Z" title="æ›´æ–°äº 2022-11-11 10:54:18">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/f7b2ae126d593c93046cbf03febb201f10fef861/" title="Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢"/></a><div class="content"><a class="title" href="/mage/f7b2ae126d593c93046cbf03febb201f10fef861/" title="Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢">Golangå­¦ä¹ ä¹‹ç±»å‹è½¬æ¢</a><time datetime="2022-11-08T13:52:36.000Z" title="æ›´æ–°äº 2022-11-08 21:52:36">2022-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/59738b29b03ec88e9f98548ab2d29fd5592d7c6d/" title="Golangå­¦ä¹ ä¹‹dlvæ–­ç‚¹è°ƒè¯•"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golangå­¦ä¹ ä¹‹dlvæ–­ç‚¹è°ƒè¯•"/></a><div class="content"><a class="title" href="/mage/59738b29b03ec88e9f98548ab2d29fd5592d7c6d/" title="Golangå­¦ä¹ ä¹‹dlvæ–­ç‚¹è°ƒè¯•">Golangå­¦ä¹ ä¹‹dlvæ–­ç‚¹è°ƒè¯•</a><time datetime="2022-11-08T08:06:42.000Z" title="æ›´æ–°äº 2022-11-08 16:06:42">2022-11-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 By mage</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>