<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Android下的配置管理之道之git的使用 | 马哥私房菜</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Android下的配置管理之道之git的使用git helpgit help 命令用来显示任何命令的 Git 自带文档。      对于每一个命令的完整的可选项及标志列表，你可以随时运行 git help &lt;command&gt; 命令来了解。    git config&#x2F;etc&#x2F;gitconfig 文件：系统中对所有用户都普遍适用的配置。 1git config --s">
<meta property="og:type" content="article">
<meta property="og:title" content="Android下的配置管理之道之git的使用">
<meta property="og:url" content="https://magesfc.github.io/mage/f2f18a16dcb5cae64b81109cda0d473cf5d193d4/">
<meta property="og:site_name" content="马哥私房菜">
<meta property="og:description" content="Android下的配置管理之道之git的使用git helpgit help 命令用来显示任何命令的 Git 自带文档。      对于每一个命令的完整的可选项及标志列表，你可以随时运行 git help &lt;command&gt; 命令来了解。    git config&#x2F;etc&#x2F;gitconfig 文件：系统中对所有用户都普遍适用的配置。 1git config --s">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg">
<meta property="article:published_time" content="2022-02-23T09:47:19.000Z">
<meta property="article:modified_time" content="2022-11-02T12:10:52.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="android">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg"><link rel="shortcut icon" href="http://www.blackshark.com/favicon.ico"><link rel="canonical" href="https://magesfc.github.io/mage/f2f18a16dcb5cae64b81109cda0d473cf5d193d4/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: mage","link":"链接: ","source":"来源: 马哥私房菜","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Android下的配置管理之道之git的使用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-02 20:10:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">197</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">208</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">41</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 精选文档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> 🚀 快速开始</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> 📑 主题页面</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> 🛠 主题配置-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> 🛠 主题配置-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> ❓ 主题问答</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> ⚡️ 进阶教程</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> ✨ 更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> 其他示例</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">马哥私房菜</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 精选文档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> 🚀 快速开始</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> 📑 主题页面</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> 🛠 主题配置-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> 🛠 主题配置-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> ❓ 主题问答</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> ⚡️ 进阶教程</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> ✨ 更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> 其他示例</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Android下的配置管理之道之git的使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-23T09:47:19.000Z" title="发表于 2022-02-23 17:47:19">2022-02-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-02T12:10:52.000Z" title="更新于 2022-11-02 20:10:52">2022-11-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/android/">android</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Android下的配置管理之道之git的使用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Android下的配置管理之道之git的使用"><a href="#Android下的配置管理之道之git的使用" class="headerlink" title="Android下的配置管理之道之git的使用"></a>Android下的配置管理之道之git的使用</h1><h1 id="git-help"><a href="#git-help" class="headerlink" title="git help"></a>git help</h1><pre><code>git help 命令用来显示任何命令的 Git 自带文档。     
对于每一个命令的完整的可选项及标志列表，你可以随时运行 git help &lt;command&gt; 命令来了解。  
</code></pre>
<h1 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h1><p>&#x2F;etc&#x2F;gitconfig 文件：系统中对所有用户都普遍适用的配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --system</span><br></pre></td></tr></table></figure>
<p>~&#x2F;.gitconfig 文件：用户目录下的配置文件只适用于该用户。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global </span><br></pre></td></tr></table></figure>
<p>当前项目的 git 目录中的配置文件（也就是工作目录中的 .git&#x2F;config 文件）：这里的配置仅仅针对当前项目有效。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">local</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>每一个级别的配置都会覆盖上层的相同配置，所以 .git&#x2F;config 里的配置会覆盖~&#x2F;.gitconfig, &#x2F;etc&#x2F;gitconfig 中的同名变量。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;马哥私房菜&quot;</span></span><br><span class="line">$ git config --global user.email bright.ma@mage.com</span><br><span class="line">$ git config --global core.editor vim</span><br><span class="line">$ git config --global color.ui <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>最后在~&#x2F;.gitconfgi 文件下内容如下了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[color]</span><br><span class="line">    ui = true</span><br><span class="line">[user]</span><br><span class="line">    email = bright.ma@mage.com</span><br><span class="line">    name = 马哥私房菜</span><br><span class="line">[core]</span><br><span class="line">    editor = vim</span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>这种git的配置文件我们也可以直接使用编辑器取编辑修改。<br>配置文件中的空行被忽略。井号，分号开头的行是注释行，被忽略的。</p>
<p>配置文件中的数据类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Type</span><br><span class="line">    --bool                value is &quot;true&quot; or &quot;false&quot;</span><br><span class="line">    --int                 value is decimal number</span><br><span class="line">    --bool-or-int         value is --bool or --int</span><br><span class="line">    --path                value is a path (file or directory name)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>列出所有配置信息 可以使用 git config –list 命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list --<span class="built_in">local</span></span><br><span class="line">user.email=&lt;&gt;</span><br><span class="line">user.name=马哥私房菜</span><br><span class="line">core.repositoryformatversion=0</span><br><span class="line">core.filemode=<span class="literal">true</span></span><br><span class="line">core.bare=<span class="literal">false</span></span><br><span class="line">core.logallrefupdates=<span class="literal">true</span></span><br><span class="line">remote.origin.url=https://github.com/mageSFC/myblog.git</span><br><span class="line">remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*</span><br><span class="line">branch.master.remote=origin</span><br><span class="line">branch.master.merge=refs/heads/master</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>指定使用某个配置文件，可以使用-f，–file选项,该选项和–system,–local,–global不能同时使用的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -f some_to_path/config --list</span><br></pre></td></tr></table></figure>

<p>下面再举个例子</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#Given a .git/config like this:</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># This is the config file, and</span><br><span class="line"># a &#x27;#&#x27; or &#x27;;&#x27; character indicates</span><br><span class="line"># a comment</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">; core variables</span><br><span class="line">[core]</span><br><span class="line">    ; Don&#x27;t trust file modes</span><br><span class="line">    filemode = false</span><br><span class="line"></span><br><span class="line">; Our diff algorithm</span><br><span class="line">[diff]</span><br><span class="line">    external = /usr/local/bin/diff-wrapper</span><br><span class="line">    renames = true</span><br><span class="line"></span><br><span class="line">; Proxy settings</span><br><span class="line">[core]</span><br><span class="line">    gitproxy=proxy-command for kernel.org</span><br><span class="line">    gitproxy=default-proxy ; for all the rest</span><br><span class="line"></span><br><span class="line">; HTTP</span><br><span class="line">[http]</span><br><span class="line">    sslVerify</span><br><span class="line">[http &quot;https://weak.example.com&quot;]</span><br><span class="line">    sslVerify = false</span><br><span class="line">    cookieFile = /tmp/cookie.txt</span><br></pre></td></tr></table></figure>

<p>设置filemode为true：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config core.filemode true</span><br></pre></td></tr></table></figure>
<p>删除diff下面的renames</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --unset diff.renames</span><br></pre></td></tr></table></figure>
<p>查询某个给定的key的value</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --get core.filemode</span><br><span class="line"></span><br><span class="line">git config       core.filemode</span><br></pre></td></tr></table></figure>



<h1 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init        # 在一个空目录下面初始化一个空的仓库。</span><br><span class="line">                # 在存在的仓库下会reinit一个仓库的。作用不大。</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init --bare # 建一个裸仓库</span><br><span class="line">git init --bare my.git</span><br><span class="line">一般的裸仓库名称我们习惯在目录名上带上.git结尾。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init --shared[=(false|true|umask|group|all|world|everybody|0xxx)]</span><br><span class="line"></span><br><span class="line">git init --shared=everybody</span><br><span class="line"></span><br><span class="line">git init --shared=777 # 这样个出来的.git目录权限就会是777.</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init --template=&lt;template_directory&gt; #这个是指定一个模板路径。默认的路径是/usr/share/git-core/templates.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">git init --separate-git-dir=&lt;git <span class="built_in">dir</span>&gt; <span class="comment">#这个选项用来分开存放.git目录的。</span></span><br><span class="line"></span><br><span class="line">git init my  --separate-git-dir my.git <span class="comment"># 这样初始化一个空的仓库，名字是my，my这个目录也就是我们的工作区间。</span></span><br><span class="line">但是真正的仓库是在my.git这个目录下面的。 同时在my工作区间目录下面不会再有.git目录了，代替的一个.git文件。</span><br><span class="line"></span><br><span class="line">$ git init my --separate-git-dir=my.git</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/mamh/tmp/my.git/</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> </span><br><span class="line"> my/  my.git/  <span class="built_in">test</span>/</span><br><span class="line"></span><br><span class="line">$ ll my                                                                                                     </span><br><span class="line">total 0</span><br><span class="line">$ <span class="built_in">ls</span> -lha my</span><br><span class="line">total 12K</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:42 ./</span><br><span class="line">drwxrwxr-x 7 mamh mamh 4.0K 6月   1 08:42 ../</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   30 6月   1 08:42 .git</span><br><span class="line">$ <span class="built_in">cat</span> my/.git</span><br><span class="line">gitdir: /home/mamh/tmp/my.git</span><br><span class="line"></span><br><span class="line">$ ll my.git                                                                                                 </span><br><span class="line">total 32K</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   23 6月   1 08:42 HEAD</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:42 branches/</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   92 6月   1 08:42 config</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   73 6月   1 08:42 description</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:42 hooks/</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:42 info/</span><br><span class="line">drwxrwxr-x 4 mamh mamh 4.0K 6月   1 08:42 objects/</span><br><span class="line">drwxrwxr-x 4 mamh mamh 4.0K 6月   1 08:42 refs/</span><br><span class="line">$                                                 </span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init --separate-git-dir=../my.git  在一个已经存在的git仓库下面执行这样的命令，可以把当前仓库的.git目录移到外面某个目录下面。</span><br><span class="line"></span><br><span class="line">如果是对一个裸仓库执行这样的命令，他也会把仓库移到指定的目录下面，但是原来的仓库好像没什么变化的。</span><br></pre></td></tr></table></figure>


<p>环境变量 GIT_DIR   和   GIT_WORK_TREE</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  如果设置了这个$GIT_DIR环境变量，默认初始化时候是带当前目录下面创建的.git目录，有了这个环境变量， .git目录下面的内容就会放到这个环境变量路径下面了。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> GIT_DIR=/home/mamh/tmp/aaa.git</span><br><span class="line">$ git init bbb </span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /home/mamh/tmp/aaa.git/ </span><br><span class="line">$ <span class="built_in">ls</span> -lh </span><br><span class="line">total 575M</span><br><span class="line">drwxrwxr-x  7 mamh mamh 4.0K 6月   1 08:54 aaa.git/</span><br><span class="line">drwxrwxr-x  2 mamh mamh 4.0K 6月   1 08:54 bbb/</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> -lha aaa.git bbb</span><br><span class="line">aaa.git:</span><br><span class="line">total 40K</span><br><span class="line">drwxrwxr-x 7 mamh mamh 4.0K 6月   1 08:54 ./</span><br><span class="line">drwxrwxr-x 6 mamh mamh 4.0K 6月   1 08:54 ../</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:54 branches/</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   66 6月   1 08:54 config</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   73 6月   1 08:54 description</span><br><span class="line">-rw-rw-r-- 1 mamh mamh   23 6月   1 08:54 HEAD</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:54 hooks/</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:54 info/</span><br><span class="line">drwxrwxr-x 4 mamh mamh 4.0K 6月   1 08:54 objects/</span><br><span class="line">drwxrwxr-x 4 mamh mamh 4.0K 6月   1 08:54 refs/</span><br><span class="line"></span><br><span class="line">bbb:</span><br><span class="line">total 8.0K</span><br><span class="line">drwxrwxr-x 2 mamh mamh 4.0K 6月   1 08:54 ./</span><br><span class="line">drwxrwxr-x 6 mamh mamh 4.0K 6月   1 08:54 ../</span><br><span class="line">通过上面的初始化方法，我初始化了一个bbb的仓库，通过环境变量GIT_DIR指定仓库的路径，这里是aaa.git，然后我们发现bbb目录是个空目录。下面什么文件都没的。这里我们的bbb目录应该是一个工作区间目录的。</span><br><span class="line">$ git status </span><br><span class="line">fatal: This operation must be run <span class="keyword">in</span> a work tree</span><br><span class="line">$ git diff </span><br><span class="line">fatal: This operation must be run <span class="keyword">in</span> a work tree</span><br><span class="line">这个时候你执行一些命令会报不是个工作目录的。这个时候我们可以使用另外一个环境变量来解决GIT_WORK_TREE</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">export</span> GIT_WORK_TREE=/home/mamh/tmp/bbb </span><br><span class="line">$ git add .                   </span><br><span class="line">$ git st                       </span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   t.txt</span><br><span class="line">	</span><br><span class="line">这个时候git就能正常的识别到哪个是仓库目录，哪个是工作目录了。</span><br><span class="line"></span><br><span class="line">一般情况很少这样使用的。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>选项 –work-tree 和   –git-dir 和上面的环境变量起到了同样的作用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git --work-tree=&lt;some path&gt; --git-dir=&lt;some path&gt; </span><br><span class="line"></span><br><span class="line">git --work-tree=/home/mamh/tmp/bbb --git-dir=/home/mamh/tmp/aaa.git   status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   t.txt</span><br></pre></td></tr></table></figure>



<h1 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git clone user@git.example.com:/opt/git/my_project.git</span><br><span class="line"></span><br><span class="line">git clone --bare https://github.com/mageSFC/my_project my_project.git</span><br><span class="line"></span><br><span class="line">git clone https://github.com/mageSFC/myblog.git</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>–local选项，–no-hardlinks选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --<span class="built_in">local</span> /home/mirror/repo.git r1</span><br><span class="line">--<span class="built_in">local</span>，-l 选项，这个会在克隆一个本地路径的仓库时候 它会把  .git/objects/ 下面的文件做成硬链接的形式。（尽可能的，如果不能做成硬链接，他就会是复制的形式了）</span><br><span class="line"></span><br><span class="line">这个只有在路径是个本地路径的情况下面才有用的。如果是ssh://, http://这样的远端仓库路径就不会使用硬链接了。</span><br><span class="line"></span><br><span class="line">--no-local 和上面的意思相反，他不会使用硬链接的。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> --<span class="built_in">local</span> /home/mirror/repo.git </span><br><span class="line">Cloning into <span class="string">&#x27;repo&#x27;</span>...</span><br><span class="line"><span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">$ ll repo/.git/objects/pack </span><br><span class="line">total 924K</span><br><span class="line">-r--r--r-- 2 mamh mamh 102K 11月 28  2017 pack-b33f3eb5a3197675040d0e89cf2842ce644a973f.idx</span><br><span class="line">-r--r--r-- 2 mamh mamh 818K 11月 28  2017 pack-b33f3eb5a3197675040d0e89cf2842ce644a973f.pack</span><br><span class="line"></span><br><span class="line">$ ll repo/.git/objects/pack -i    </span><br><span class="line">total 924K</span><br><span class="line">57278473 -r--r--r-- 2 mamh mamh 102K 11月 28  2017 pack-b33f3eb5a3197675040d0e89cf2842ce644a973f.idx</span><br><span class="line">57278469 -r--r--r-- 2 mamh mamh 818K 11月 28  2017 pack-b33f3eb5a3197675040d0e89cf2842ce644a973f.pack</span><br><span class="line"></span><br><span class="line">$ ll /home/mirror/repo.git/objects/pack -i  </span><br><span class="line">total 924K</span><br><span class="line">57278473 -r--r--r-- 2 mamh mamh 102K 11月 28  2017 pack-b33f3eb5a3197675040d0e89cf2842ce644a973f.idx</span><br><span class="line">57278469 -r--r--r-- 2 mamh mamh 818K 11月 28  2017 pack-b33f3eb5a3197675040d0e89cf2842ce644a973f.pack</span><br><span class="line"></span><br><span class="line">通过上面的--<span class="built_in">local</span>我们看到文件的i节点编号是一样的，说明我们克隆的时候采用了硬链接的方式。</span><br><span class="line"></span><br><span class="line">默认不加上--<span class="built_in">local</span>，git自行判断，也会优化使用硬链接的方式的。</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> --no-hardlinks      -- copy files instead of hardlinking when doing a <span class="built_in">local</span> <span class="built_in">clone</span> 也是不采用硬链接的方式。 </span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> --no-hardlinks   /home/mirror/repo.git repo_bak <span class="comment">#一般的这个使用情况是，你想备份一个仓库，就可以使用这种不带硬链接的克隆了。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>–bare和–mirror的区别</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --mirror https://github.com/mageSFC/myblog.git  myblog.git   <span class="comment">#服务器上面会这么来克隆一个裸仓库，服务器上引用第三方仓库。</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> --bare https://github.com/mageSFC/my_project my_project.git   <span class="comment"># 这个选项仅仅是复制克隆一个裸仓库。</span></span><br><span class="line"></span><br><span class="line">--bare和--mirror的区别是</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> --mirror /home/mirror/repo.git r1</span><br><span class="line">$ git <span class="built_in">clone</span> --bare /home/mirror/repo.git r2</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> r1 r2                                                                                                                                     </span><br><span class="line">r1:</span><br><span class="line">branches/  config  description  HEAD  hooks/  info/  objects/  packed-refs  refs/</span><br><span class="line"></span><br><span class="line">r2:</span><br><span class="line">branches/  config  description  HEAD  hooks/  info/  objects/  packed-refs  refs/</span><br><span class="line">从表面上看，这两种方式克隆下面的都是裸仓库，没上面区别。但是我们看看他们的config文件就知道了</span><br><span class="line">$ <span class="built_in">cat</span> r1/config    </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = /home/mirror/repo.git</span><br><span class="line">	fetch = +refs/*:refs/*</span><br><span class="line">	mirror = <span class="literal">true</span></span><br><span class="line"> </span><br><span class="line">$ <span class="built_in">cat</span> r2/config   </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = /home/mirror/repo.git</span><br><span class="line"></span><br><span class="line">我们可以看到--mirror的配置文件上是多了这个“fetch = +refs/*:refs/*”的。</span><br><span class="line">这个说明我们可以执行git fetch来继续获取上游仓库的更新。没有这个是不能继续更新的。所以--mirror更常用一些。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>–reference 使用参考仓库来克隆仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/mageSFC/myblog.git --reference &lt;本地仓库镜像库路径&gt;</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/mageSFC/myblog.git --reference         /home/mirror/myblog.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/mageSFC/myblog.git --reference-if-able /home/mirror/myblog.git</span><br><span class="line"></span><br><span class="line">如果参考的本地镜像仓库不存在--reference  选项会报错的。    --reference-if-able不会报错，会继续克隆的。</span><br><span class="line"></span><br><span class="line">这个参考的仓库要是一个本地的裸仓库的。加上这个选项会节省克隆时间，节省磁盘空间的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/kernel/msm-4.9 --reference /home/mirror/kernel/msm-4.9.git                             </span><br><span class="line">Cloning into <span class="string">&#x27;msm-4.9&#x27;</span>...</span><br><span class="line">remote: Counting objects: 3064590, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (3012366/3012366)</span><br><span class="line">remote: Total 3012366 (delta 2393732), reused 2939537 (delta 2393732)</span><br><span class="line">Receiving objects: 100% (3012366/3012366), 1.36 GiB | 11.24 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (2393732/2393732), completed with 9850 <span class="built_in">local</span> objects.</span><br><span class="line">Checking connectivity: 8230985, <span class="keyword">done</span>.</span><br><span class="line">warning: remote HEAD refers to nonexistent ref, unable to checkout.</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">du</span> -sh msm-4.9/.git  </span><br><span class="line">1.5G	msm-4.9/.git</span><br><span class="line">$ <span class="built_in">cat</span> msm-4.9/.git/objects/info/alternates  </span><br><span class="line">/home/mirror/kernel/msm-4.9.git/objects</span><br><span class="line">使用了 --reference 选项克隆后.git目录只有1.5G大小。</span><br><span class="line">使用了 --reference 选项的克隆，.git/objects/info/alternates文件里面会指向镜像仓库的路径。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/kernel/msm-4.9 </span><br><span class="line">Cloning into <span class="string">&#x27;msm-4.9&#x27;</span>...</span><br><span class="line">remote: Counting objects: 8230985, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (8230985/8230985)</span><br><span class="line">remote: Total 8230985 (delta 6720180), reused 8140778 (delta 6720180)</span><br><span class="line">Receiving objects: 100% (8230985/8230985), 2.70 GiB | 18.83 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (6720180/6720180), <span class="keyword">done</span>.</span><br><span class="line">warning: remote HEAD refers to nonexistent ref, unable to checkout.</span><br><span class="line">$ <span class="built_in">du</span> -sh msm-4.9/.git  </span><br><span class="line">3.0G	msm-4.9/.git</span><br><span class="line">$ <span class="built_in">cat</span> msm-4.9/.git/objects/info/alternates </span><br><span class="line"><span class="built_in">cat</span>: msm-4.9/.git/objects/info/alternates: No such file or directory</span><br><span class="line"></span><br><span class="line">通过比较加不加 --reference /home/mirror/kernel/msm-4.9.git 我们看到.git目录大小不一样，加上要小很多的。</span><br><span class="line">然后就是加上会有msm-4.9/.git/objects/info/alternates这个文件的。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/kernel/msm-4.9 --reference /home/mirror/msm-4.9.git                                 </span><br><span class="line">Cloning into <span class="string">&#x27;msm-4.9&#x27;</span>...</span><br><span class="line">fatal: reference repository <span class="string">&#x27;/home/mirror/msm-4.9.git&#x27;</span> is not a <span class="built_in">local</span> repository.</span><br><span class="line">如果这个本地镜像仓库路径不存在，会报错的。</span><br><span class="line"></span><br><span class="line">如果使用了--reference-if-able不会报错的。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/kernel/msm-4.9 --reference /home/mirror/kernel/msm-4.9.git --dissociate  </span><br><span class="line">Cloning into <span class="string">&#x27;msm-4.9&#x27;</span>...</span><br><span class="line">remote: Counting objects: 3064590, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (3012366/3012366)</span><br><span class="line">remote: Total 3012366 (delta 2393732), reused 2939537 (delta 2393732)</span><br><span class="line">Receiving objects: 100% (3012366/3012366), 1.36 GiB | 16.33 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (2393732/2393732), completed with 9850 <span class="built_in">local</span> objects.</span><br><span class="line">Checking connectivity: 8230985, <span class="keyword">done</span>.</span><br><span class="line">Counting objects: 8230985, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (2540121/2540121), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (8230985/8230985), <span class="keyword">done</span>.</span><br><span class="line">Total 8230985 (delta 5970312), reused 6375489 (delta 4914488)</span><br><span class="line">warning: remote HEAD refers to nonexistent ref, unable to checkout.</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">du</span> -sh msm-4.9/.git  </span><br><span class="line">3.7G	msm-4.9/.git</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> msm-4.9/.git/objects/info/alternates</span><br><span class="line"><span class="built_in">cat</span>: msm-4.9/.git/objects/info/alternates: No such file or directory</span><br><span class="line"></span><br><span class="line">--dissociate选项：</span><br><span class="line">如果同时使用这个选项和--reference 选项，克隆的时候也会参考镜像仓库的，也是会提高克隆速度的。</span><br><span class="line">但是不会创建 .git/objects/info/alternates 文件的。 “.git”目录的大小会变大的。</span><br><span class="line"></span><br><span class="line">这个--reference选项对于特别大的仓库很有用。对于多人在一台服务器上克隆然后开发的情况也是很有用的。</span><br><span class="line">这个镜像仓库一般可以使用git <span class="built_in">clone</span> --mirror来创建。</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>–branch &lt;name&gt;, -b &lt;name&gt;选项  和 –single-branch选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">在不使用--branch选项的时候git <span class="built_in">clone</span>的时候检出的分支是HEAD指向的那个分支。</span><br><span class="line">使用这个选项我们就可以在克隆时候检出某个指定的分支了。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/tools/repo </span><br><span class="line">Cloning into <span class="string">&#x27;repo&#x27;</span>...</span><br><span class="line">remote: Counting objects: 3990, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (3990/3990)</span><br><span class="line">remote: Total 3990 (delta 2671), reused 3990 (delta 2671)</span><br><span class="line">Receiving objects: 100% (3990/3990), 1.23 MiB | 18.55 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (2671/2671), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">cd</span> repo                                </span><br><span class="line">$ git branch -a                                                                                      </span><br><span class="line">* stable</span><br><span class="line">  remotes/origin/HEAD -&gt; origin/stable</span><br><span class="line">  remotes/origin/maint</span><br><span class="line">  remotes/origin/master</span><br><span class="line">  remotes/origin/stable</span><br><span class="line"></span><br><span class="line">下面我们使用了-b选项，指定了检出maint分支。</span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/tools/repo -b maint </span><br><span class="line">Cloning into <span class="string">&#x27;repo&#x27;</span>...</span><br><span class="line">remote: Counting objects: 3990, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (3990/3990)</span><br><span class="line">remote: Total 3990 (delta 2671), reused 3990 (delta 2671)</span><br><span class="line">Receiving objects: 100% (3990/3990), 1.23 MiB | 26.84 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (2671/2671), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">cd</span> repo                                                                                                                                </span><br><span class="line">$ git branch -a </span><br><span class="line">* maint          这里说明了检出的分支是maint分支。</span><br><span class="line">  remotes/origin/HEAD -&gt; origin/stable</span><br><span class="line">  remotes/origin/maint</span><br><span class="line">  remotes/origin/master</span><br><span class="line">  remotes/origin/stable</span><br><span class="line"></span><br><span class="line">--single-branch选项什么意思呢？ 它和-b选项配合使用，让克隆的时候只下载-b指定的这一个分支。</span><br><span class="line">在上面的例子我们看到了克隆的时候git会把所有分支都下载到本地的，例如有maint，master，stable，这3个分支都下载了。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/tools/repo -b maint --single-branch </span><br><span class="line">Cloning into <span class="string">&#x27;repo&#x27;</span>...</span><br><span class="line">remote: Counting objects: 1668, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (1764/1764)</span><br><span class="line">remote: Total 1764 (delta 1117), reused 1700 (delta 1117)</span><br><span class="line">Receiving objects: 100% (1764/1764), 716.75 KiB | 7.47 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (1117/1117), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">cd</span> repo                    </span><br><span class="line">$ git branch -a</span><br><span class="line">* maint</span><br><span class="line">  remotes/origin/maint</span><br><span class="line">$  </span><br><span class="line">这个时候我们看到只有maint分支了。其他分支都没有下载。</span><br><span class="line">$ <span class="built_in">cat</span> .git/config </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = ssh://gerrit.example.com:29418/git/aosp/tools/repo</span><br><span class="line">	fetch = +refs/heads/maint:refs/remotes/origin/maint</span><br><span class="line">[branch <span class="string">&quot;maint&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/maint</span><br><span class="line">通过.git/config 配置文件我们可以看到 fetch = +refs/heads/maint:refs/remotes/origin/maint 这么一行，它就是指定了只下载服务器上的maint分支到本地。</span><br><span class="line">之前的这一行样子是这个的： fetch = +refs/heads/*:refs/remotes/origin/*，星号代表所有，refs/heads/*也是所有分支的意思。</span><br><span class="line">你要是想再下载其他分支，可以在那个fetch行下面加上一行  fetch = +refs/heads/stable:refs/remotes/origin/stable 。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这个-b和--single-branch的一个使用场景是：</span><br><span class="line">在一个仓库下面，我们有个分支源码分支bsui，</span><br><span class="line">另一个是二进制分支bsui_apk.二进制分支都是放的源码分支编译生成的apk文件的，这个分支很大，很占磁盘空间的。</span><br><span class="line">对于研发人员来说，他只会关系bsui源码分支，下载的时候也是只想下载这个bsui分支。另外一个分支是没什么用的。</span><br><span class="line">这个时候就可以使用 --branch bsui --single-branch 这2个选项了。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService                                      </span><br><span class="line">Cloning into <span class="string">&#x27;I19tService&#x27;</span>...</span><br><span class="line">remote: Counting objects: 6884, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (6884/6884)</span><br><span class="line">remote: Total 6884 (delta 3550), reused 6698 (delta 3550)</span><br><span class="line">Receiving objects: 100% (6884/6884), 6.68 GiB | 47.00 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (3550/3550), <span class="keyword">done</span>.</span><br><span class="line">warning: remote HEAD refers to nonexistent ref, unable to checkout.</span><br><span class="line">$ <span class="built_in">du</span> -sh I19tService/.git</span><br><span class="line">6.7G	I19tService/.git</span><br><span class="line"></span><br><span class="line">下面是使用了--branch bsui --single-branch选项的效果，磁盘空间只有600MB。之前是6GB。这就是差异。</span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService --branch bsui --single-branch        </span><br><span class="line">Cloning into <span class="string">&#x27;I19tService&#x27;</span>...</span><br><span class="line">remote: Counting objects: 5995, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (5995/5995)</span><br><span class="line">remote: Total 5995 (delta 2897), reused 5604 (delta 2897)</span><br><span class="line">Receiving objects: 100% (5995/5995), 663.97 MiB | 50.77 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (2897/2897), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">du</span> -sh I19tService/.git                                                                                                                    [mamh@10.0.63.43 ] 18-06-01 11:29  /home/mamh/tmp</span><br><span class="line">665M	I19tService/.git</span><br><span class="line"></span><br><span class="line">如果使用了--reference .git目录大小会更小。</span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService --branch bsui --single-branch --reference /home/mirror/platform/vendor/example/app/I19tService.git             </span><br><span class="line">Cloning into <span class="string">&#x27;I19tService&#x27;</span>...</span><br><span class="line">$ <span class="built_in">du</span> -sh I19tService/.git                                                                                                                    [mamh@10.0.63.43 ] 18-06-01 11:33  /home/mamh/tmp</span><br><span class="line">164K	I19tService/.git</span><br><span class="line"></span><br><span class="line">如果使用了--dissociate和 --reference 选项，目录大小恢复为600MB了。</span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService --branch bsui --single-branch --reference /home/mirror/platform/vendor/example/app/I19tService.git  --dissociate</span><br><span class="line">Cloning into <span class="string">&#x27;I19tService&#x27;</span>...</span><br><span class="line">Counting objects: 5995, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (3211/3211), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (5995/5995), <span class="keyword">done</span>.</span><br><span class="line">Total 5995 (delta 2519), reused 4618 (delta 1722)</span><br><span class="line">$ <span class="built_in">du</span> -sh I19tService/.git     </span><br><span class="line">646M	I19tService/.git</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>–depth <depth>浅克隆</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 3  /home/mirror/repo.git</span><br><span class="line">使用这个选项是，浅克隆的意思，后面指定一个数字，下载的时候只下载指定的提交历史。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit.example.com:29418/git/aosp/tools/repo --depth 3 </span><br><span class="line">Cloning into <span class="string">&#x27;repo&#x27;</span>...</span><br><span class="line">remote: Counting objects: 87, <span class="keyword">done</span></span><br><span class="line">remote: Finding sources: 100% (90/90)</span><br><span class="line">remote: Total 90 (delta 7), reused 45 (delta 7)</span><br><span class="line">Receiving objects: 100% (90/90), 164.53 KiB | 4.22 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (7/7), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">cd</span> repo                                                                                                                                    </span><br><span class="line">$ git ll                                                                                                                                </span><br><span class="line">* eceeb1b - Support broken symlinks when cleaning obsolete paths                      — Dan Willemsen (HEAD -&gt; stable, tag: v1.12.37, origin/stable, origin/HEAD) - (1 year, 8 months ago)</span><br><span class="line">* 16889ba - Revert <span class="string">&quot;Repo: fall back to http, if ssh connection fails for http repos&quot;</span>  — Dan Willemsen (tag: v1.12.36) - (1 year, 8 months ago)</span><br><span class="line">*   40d3952 - Merge <span class="string">&quot;On project cleanup, don&#x27;t remove nested projects&quot;</span>                — David Pursehouse (tag: v1.12.35) - (1 year, 8 months ago)</span><br><span class="line">|\  </span><br><span class="line">| * 4350791 - On project cleanup, don<span class="string">&#x27;t remove nested projects                       — Dan Willemsen (grafted) - (1 year, 9 months ago)</span></span><br><span class="line"><span class="string">* d648045 - implement optional &#x27;</span>pushurl<span class="string">&#x27; in the manifest file                        — Steve Rae (grafted) - (1 year, 10 months ago)</span></span><br><span class="line"><span class="string">$</span></span><br><span class="line"><span class="string">加上了--depth选项，这个git log历史只有这么4个,或者说是5个了。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ cat .git/config   </span></span><br><span class="line"><span class="string">[core]</span></span><br><span class="line"><span class="string">	repositoryformatversion = 0</span></span><br><span class="line"><span class="string">	filemode = true</span></span><br><span class="line"><span class="string">	bare = false</span></span><br><span class="line"><span class="string">	logallrefupdates = true</span></span><br><span class="line"><span class="string">[remote &quot;origin&quot;]</span></span><br><span class="line"><span class="string">	url = ssh://gerrit.example.com:29418/git/aosp/tools/repo</span></span><br><span class="line"><span class="string">	fetch = +refs/heads/stable:refs/remotes/origin/stable</span></span><br><span class="line"><span class="string">[branch &quot;stable&quot;]</span></span><br><span class="line"><span class="string">	remote = origin</span></span><br><span class="line"><span class="string">	merge = refs/heads/stable</span></span><br><span class="line"><span class="string">加上这个--depth，克隆的时候只会下载到一个分支，这里是stable，应为服务器上配置的HEAD执向的是stable分支。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ ls .git </span></span><br><span class="line"><span class="string">branches/  config  description  HEAD  hooks/  index  info/  logs/  objects/  packed-refs  refs/  shallow</span></span><br><span class="line"><span class="string">在浅克隆的时候.git目录下面会有个shallow文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>


<p>–origin &lt;name&gt;, -o &lt;name&gt;选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">默认克隆的时候，使用的名称是origin，我们可以通过.git/config 看到</span><br><span class="line">$ <span class="built_in">cat</span> I19tService/.git/config</span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService</span><br><span class="line">	fetch = +refs/heads/bsui:refs/remotes/origin/bsui</span><br><span class="line">[branch <span class="string">&quot;bsui&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/bsui</span><br><span class="line">	</span><br><span class="line">这里[remote <span class="string">&quot;origin&quot;</span>]标记的就是远端仓库名称是origin。</span><br><span class="line"></span><br><span class="line">使用--origin选项在克隆的时候可以更改这个名称，一般不会取改它的。</span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService --branch bsui --single-branch --reference /home/mirror/platform/vendor/example/app/I19tService.git   --origin o</span><br><span class="line">fatal: destination path <span class="string">&#x27;I19tService&#x27;</span> already exists and is not an empty directory.</span><br><span class="line">$ <span class="built_in">rm</span> -rf I19tService </span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService --branch bsui --single-branch --reference /home/mirror/platform/vendor/example/app/I19tService.git   --origin o</span><br><span class="line">Cloning into <span class="string">&#x27;I19tService&#x27;</span>...</span><br><span class="line">$ <span class="built_in">cat</span> I19tService/.git/config </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;o&quot;</span>]</span><br><span class="line">	url = ssh://gerrit-sh.example.com:29418/git/android/platform/vendor/example/app/I19tService</span><br><span class="line">	fetch = +refs/heads/bsui:refs/remotes/o/bsui</span><br><span class="line">[branch <span class="string">&quot;bsui&quot;</span>]</span><br><span class="line">	remote = o</span><br><span class="line">	merge = refs/heads/bsui</span><br><span class="line">这里就使用了  --origin o选项，把这个名称改为了“o”</span><br></pre></td></tr></table></figure>


<p>–no-checkout选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">加上这个选项 <span class="built_in">clone</span>的时候不会把源码检出到工作目录。默认是会检出的。有时候会提示个warning，就是检出源码失败。</span><br><span class="line"> warning: remote HEAD refers to nonexistent ref, unable to checkout.</span><br><span class="line">一般这种情况是服务器端HEAD引用的那个分支是个不存在的分支，下载到本地检出代码的时候就报错了。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> /home/mirror/kernel/msm-4.9.git --no-checkout                                                                                    </span><br><span class="line">Cloning into <span class="string">&#x27;msm-4.9&#x27;</span>...</span><br><span class="line"><span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">ls</span> msm-4.9                                                                                                                                 </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">rm</span> -rf msm-4.9                                                                                                                             </span><br><span class="line">$ git <span class="built_in">clone</span> /home/mirror/kernel/msm-4.9.git                                                                                                  </span><br><span class="line">Cloning into <span class="string">&#x27;msm-4.9&#x27;</span>...</span><br><span class="line"><span class="keyword">done</span>.</span><br><span class="line">Checking out files: 100% (58866/58866), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">ls</span> msm-4.9  </span><br><span class="line">AndroidKernel.mk  build.config.goldfish.arm    build.config.goldfish.mips64  certs/   crypto/         firmware/  init/   Kconfig  MAINTAINERS  net/            samples/   sound/     usr/</span><br><span class="line"><span class="built_in">arch</span>/             build.config.goldfish.arm64  build.config.goldfish.x86     COPYING  Documentation/  fs/        ipc/    kernel/  Makefile     README          scripts/   techpack/  virt/</span><br><span class="line">block/            build.config.goldfish.mips   build.config.goldfish.x86_64  CREDITS  drivers/        include/   Kbuild  lib/     mm/          REPORTING-BUGS  security/  tools/</span><br><span class="line">$  </span><br></pre></td></tr></table></figure>

<p>–template&#x3D;<template_directory>选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --template=&lt;template_directory&gt;</span><br><span class="line">--template=&lt;template_directory&gt;选项指定一个模板路径，克隆的时候使用。我们在git init时候讲过这个选项。</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> --template=/usr/share/git-core/templates /home/mirror/kernel/msm-4.9.git</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>–no-tags选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span>  --no-tags /home/mirror/repo.git</span><br><span class="line">克隆的时候不下载tags标签，使用这个选项会在.git/config 配置文件中有个这个配置：remote.&lt;remote&gt;.tagOpt=--no-tags 。</span><br><span class="line">不使用这个选项是会下载标签的。      </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>-v,-q,–progress选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -v, --verbose 克隆的时候显示更多的详细信息。</span><br><span class="line">git <span class="built_in">clone</span> -q, --quiet 克隆时候不显示任何提示信息。</span><br><span class="line">git <span class="built_in">clone</span> --progress 强制显示进度报告。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h1><p>git add 命令将内容从工作目录添加到暂存区（或称为索引（index）区），以备下次提交。  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">git add --dry-run,-n  &lt;pathspec&gt;   <span class="comment"># 不去真正执行add命令，只是打印出来将会被git添加进版本的文件。</span></span><br><span class="line"></span><br><span class="line">git add --force,-f  &lt;pathspec&gt;     <span class="comment"># 这个会把.ignore文件中被忽略的文件也添加到版本库中。</span></span><br><span class="line"></span><br><span class="line">git add --update，-u  &lt;pathspec&gt;   <span class="comment"># 这个选项不会把没有被git追踪的文件添加进来，也就是新建的文件不会添加进来</span></span><br><span class="line"></span><br><span class="line">git add  -A,--all, --no-ignore-removal <span class="comment"># 这个选项会把所有的文件都添加进来，包括删除的，新增的，修改的。</span></span><br><span class="line">                                       <span class="comment"># 如果没有给出具体的&lt;pathspec&gt; 这个选项会把当前版本库的工作空间中的所有文件都添加进来的。</span></span><br><span class="line">                                       </span><br><span class="line">git add --no-all, --ignore-removal     <span class="comment"># 这个不会把删除的文件添加进来。</span></span><br><span class="line"></span><br><span class="line">git add   [option]  -- &lt;pathspec&gt;  <span class="comment"># 这里 -- 的作用就是分开选项和文件，让git知道哪些是选项，哪些是文件名。如果文件名和选项重名了这个就很有用了。</span></span><br><span class="line"></span><br><span class="line">git add Documentation/\*.txt  <span class="comment">#这个会把 Documentation 和 子目录下面的所有.txt 文件添加进来的。这里加了反斜线，这个星号就交给git命令来扩展了。</span></span><br><span class="line"></span><br><span class="line">git add git-*.sh</span><br><span class="line">                                       </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h1><p>git rm 是 Git 用来从工作区，或者暂存区移除文件的命令。 在为下一次提交暂存一个移除操作上，它与 git add 有一点类似  </p>
<h1 id="git-mv"><a href="#git-mv" class="headerlink" title="git mv"></a>git mv</h1><p>git mv 命令是一个便利命令，用于移到一个文件并且在新文件上执行git add命令及在老文件上执行git rm命令。  </p>
<h1 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h1><p>git status 命令将为你展示工作区及暂存区域中不同状态的文件。 这其中包含了已修改但未暂存，或已经暂存但没有提交的文件。<br>一般在它显示形式中，会给你展示一些关于如何在这些暂存区域之间移动文件的提示。  </p>
<p>红色表示修改了。  </p>
<p>绿色的文件表示执行过git add之后的状态  </p>
<p> -s, –short 选项，显示简短格式的状态<br> –long 选项，默认选项，就是长格式的状态。  </p>
<h1 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h1><p>此命令可以查看你工作环境与你的暂存区的差异（git diff 默认的做法）  </p>
<p>你暂存区域与你最后提交之间的差异（git diff –staged ）<br>或者比较两个提交记录的差异（git diff master branchB）  </p>
<p>–staged 和 –cached 是同义词  </p>
<h1 id="git-difftool"><a href="#git-difftool" class="headerlink" title="git difftool"></a>git difftool</h1><p>当你不想使用内置的 git diff 命令时。git difftool 可以用来简单地启动一个外部工具来为你展示两棵树之间的差异。  </p>
<h1 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h1><p>git commit 命令将所有通过 git add 暂存的文件内容在数据库中创建一个持久的快照，然后将当前分支上的分支指针移到其之上。  </p>
<p>git commit –amend  追加提交到最后一个快照上。<br>-m 选项，将提交信息与命令放在同一行<br>-a 选项, 跳过使用git add命令，直接把修改过后的文件直接作为一个提交<br>-s, –signoff 添加signoff行  </p>
<h1 id="git-clean"><a href="#git-clean" class="headerlink" title="git clean"></a>git clean</h1><p>git clean 是一个用来从工作区中移除不想要的文件的命令。 可以是编译的临时文件或者合并冲突的文件。<br>git clean 命令只会移除没有忽略的未跟踪文件,-x 选项就会移除.gitignore里面忽略的文件。<br>-d 移除未追踪的目录<br>-n 选项来运行命令，这意味着 “做一次演习然后告诉你 将要 移除什么”。  </p>
<p>git clean -fdx  </p>
<h1 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h1><p>git branch testing 这会在当前所在的提交对象上创建一个指针。  </p>
<p>git branch -d testing 删除分支，-D 如果真的想要删除分支并丢掉那些工作，如同帮助信息里所指出的，可以使用 -D 选项强制删除它。  </p>
<p>git branch -u origin&#x2F;serverfix</p>
<p>git branch 如果不加任何参数运行它，会得到当前所有分支的一个列表  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git branch </span><br><span class="line">* (HEAD detached at cf7c083)</span><br><span class="line">  master</span><br><span class="line">  new</span><br><span class="line">  <span class="built_in">test</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>git branch –list <pattern> 列出所有匹配模式的分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --list</span><br><span class="line">* (HEAD detached at cf7c083)</span><br><span class="line">  master</span><br><span class="line">  new</span><br><span class="line">  <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">特别注意，如果后面跟上了pattern，这个--list选项必须加上的，如果不加上会变成创建分支的功能。</span><br><span class="line">$ git branch --list <span class="string">&#x27;maint*&#x27;</span> </span><br><span class="line">  maint-dev</span><br><span class="line">  maint-sh</span><br><span class="line">  maint-test</span><br><span class="line">  maint1.0.1</span><br><span class="line">  </span><br><span class="line">$ git branch --list <span class="string">&#x27;maint*&#x27;</span>  <span class="string">&#x27;dev*&#x27;</span>   <span class="comment"># 这个pattern可以有多个的。</span></span><br><span class="line">  dev</span><br><span class="line">  dev-sh</span><br><span class="line">  maint-dev</span><br><span class="line">  maint-sh</span><br><span class="line">  maint-test</span><br><span class="line">  maint1.0.1</span><br><span class="line">  </span><br><span class="line">特别注意 -l 选项可不是--list的缩写选项。-l是--create-reflog的意思    </span><br></pre></td></tr></table></figure>

<p>git branch –color，–no-color这2个选项来控制是否输出显示为彩色</p>
<p>git branch –edit-description &lt;branchname&gt; 编辑分支描述信息，会把信息写到.git&#x2F;config 文件中</p>
<p>git branch -r, –remotes 显示远端分支列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -r  </span><br><span class="line">  origin/HEAD -&gt; origin/master</span><br><span class="line">  origin/maint</span><br><span class="line">  origin/master</span><br><span class="line">  origin/stable</span><br><span class="line"></span><br><span class="line">配合-v，--verbose选项</span><br><span class="line">$ git branch -rv  </span><br><span class="line">  origin/HEAD   -&gt; origin/master</span><br><span class="line">  origin/maint  34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  origin/master da40341 manifest: Support a default upstream value</span><br><span class="line">  origin/stable eceeb1b Support broken symlinks when cleaning obsolete paths</span><br></pre></td></tr></table></figure>
<p>git branch -a, –all 显示远端本地分支列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">当前分支会标记个星号</span><br><span class="line">$ git br -a  </span><br><span class="line">* (HEAD detached at cf7c083)  <span class="comment"># 这个表明当前是一个匿名分支。</span></span><br><span class="line">  master</span><br><span class="line">  new</span><br><span class="line">  remotes/origin/HEAD -&gt; origin/master</span><br><span class="line">  remotes/origin/maint</span><br><span class="line">  remotes/origin/master</span><br><span class="line">  remotes/origin/stable</span><br><span class="line"></span><br><span class="line">同样的配合-v选项一起的效果</span><br><span class="line">$ git br -av </span><br><span class="line">* (HEAD detached at cf7c083) cf7c083 Download latest patch when no patch is specified</span><br><span class="line">  master                     da40341 manifest: Support a default upstream value</span><br><span class="line">  new                        da40341 manifest: Support a default upstream value</span><br><span class="line">  remotes/origin/HEAD        -&gt; origin/master</span><br><span class="line">  remotes/origin/maint       34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  remotes/origin/master      da40341 manifest: Support a default upstream value</span><br><span class="line">  remotes/origin/stable      eceeb1b Support broken symlinks when cleaning obsolete paths</span><br></pre></td></tr></table></figure>

<p>git branch -v, -vv, –verbose 显示的信息更加详细</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ git br -v  </span><br><span class="line">* (HEAD detached at cf7c083) cf7c083 Download latest patch when no patch is specified</span><br><span class="line">  master                     da40341 manifest: Support a default upstream value</span><br><span class="line">  new                        da40341 manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">使用-vv的效果</span><br><span class="line">$ git br -vv  <span class="comment">#</span></span><br><span class="line">* (HEAD detached at cf7c083) cf7c083 Download latest patch when no patch is specified</span><br><span class="line">  master                     da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line">  new                        da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">使用--abbrev=15选项来指定显示的commit <span class="built_in">id</span>的位数，默认是显示7位。 （abbrev是缩写的意思）</span><br><span class="line">$ git br -v --abbrev=15  </span><br><span class="line">* (HEAD detached at cf7c083) cf7c0834cfc24c5 Download latest patch when no patch is specified</span><br><span class="line">  master                     da40341a3e6e2e4 manifest: Support a default upstream value</span><br><span class="line">  new                        da40341a3e6e2e4 manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">使用--no-abbrev 显示完整的40位的commit <span class="built_in">id</span>  </span><br><span class="line">$  git br -v --no-abbrev </span><br><span class="line">* (HEAD detached at cf7c083) cf7c0834cfc24c5c9584695c657c6baf97d0fbb3 Download latest patch when no patch is specified</span><br><span class="line">  master                     da40341a3e6e2e45877426aaefb97b3f0735a776 manifest: Support a default upstream value</span><br><span class="line">  new                        da40341a3e6e2e45877426aaefb97b3f0735a776 manifest: Support a default upstream value</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>git branch –contains &lt;commit&gt;， –no-contains &lt;commit&gt;列出包含&#x2F;不包含某个提交的分支列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ git branch --no-contains=7d52585  <span class="comment">#&lt;commit&gt;参数没有默认是HEAD</span></span><br><span class="line">  <span class="built_in">test</span></span><br><span class="line"> </span><br><span class="line">$ git branch --contains=7d52585     <span class="comment">#&lt;commit&gt;参数没有默认是HEAD</span></span><br><span class="line">* (HEAD detached at cf7c083)</span><br><span class="line">  master</span><br><span class="line">  new</span><br><span class="line"></span><br><span class="line">$ git branch --no-contains  <span class="comment">#&lt;commit&gt;参数没有默认是HEAD</span></span><br><span class="line">  <span class="built_in">test</span></span><br><span class="line">  </span><br><span class="line">$ git branch --contains     <span class="comment">#&lt;commit&gt;参数没有默认是HEAD</span></span><br><span class="line">* (HEAD detached at cf7c083)</span><br><span class="line">  master</span><br><span class="line">  new</span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git branch –merged &lt;commit&gt;，–no-merged &lt;commit&gt;<br>–merged 与 –no-merged 这两个有用的选项可以过滤这个列表中已经合并或尚未合并到当前分支的分支。  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ git br --merged  <span class="comment">#列出已经合并到当前分支的其他分支列表 &lt;commit&gt;参数没有默认是HEAD</span></span><br><span class="line">* (HEAD detached at cf7c083)</span><br><span class="line">  <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">$ git br --no-merged </span><br><span class="line">  master</span><br><span class="line">  new</span><br><span class="line"></span><br><span class="line">The options --contains, --no-contains, --merged and --no-merged serve four related but different purposes:</span><br><span class="line">·   --contains &lt;commit&gt; is used to find all branches <span class="built_in">which</span> will need special attention <span class="keyword">if</span> &lt;commit&gt; were to be rebased or amended, since those branches contain the specified &lt;commit&gt;.</span><br><span class="line">·   --no-contains &lt;commit&gt; is the inverse of that, i.e. branches that don’t contain the specified &lt;commit&gt;.</span><br><span class="line">·   --merged is used to find all branches <span class="built_in">which</span> can be safely deleted, since those branches are fully contained by HEAD.</span><br><span class="line">·   --no-merged is used to find branches <span class="built_in">which</span> are candidates <span class="keyword">for</span> merging into HEAD, since those branches are not fully contained by HEAD.</span><br></pre></td></tr></table></figure>



<p>git branch –track | –no-track &lt;branchname&gt; &lt;start-point&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">专家一个本地分支，并且追踪远端master分支。</span><br><span class="line">$ git br --track track-master origin/master</span><br><span class="line">Branch track-master <span class="built_in">set</span> up to track remote branch master from origin.</span><br><span class="line">$ <span class="built_in">cat</span> .git/config      </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = https://aosp.tuna.tsinghua.edu.cn/tools/repo</span><br><span class="line">	fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">&quot;track-master&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/master</span><br><span class="line">	</span><br><span class="line">如果配置了“git config branch.autoSetupMerge <span class="literal">true</span>”每次创建新分支的时候都会设置这个追踪分支的。（只有后面的参数&lt;start-point&gt;是一个远端分支的情况才会的）</span><br><span class="line">$ git br mm origin/master</span><br><span class="line">Branch mm <span class="built_in">set</span> up to track remote branch master from origin.</span><br><span class="line">$ <span class="built_in">cat</span> .git/config </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = https://aosp.tuna.tsinghua.edu.cn/tools/repo</span><br><span class="line">	fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">&quot;track-master&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/master</span><br><span class="line">[branch]</span><br><span class="line">	autoSetupMerge = <span class="literal">true</span></span><br><span class="line">[branch <span class="string">&quot;mm&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/master</span><br><span class="line"></span><br><span class="line">这种情况下可以使用--no-track选项改变这种情况</span><br><span class="line">$ git br --no-track notrack-master origin/master</span><br><span class="line">这样就不会设置”branch.&lt;name&gt;.remote“ 和 ”branch.&lt;name&gt;.merge“</span><br><span class="line"></span><br><span class="line">也可以设置个追踪本地分支的一个分支，这个需要加上--track才行。</span><br><span class="line">$ git br --track local-track-master track-master </span><br><span class="line">Branch local-track-master <span class="built_in">set</span> up to track <span class="built_in">local</span> branch track-master.</span><br><span class="line">$ <span class="built_in">cat</span> .git/config </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = https://aosp.tuna.tsinghua.edu.cn/tools/repo</span><br><span class="line">	fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">&quot;track-master&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/master</span><br><span class="line">[branch]</span><br><span class="line">	autoSetupMerge = <span class="literal">true</span></span><br><span class="line">[branch <span class="string">&quot;mm&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/master</span><br><span class="line">[branch <span class="string">&quot;local-track-master&quot;</span>]</span><br><span class="line">	remote = .</span><br><span class="line">	merge = refs/heads/track-master</span><br></pre></td></tr></table></figure>

<p>git branch -l，–create-reflog    &lt;branchname&gt; &lt;start-point&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git br -l <span class="built_in">test</span> origin/maint</span><br><span class="line">fatal: A branch named <span class="string">&#x27;test&#x27;</span> already exists.</span><br><span class="line"></span><br><span class="line">$ git br -l <span class="built_in">test</span> origin/maint -f </span><br><span class="line">Branch <span class="built_in">test</span> <span class="built_in">set</span> up to track remote branch maint from origin.</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> .git/config </span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0</span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">	url = https://aosp.tuna.tsinghua.edu.cn/tools/repo</span><br><span class="line">	fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">&quot;test&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/maint</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>git branch –set-upstream-to&#x3D;&lt;upstream&gt;  &lt;branchname&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">设置某个本地分支&lt;branchname&gt;追踪某个&lt;upstream&gt;远端分支</span><br><span class="line">省略参数  &lt;branchname&gt; 就会设置当前分支的</span><br><span class="line"></span><br><span class="line">$ git br --set-upstream-to=origin/master</span><br><span class="line">Branch test1 <span class="built_in">set</span> up to track remote branch master from origin.</span><br><span class="line">$ git brvv</span><br><span class="line">  dev   34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  <span class="built_in">test</span>  34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">* test1 eceeb1b [origin/master: behind 87] Support broken symlinks when cleaning obsolete paths</span><br><span class="line">  test2 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">  test3 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line"></span><br><span class="line">$ git br --set-upstream-to=origin/master test3 </span><br><span class="line">Branch test3 <span class="built_in">set</span> up to track remote branch master from origin.</span><br><span class="line">$ git brvv</span><br><span class="line">  dev   34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  <span class="built_in">test</span>  34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">* test1 eceeb1b [origin/master: behind 87] Support broken symlinks when cleaning obsolete paths</span><br><span class="line">  test2 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">  test3 f46902a [origin/master: behind 18] forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">$</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>git branch –unset-upstream &lt;branchname&gt;   删除追踪关系，&lt;branchname&gt; 参数没有给出默认是当前分支名称。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ git brvv   </span><br><span class="line">  dev   34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  <span class="built_in">test</span>  34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">* test1 eceeb1b [origin/master: behind 87] Support broken symlinks when cleaning obsolete paths</span><br><span class="line">  test2 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">  test3 f46902a [origin/master: behind 18] forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">               </span><br><span class="line">$ git br --unset-upstream dev</span><br><span class="line">fatal: Branch <span class="string">&#x27;dev&#x27;</span> has no upstream information</span><br><span class="line"></span><br><span class="line">$ git br --unset-upstream  test1</span><br><span class="line"></span><br><span class="line">$ git br --unset-upstream  test2 </span><br><span class="line">fatal: Branch <span class="string">&#x27;test2&#x27;</span> has no upstream information</span><br><span class="line"></span><br><span class="line">$ git br --unset-upstream  test3</span><br><span class="line"></span><br><span class="line">$ git brvv </span><br><span class="line">  dev   34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  <span class="built_in">test</span>  34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">* test1 eceeb1b Support broken symlinks when cleaning obsolete paths</span><br><span class="line">  test2 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">  test3 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git branch (-m | -M) &lt;oldbranch&gt; &lt;newbranch&gt; 重命名分支名称<br>git branch -m，–move<br>git branch –move –force  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git brvv</span><br><span class="line">  dev   34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  <span class="built_in">test</span>  34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">* test1 eceeb1b Support broken symlinks when cleaning obsolete paths</span><br><span class="line">  test2 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">  test3 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line"></span><br><span class="line">$ git br -m test3 test33</span><br><span class="line"></span><br><span class="line">$ git brvv</span><br><span class="line">  dev    34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">  <span class="built_in">test</span>   34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">* test1  eceeb1b Support broken symlinks when cleaning obsolete paths</span><br><span class="line">  test2  f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line">  test33 f46902a forall: Clarify expansion of REPO_ environment values with -c</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>git branch (-c | -C) &lt;oldbranch&gt; &lt;newbranch&gt;  复制分支<br>git branch -c，–copy<br>git branch –copy –force  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这个好像在2.14版本中没有了</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>git branch (-d | -D) &lt;branchname&gt;…​ 删除分支<br>git branch -d，–delete<br>git branch –delete –force  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git branch -d <span class="built_in">test</span> test1</span><br><span class="line"></span><br><span class="line">git branch -D test33</span><br><span class="line"></span><br><span class="line">如果带上-r选项 可以删除refs/remotes/下的分支，并不是远端服务器是的分支啊！！！</span><br><span class="line"> </span><br><span class="line">$ git br -r   <span class="comment"># 列出目前所有的远端分支</span></span><br><span class="line">  origin/HEAD -&gt; origin/master</span><br><span class="line">  origin/maint</span><br><span class="line">  origin/master</span><br><span class="line">  origin/stable</span><br><span class="line"></span><br><span class="line">$ git br -d -r origin/HEAD      <span class="comment"># 删除</span></span><br><span class="line">Deleted remote-tracking branch origin/HEAD (was refs/remotes/origin/master).</span><br><span class="line"></span><br><span class="line">$ git br -r   <span class="comment"># 列出目前所有的远端分支</span></span><br><span class="line">  origin/maint</span><br><span class="line">  origin/master</span><br><span class="line">  origin/stable</span><br><span class="line"></span><br><span class="line">$ git br -d -r origin/maint</span><br><span class="line">Deleted remote-tracking branch origin/maint (was 34acdd2).</span><br><span class="line"></span><br><span class="line">$ git br -r    <span class="comment"># 列出目前所有的远端分支</span></span><br><span class="line">  origin/master</span><br><span class="line">  origin/stable</span><br></pre></td></tr></table></figure>

<p>批量删除某个目录下面的所有git仓库指定的匹配的某些分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">deleteBranches</span></span>() &#123;</span><br><span class="line">    git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> symbolic-ref HEAD refs/heads/master</span><br><span class="line">    a=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/msm8909\*)</span><br><span class="line">      b=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/pollux\*)</span><br><span class="line">      c=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/zs_msm8909\*)</span><br><span class="line">    git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span>  branch -D <span class="variable">$a</span> <span class="variable">$b</span> <span class="variable">$c</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> -f deleteBranches</span><br><span class="line">find . -name <span class="string">&quot;*.git&quot;</span> -<span class="built_in">type</span> d -<span class="built_in">exec</span> bash -c <span class="string">&#x27;src=&quot;&#123;&#125;&quot;; echo =$src=; deleteBranches $src&#x27;</span> \; </span><br><span class="line"></span><br><span class="line">git branch -D $(git for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/\*_master)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span>  /home/gerrit2/review_site/git/git/android</span><br><span class="line"><span class="comment">#find . -name &quot;*.git&quot; -type d -exec bash -c &#x27;src=&quot;&#123;&#125;&quot;; echo =$src=; git -C $src tag|xargs git -C $src tag -d&#x27; \;</span></span><br><span class="line"><span class="function"><span class="title">deleteBranches</span></span>() &#123;</span><br><span class="line">    <span class="comment">#git -C &quot;$1&quot; symbolic-ref HEAD refs/heads/master</span></span><br><span class="line">    a=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/L\*)</span><br><span class="line">    b=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/caf/**)</span><br><span class="line">    c=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/aosp/**)</span><br><span class="line">    d=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/aosp**)</span><br><span class="line">    e=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/github**)</span><br><span class="line">    f=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/kk\*)</span><br><span class="line">    g=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/ics\*)</span><br><span class="line">    h=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/jb\*)</span><br><span class="line">    i=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/aosp-new/**)</span><br><span class="line">    j=$(git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span> for-each-ref --format=<span class="string">&quot;%(refname:short)&quot;</span> refs/heads/2017-spf-1-0_master_rebase_r00400.1\*)</span><br><span class="line">    git -C <span class="string">&quot;<span class="variable">$1</span>&quot;</span>  branch -D <span class="variable">$a</span> <span class="variable">$b</span> <span class="variable">$c</span> <span class="variable">$d</span> <span class="variable">$e</span> <span class="variable">$f</span> <span class="variable">$g</span> <span class="variable">$h</span> <span class="variable">$i</span> <span class="variable">$j</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> -f deleteBranches</span><br><span class="line">find . -name <span class="string">&quot;*.git&quot;</span> -<span class="built_in">type</span> d -<span class="built_in">exec</span> bash -c <span class="string">&#x27;src=&quot;&#123;&#125;&quot;; echo =$src=; deleteBranches $src&#x27;</span> \; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h1><p>git checkout 命令用来切换分支，或者检出内容到工作目录</p>
<p>git checkout的通用使用格式 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git checkout [-q] [-f] [-m] [&lt;branch&gt;]</span><br><span class="line">git checkout [-q] [-f] [-m] --detach [&lt;branch&gt;]</span><br><span class="line">git checkout [-q] [-f] [-m] [--detach] &lt;commit&gt;</span><br><span class="line">git checkout [-q] [-f] [-m] [[-b|-B|--orphan] &lt;new_branch&gt;] [&lt;start_point&gt;]</span><br><span class="line">git checkout [-f|--ours|--theirs|-m|--conflict=&lt;style&gt;] [&lt;tree-ish&gt;] [--] &lt;paths&gt;…​</span><br><span class="line">git checkout [&lt;tree-ish&gt;] [--] &lt;pathspec&gt;…​</span><br><span class="line">git checkout (-p|--patch) [&lt;tree-ish&gt;] [--] [&lt;paths&gt;…​]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git checkout &lt;branch&gt; 切换分支<br>准备工作空间为给定的分支 &lt;branch&gt; 。同时更新index暂存区和working tree工作空间。然后把HEAD指向这个分支。<br>本地被改动的文件会被保留。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">当前我们在test1分支上，我们修改了color.py文件</span><br><span class="line">$ git st</span><br><span class="line">On branch test1</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:  </span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   color.py</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line"></span><br><span class="line">然后我们试着切换分支到dev分支上，但是发现报错了，因为color.py 文件的改动和 分支 dev上的有冲突了。</span><br><span class="line">$ git checkout dev </span><br><span class="line">error: Your <span class="built_in">local</span> changes to the following files would be overwritten by checkout:</span><br><span class="line">	color.py</span><br><span class="line">Please commit your changes or stash them before you switch branches.</span><br><span class="line">Aborting     </span><br><span class="line"></span><br><span class="line">这种情况下我们可以使用 -f选项，强制切换到dev分支，不过我们的改动会丢失。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">我们在切换到另外一个分支test2，这个分支可以顺利切换</span><br><span class="line">$ git checkout test2</span><br><span class="line">M	color.py</span><br><span class="line">Switched to branch <span class="string">&#x27;test2&#x27;</span>  </span><br><span class="line"></span><br><span class="line">$ git st </span><br><span class="line">On branch test2</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:  </span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   color.py</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line">$                                               </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git checkout -b &lt;branch&gt; –track &lt;remote&gt;&#x2F;&lt;branch&gt; 创建一个新分支，并设置一个远端追踪关系。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">我创建了新的分支，同时设置追踪一个远端分支origin/maint</span><br><span class="line">$ git checkout -b track-maint --track origin/maint</span><br><span class="line">Branch track-maint <span class="built_in">set</span> up to track remote branch maint from origin.</span><br><span class="line">Switched to a new branch <span class="string">&#x27;track-maint&#x27;</span>  </span><br><span class="line"></span><br><span class="line">$ git brvv </span><br><span class="line">  dev         34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">* track-maint 34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> .git/config    </span><br><span class="line"></span><br><span class="line">[core]</span><br><span class="line">	repositoryformatversion = 0 </span><br><span class="line">	filemode = <span class="literal">true</span></span><br><span class="line">	bare = <span class="literal">false</span></span><br><span class="line">	logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">&quot;origin&quot;</span>]    </span><br><span class="line"></span><br><span class="line">	url = https://aosp.tuna.tsinghua.edu.cn/tools/repo</span><br><span class="line">	fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">&quot;track-maint&quot;</span>]</span><br><span class="line">	remote = origin</span><br><span class="line">	merge = refs/heads/maint  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git checkout -b|-B &lt;new_branch&gt; &lt;start point&gt;新建分支，并且检出到这个新分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">以v1.0这个tag点创建一个新分支，请检出到这个分支上</span><br><span class="line">$ git checkout -b  new-v1.0 v1.0</span><br><span class="line">Switched to a new branch <span class="string">&#x27;new-v1.0&#x27;</span> </span><br><span class="line">$ git brvv</span><br><span class="line">  dev         34acdd2 Fix ManifestParseError when first child node is comment</span><br><span class="line">* new-v1.0    cf31fe9 Initial Contribution</span><br><span class="line">  track-maint 34acdd2 [origin/maint] Fix ManifestParseError when first child node is comment</span><br><span class="line">  </span><br><span class="line">使用-b选项时候，如果分支名称已经存在会报错的，这个时候可以使用-B选项强制创建  </span><br><span class="line">$ git checkout -b  new-v1.0 v1.1</span><br><span class="line">fatal: A branch named <span class="string">&#x27;new-v1.0&#x27;</span> already exists.</span><br><span class="line">$ git checkout -B  new-v1.0 v1.1   </span><br><span class="line">Reset branch <span class="string">&#x27;new-v1.0&#x27;</span></span><br><span class="line"></span><br><span class="line">当前在一个匿名分支上，然后start point我使用origin/master试试</span><br><span class="line">$ git brvv </span><br><span class="line">* (HEAD detached at v1.0) cf31fe9 Initial Contribution</span><br><span class="line"></span><br><span class="line">$ git co -b track-master origin/master</span><br><span class="line">Previous HEAD position was cf31fe9... Initial Contribution</span><br><span class="line">Branch track-master <span class="built_in">set</span> up to track remote branch master from origin.</span><br><span class="line">Switched to a new branch <span class="string">&#x27;track-master&#x27;</span> </span><br><span class="line">$ git brvv</span><br><span class="line">* track-master da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line">通过这个方式我们创建了一个追踪分支</span><br><span class="line"></span><br><span class="line">默认是创建追踪分支的，如果不想可以使用--no-track选项。</span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p>git checkout –detach [&lt;branch&gt;]    切换&#x2F;创建匿名分支，基于一个分支名<br>git checkout [–detach] &lt;commit&gt;    切换&#x2F;创建匿名分支，基于一个commit提交id。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">当前我们在new分支上</span><br><span class="line">$ git brvv </span><br><span class="line">* new          02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">  track-master da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">通过使用git checkout我们切换到 track-master 分支上。这个是不带--detach选项的行为。</span><br><span class="line">$ git co track-master </span><br><span class="line">Switched to branch <span class="string">&#x27;track-master&#x27;</span></span><br><span class="line">Your branch is up-to-date with <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line"> </span><br><span class="line">$ git brvv </span><br><span class="line">  new          02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">* track-master da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">下面我们带上--detach选项来切换到new分支上试试</span><br><span class="line">$ git co --detach new</span><br><span class="line">HEAD is now at 02dbb6d... Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line"></span><br><span class="line">$ git brvv                </span><br><span class="line">* (HEAD detached at refs/heads/new) 02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">  new                               02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">  track-master                      da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line">我们可以看到并没有切换到new分支上,而是以这个new分支为基准切换到了一个匿名分支上.</span><br><span class="line"></span><br><span class="line">如果后面的参数是commitID,tag这个时候切换的是匿名分支,这个时候--detach选项可以省略.</span><br><span class="line">$ git checkout da40341 </span><br><span class="line">Previous HEAD position was 02dbb6d... Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">HEAD is now at da40341... manifest: Support a default upstream value</span><br><span class="line"> </span><br><span class="line">$ git brvv               </span><br><span class="line">* (HEAD detached at da40341) da40341 manifest: Support a default upstream value</span><br><span class="line">  new                        02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">  track-master               da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line">$ </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git checkout [&lt;tree-ish&gt;] [–] &lt;pathspec&gt;</p>
<p>git checkout (-p|–patch) [&lt;tree-ish&gt;] [–] [&lt;pathspec&gt;]</p>
<p>git checkout [-f|–ours|–theirs|-m|–conflict&#x3D;&lt;style&gt;] [&lt;tree-ish&gt;] [–] &lt;paths&gt;<br>这几个命令是用 “index暂存区内容” 或者 “指定tree-ish” 来覆盖paths指定的文件，  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">我们这个时候修改了color.py文件，但是我们想撤销修改，就可以使用git checkout了</span><br><span class="line">HEAD detached at da40341</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:   </span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   color.py</span><br><span class="line">	modified:   command.py</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line">$ git co HEAD  -- color.py</span><br><span class="line">$ git st  </span><br><span class="line">HEAD detached at da40341</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   command.py    </span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line"></span><br><span class="line">我们也可以指定个commit来做作为参数   </span><br><span class="line">$ git co a32c92c  -- command.py</span><br><span class="line">$ git st</span><br><span class="line"></span><br><span class="line">HEAD detached at da40341</span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p>git checkout –orphan <new_branch> <start point>  创建一个孤儿分支<br>这个会基于指定的 <start point> 的代码，然后需要重新git commit，提交后会新建个分支<new_branch>，<br>这个分支和其他的分支没有任何关系联系。  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">当前分支状态</span><br><span class="line">$ git brvv                    </span><br><span class="line">* new          02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">  track-master da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">我们基于v1.0这个点创建一个孤立分支orphan-branch </span><br><span class="line">$ git co --orphan orphan-branch v1.0 </span><br><span class="line">Switched to a new branch <span class="string">&#x27;orphan-branch&#x27;</span></span><br><span class="line">这个时候我们看到所有的代码都是绿色的，表明都是在暂存区的。</span><br><span class="line">$ git st  </span><br><span class="line">On branch orphan-branch        </span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   .gitignore    </span><br><span class="line">	new file:   COPYING</span><br><span class="line">	new file:   Makefile</span><br><span class="line">	new file:   codereview/__init__.py</span><br><span class="line">	new file:   codereview/need_retry_pb2.py</span><br><span class="line">	new file:   codereview/proto_client.py</span><br><span class="line">	new file:   codereview/review_pb2.py</span><br><span class="line">	new file:   codereview/upload_bundle_pb2.py</span><br><span class="line">	new file:   color.py</span><br><span class="line">	new file:   command.py</span><br><span class="line">	new file:   editor.py</span><br><span class="line">	new file:   error.py</span><br><span class="line">	new file:   froofle/__init__.py</span><br><span class="line">	new file:   froofle/protobuf/__init__.py</span><br><span class="line">	new file:   froofle/protobuf/descriptor.py</span><br><span class="line">	new file:   froofle/protobuf/descriptor_pb2.py</span><br><span class="line">	new file:   froofle/protobuf/internal/__init__.py</span><br><span class="line">	new file:   froofle/protobuf/internal/decoder.py</span><br><span class="line">	new file:   froofle/protobuf/internal/encoder.py</span><br><span class="line">	new file:   froofle/protobuf/internal/input_stream.py</span><br><span class="line">	new file:   froofle/protobuf/internal/message_listener.py</span><br><span class="line">	new file:   froofle/protobuf/internal/output_stream.py</span><br><span class="line">	new file:   froofle/protobuf/internal/type_checkers.py</span><br><span class="line">	new file:   froofle/protobuf/internal/wire_format.py</span><br><span class="line">	new file:   froofle/protobuf/message.py</span><br><span class="line">	new file:   froofle/protobuf/reflection.py</span><br><span class="line">	new file:   froofle/protobuf/service.py</span><br><span class="line">	new file:   froofle/protobuf/service_reflection.py</span><br><span class="line">	new file:   froofle/protobuf/text_format.py</span><br><span class="line">	new file:   gerrit_upload.py</span><br><span class="line">	new file:   git_command.py</span><br><span class="line">	new file:   git_config.py</span><br><span class="line">	new file:   import_ext.py</span><br><span class="line">	new file:   import_tar.py</span><br><span class="line">	new file:   import_zip.py</span><br><span class="line">	new file:   main.py</span><br><span class="line">	new file:   manifest.py</span><br><span class="line">	new file:   pager.py</span><br><span class="line">	new file:   project.py</span><br><span class="line">	new file:   remote.py</span><br><span class="line">	new file:   repo</span><br><span class="line">	new file:   subcmds/__init__.py</span><br><span class="line">	new file:   subcmds/compute_snapshot_check.py</span><br><span class="line">	new file:   subcmds/diff.py</span><br><span class="line">	new file:   subcmds/forall.py</span><br><span class="line">	new file:   subcmds/help.py</span><br><span class="line">	new file:   subcmds/init.py</span><br><span class="line">	new file:   subcmds/prune.py</span><br><span class="line">	new file:   subcmds/stage.py</span><br><span class="line">	new file:   subcmds/start.py</span><br><span class="line">	new file:   subcmds/status.py</span><br><span class="line">	new file:   subcmds/sync.py</span><br><span class="line">	new file:   subcmds/upload.py </span><br><span class="line">这个之后我们需要git commit 一下。</span><br><span class="line">$ git ci -s -m <span class="string">&#x27;init my orphan branch base on tag v1.0&#x27;</span> </span><br><span class="line">[orphan-branch (root-commit) 139e9c1] init my orphan branch base on tag v1.0</span><br><span class="line"> 53 files changed, 11781 insertions(+)</span><br><span class="line"> create mode 100644 .gitignore</span><br><span class="line"> create mode 100644 COPYING</span><br><span class="line"> create mode 100644 Makefile</span><br><span class="line"> create mode 100644 codereview/__init__.py</span><br><span class="line"> create mode 100644 codereview/need_retry_pb2.py</span><br><span class="line"> create mode 100755 codereview/proto_client.py</span><br><span class="line"> create mode 100644 codereview/review_pb2.py</span><br><span class="line"> create mode 100644 codereview/upload_bundle_pb2.py</span><br><span class="line"> create mode 100644 color.py</span><br><span class="line"> create mode 100644 command.py</span><br><span class="line"> create mode 100644 editor.py</span><br><span class="line"> create mode 100644 error.py</span><br><span class="line"> create mode 100644 froofle/__init__.py</span><br><span class="line"> create mode 100644 froofle/protobuf/__init__.py</span><br><span class="line"> create mode 100644 froofle/protobuf/descriptor.py</span><br><span class="line"> create mode 100644 froofle/protobuf/descriptor_pb2.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/__init__.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/decoder.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/encoder.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/input_stream.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/message_listener.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/output_stream.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/type_checkers.py</span><br><span class="line"> create mode 100644 froofle/protobuf/internal/wire_format.py</span><br><span class="line"> create mode 100644 froofle/protobuf/message.py</span><br><span class="line"> create mode 100644 froofle/protobuf/reflection.py</span><br><span class="line"> create mode 100644 froofle/protobuf/service.py</span><br><span class="line"> create mode 100644 froofle/protobuf/service_reflection.py</span><br><span class="line"> create mode 100644 froofle/protobuf/text_format.py</span><br><span class="line"> create mode 100755 gerrit_upload.py</span><br><span class="line"> create mode 100644 git_command.py</span><br><span class="line"> create mode 100644 git_config.py</span><br><span class="line"> create mode 100644 import_ext.py</span><br><span class="line"> create mode 100644 import_tar.py</span><br><span class="line"> create mode 100644 import_zip.py</span><br><span class="line"> create mode 100755 main.py</span><br><span class="line"> create mode 100644 manifest.py</span><br><span class="line"> create mode 100755 pager.py</span><br><span class="line"> create mode 100644 project.py</span><br><span class="line"> create mode 100644 remote.py</span><br><span class="line"> create mode 100755 repo</span><br><span class="line"> create mode 100644 subcmds/__init__.py</span><br><span class="line"> create mode 100644 subcmds/compute_snapshot_check.py</span><br><span class="line"> create mode 100644 subcmds/diff.py</span><br><span class="line"> create mode 100644 subcmds/forall.py</span><br><span class="line"> create mode 100644 subcmds/help.py</span><br><span class="line"> create mode 100644 subcmds/init.py</span><br><span class="line"> create mode 100644 subcmds/prune.py</span><br><span class="line"> create mode 100644 subcmds/stage.py</span><br><span class="line"> create mode 100644 subcmds/start.py</span><br><span class="line"> create mode 100644 subcmds/status.py</span><br><span class="line"> create mode 100644 subcmds/sync.py</span><br><span class="line"> create mode 100644 subcmds/upload.py  </span><br><span class="line"></span><br><span class="line">$ git st </span><br><span class="line">On branch orphan-branch</span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line"></span><br><span class="line">git commit之后我们的孤立分支orphan-branch就新建好了</span><br><span class="line">$ git brvv  </span><br><span class="line">  new           02dbb6d Fix StopIteration exception during repo &#123;<span class="built_in">sync</span>,status&#125;</span><br><span class="line">* orphan-branch 139e9c1 init my orphan branch base on tag v1.0</span><br><span class="line">  track-master  da40341 [origin/master] manifest: Support a default upstream value</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span>   </span><br><span class="line">commit 139e9c128630d6c7d8a01e2a35cde0f44190988d (HEAD -&gt; orphan-branch)</span><br><span class="line">Author: mamh &lt;bright.ma@example.com&gt;</span><br><span class="line">Date:   Thu Jun 14 12:58:04 2018 +0800</span><br><span class="line"></span><br><span class="line">    init my orphan branch base on tag v1.0 </span><br><span class="line">    </span><br><span class="line">    Signed-off-by: mamh &lt;bright.ma@example.com&gt;</span><br><span class="line">通过git <span class="built_in">log</span>我们只看到一个提交                                            </span><br></pre></td></tr></table></figure>

<p>git checkout –merge，-m 切换分支，采用合并，就是但你本地文件有修改情况下你要切换分支，有时候是不能切换的文件有冲突，<br>这个时候可以使用–merge选项来合并当前分支，你的工作空间，你要切换的分支这3者。也就是这3者做一个三方合并的操作。  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ git co track-master     </span><br><span class="line">error: Your <span class="built_in">local</span> changes to the following files would be overwritten by checkout:</span><br><span class="line">	color.py</span><br><span class="line">Please commit your changes or stash them before you switch branches.</span><br><span class="line">Aborting</span><br><span class="line">这个时候git checkout命令是拒绝你的切分支请求的</span><br><span class="line"></span><br><span class="line">$ git co track-master --merge </span><br><span class="line">M	color.py</span><br><span class="line">Switched to branch <span class="string">&#x27;track-master&#x27;</span></span><br><span class="line">Your branch is up-to-date with <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line"></span><br><span class="line">$ git st</span><br><span class="line">On branch track-master</span><br><span class="line">Your branch is up-to-date with <span class="string">&#x27;origin/master&#x27;</span>.</span><br><span class="line"></span><br><span class="line">Unmerged paths:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to mark resolution)</span><br><span class="line"></span><br><span class="line">	both modified:   color.py  </span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">$ git diff </span><br><span class="line">diff --cc color.py</span><br><span class="line">index 0218aab,fd26ee0..0000000</span><br><span class="line">--- a/color.py</span><br><span class="line">+++ b/color.py</span><br><span class="line">@@@ -17,92 -17,70 +17,112 @@@ import o</span><br><span class="line">  import sys</span><br><span class="line">  </span><br><span class="line">  import pager</span><br><span class="line">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; track-master       </span><br><span class="line"> +</span><br><span class="line"> +COLORS = &#123;None: -1,</span><br><span class="line"> +          &#x27;normal&#x27;: -1,</span><br><span class="line"> +          &#x27;black&#x27;: 0,</span><br><span class="line"> +          &#x27;red&#x27;: 1,</span><br><span class="line"> +          &#x27;green&#x27;: 2,</span><br><span class="line"> +          &#x27;yellow&#x27;: 3,</span><br><span class="line"> +          &#x27;blue&#x27;: 4,</span><br><span class="line">++=======</span><br><span class="line">+ from git_config import GitConfig</span><br><span class="line">+ </span><br><span class="line">+ COLORS = &#123;None     :-1,</span><br><span class="line">+           &#x27;normal&#x27; :-1,</span><br><span class="line">+           &#x27;black&#x27;  : 0,</span><br><span class="line">+           &#x27;red&#x27;    : 1,</span><br><span class="line">+           &#x27;green&#x27;  : 2,</span><br><span class="line">+           &#x27;yellow&#x27; : 3,</span><br><span class="line">+           &#x27;blue&#x27;   : 4,</span><br><span class="line">+           &#x27;yellow&#x27; : 3,</span><br><span class="line">++&gt;&gt;&gt;&gt;&gt;&gt;&gt; local    </span><br><span class="line">            &#x27;magenta&#x27;: 5,</span><br><span class="line"> -          &#x27;cyan&#x27;   : 6,</span><br><span class="line"> -          &#x27;white&#x27;  : 7&#125;</span><br><span class="line"> -</span><br><span class="line"> -ATTRS = &#123;None     :-1,</span><br><span class="line"> -         &#x27;bold&#x27;   : 1,</span><br><span class="line"> -         &#x27;dim&#x27;    : 2,</span><br><span class="line"> -         &#x27;ul&#x27;     : 4,</span><br><span class="line"> -         &#x27;blink&#x27;  : 5,</span><br><span class="line"> +          &#x27;cyan&#x27;: 6,</span><br><span class="line"> +          &#x27;white&#x27;: 7&#125;</span><br><span class="line"> +</span><br><span class="line"> +ATTRS = &#123;None: -1,</span><br><span class="line"> +         &#x27;bold&#x27;: 1,</span><br><span class="line"> +         &#x27;dim&#x27;: 2,</span><br><span class="line"> +         &#x27;ul&#x27;: 4,</span><br><span class="line"> +         &#x27;blink&#x27;: 5,</span><br><span class="line">           &#x27;reverse&#x27;: 7&#125;</span><br><span class="line">  </span><br><span class="line">  RESET = &quot;\033[m&quot;</span><br><span class="line">+           &#x27;yellow&#x27; : 3,</span><br><span class="line">  </span><br><span class="line">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; track-master </span><br><span class="line">...skipping...</span><br><span class="line"> +      need_sep = True</span><br><span class="line"> +</span><br><span class="line"> +    if fg &gt;= 0:</span><br><span class="line"> +      if need_sep:</span><br><span class="line"> +        code += &#x27;;&#x27;</span><br><span class="line"> +      need_sep = True</span><br><span class="line"> +</span><br><span class="line"> +      if fg &lt; 8:</span><br><span class="line"> +        code += &#x27;3%c&#x27; % (ord(&#x27;0&#x27;) + fg)</span><br><span class="line"> +      else:</span><br><span class="line"> +        code += &#x27;38;5;%d&#x27; % fg</span><br><span class="line"> +</span><br><span class="line"> +    if bg &gt;= 0:</span><br><span class="line"> +      if need_sep:</span><br><span class="line"> +        code += &#x27;;&#x27;</span><br><span class="line"> +</span><br><span class="line"> +      if bg &lt; 8:</span><br><span class="line"> +        code += &#x27;4%c&#x27; % (ord(&#x27;0&#x27;) + bg)</span><br><span class="line"> +      else:</span><br><span class="line"> +        code += &#x27;48;5;%d&#x27; % bg</span><br><span class="line"> +    code += &#x27;m&#x27;</span><br><span class="line"> +  else:</span><br><span class="line"> +    code = &#x27;&#x27;</span><br><span class="line"> +  return code</span><br><span class="line"> +</span><br><span class="line"> +DEFAULT = None</span><br><span class="line"> +</span><br><span class="line"> +</span><br><span class="line"> +def SetDefaultColoring(state):</span><br><span class="line"> +  &quot;&quot;&quot;Set coloring behavior to |state|.</span><br><span class="line"> +</span><br><span class="line"> +  This is useful for overriding config options via the command line.</span><br><span class="line"> +  &quot;&quot;&quot;</span><br><span class="line"> +  if state is None:</span><br><span class="line"> +    # Leave it alone -- return quick!</span><br><span class="line"> +    return</span><br><span class="line"> +</span><br><span class="line"> +  global DEFAULT</span><br><span class="line"> +  state = state.lower()</span><br><span class="line"> +  if state in (&#x27;auto&#x27;,):</span><br><span class="line"> +    DEFAULT = state</span><br><span class="line"> +  elif state in (&#x27;always&#x27;, &#x27;yes&#x27;, &#x27;true&#x27;, True):</span><br><span class="line"> +    DEFAULT = &#x27;always&#x27;</span><br><span class="line"> +  elif state in (&#x27;never&#x27;, &#x27;no&#x27;, &#x27;false&#x27;, False):</span><br><span class="line"> +    DEFAULT = &#x27;never&#x27;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  class Coloring(object):</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>DETACHED HEAD 剥离的头指针，也就是匿名分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">HEAD一般的都是指向一个有名字的分支的（例如master），同时每个分支指向一个特定的commit。</span><br><span class="line">       HEAD (refers to branch <span class="string">&#x27;master&#x27;</span>)</span><br><span class="line">        |</span><br><span class="line">        v</span><br><span class="line">a---b---c  branch <span class="string">&#x27;master&#x27;</span> (refers to commit <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">    ^</span><br><span class="line">    |</span><br><span class="line">  tag <span class="string">&#x27;v2.0&#x27;</span> (refers to commit <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">当有一个新的提交被创建了，分支也会更新指向新的commit上。同样的HEAD也还是指向master分支，master此时已经指向到新的提交上了。</span><br><span class="line">$ edit; git add; git commit</span><br><span class="line"></span><br><span class="line">           HEAD (refers to branch <span class="string">&#x27;master&#x27;</span>)</span><br><span class="line">            |</span><br><span class="line">            v</span><br><span class="line">a---b---c---d  branch <span class="string">&#x27;master&#x27;</span> (refers to commit <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">    ^</span><br><span class="line">    |</span><br><span class="line">  tag <span class="string">&#x27;v2.0&#x27;</span> (refers to commit <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">但是呢有时候检出一个特定的commit，不是一个命名分支也是很有用的。</span><br><span class="line">这个时候特别注意HEAD指向了b这个提交上，这个时候就是一个“detached HEAD”的状态。</span><br><span class="line">$ git checkout v2.0  <span class="comment"># or  检出到b这个提交上</span></span><br><span class="line">$ git checkout master^^</span><br><span class="line"></span><br><span class="line">   HEAD (refers to commit <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">    |</span><br><span class="line">    v</span><br><span class="line">a---b---c---d  branch <span class="string">&#x27;master&#x27;</span> (refers to commit <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">    ^</span><br><span class="line">    |</span><br><span class="line">  tag <span class="string">&#x27;v2.0&#x27;</span> (refers to commit <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">这种情况下我们再新建个提交看看</span><br><span class="line">$ edit; git add; git commit</span><br><span class="line"></span><br><span class="line">     HEAD (refers to commit <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">      |</span><br><span class="line">      v</span><br><span class="line">      e</span><br><span class="line">     /</span><br><span class="line">a---b---c---d  branch <span class="string">&#x27;master&#x27;</span> (refers to commit <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">    ^</span><br><span class="line">    |</span><br><span class="line">  tag <span class="string">&#x27;v2.0&#x27;</span> (refers to commit <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">这个使用有个新的提交e了，这个e只被HEAD引用，如果HEAD引用到其他地方，这个e就有可能丢失了。</span><br><span class="line">下面我们在e提交的基础上再次提交个f提交</span><br><span class="line">$ edit; git add; git commit</span><br><span class="line"></span><br><span class="line">         HEAD (refers to commit <span class="string">&#x27;f&#x27;</span>)</span><br><span class="line">          |</span><br><span class="line">          v</span><br><span class="line">      e---f</span><br><span class="line">     /</span><br><span class="line">a---b---c---d  branch <span class="string">&#x27;master&#x27;</span> (refers to commit <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">    ^</span><br><span class="line">    |</span><br><span class="line">  tag <span class="string">&#x27;v2.0&#x27;</span> (refers to commit <span class="string">&#x27;b&#x27;</span>)  </span><br><span class="line">这个时候如果我们切换到master分支上会怎么样？？？</span><br><span class="line">$ git checkout master</span><br><span class="line"></span><br><span class="line">               HEAD (refers to branch <span class="string">&#x27;master&#x27;</span>)</span><br><span class="line">      e---f     |</span><br><span class="line">     /          v</span><br><span class="line">a---b---c---d  branch <span class="string">&#x27;master&#x27;</span> (refers to commit <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">    ^</span><br><span class="line">    |</span><br><span class="line">  tag <span class="string">&#x27;v2.0&#x27;</span> (refers to commit <span class="string">&#x27;b&#x27;</span>) </span><br><span class="line">这个时候我们要特别注意，提交f没有被任何分支引用了。最终这个提交f会被git 垃圾回收机制给清理掉，到那之后就再也找不回f提交了。</span><br><span class="line">也就是执行了git gc就会删除f提交，e提交等。除非我们在次之前建个引用指向这个提交f。</span><br><span class="line">$ git checkout -b foo   (1)</span><br><span class="line">$ git branch foo        (2)</span><br><span class="line">$ git tag foo           (3)</span><br><span class="line">(1)creates a new branch foo, <span class="built_in">which</span> refers to commit f, and <span class="keyword">then</span> updates HEAD to refer to branch foo. In other words, we’ll no longer be <span class="keyword">in</span> detached HEAD state after this <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">(2)similarly creates a new branch foo, <span class="built_in">which</span> refers to commit f, but leaves HEAD detached.</span><br><span class="line"></span><br><span class="line">(3)creates a new tag foo, <span class="built_in">which</span> refers to commit f, leaving HEAD detached.</span><br><span class="line"></span><br><span class="line">匿名分支就讲解到这里  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git checkout branchname<br>如果branchname和某个文件名重复了，git是首先作为分支名称的，如果你确实要指定的文件名称可以使用’–’。</p>
<p>git checkout的一些例子</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master             (1)    switch branch</span><br><span class="line">$ git checkout master~2 Makefile  (2)     take a file out of another commit</span><br><span class="line">$ <span class="built_in">rm</span> -f hello.c</span><br><span class="line">$ git checkout hello.c            (3)   restore hello.c from the index</span><br><span class="line"></span><br><span class="line">$ git checkout -- <span class="string">&#x27;*.c&#x27;</span>       check out all C <span class="built_in">source</span> files out of the index</span><br><span class="line">这个将会包所有的.c文件都检出了，文件hello.c 也会，这个不是看working tree下面是否有个这个hello.c</span><br><span class="line">文件，而是看暂存区是否有个hello.c文件。</span><br><span class="line"></span><br><span class="line">不幸的是如果你有个分支名称也是叫hello.c这个时候有可以产生疑惑了？到底是分支呢？还是文件呢？</span><br><span class="line">我可以这样使用‘--’来明确说明是文件。</span><br><span class="line">$ git checkout -- hello.c  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h1><p>git reset 命令主要用来执行撤销操作<br>–soft 会将HEAD引用指向给定提交。索引和工作目录的内容保持不变。撤销上次git commit操作的。变成绿色状态。<br>–mixed 会将HEAD引用指向给定提交。索引内容也跟着改变以符合给定提交的树结构。但是工作目录的内容不变。默认是这个。变成红色状态。<br>–hard 将HEAD引用指向给定提交，索引内容发生改变，工作目录内容也发生改变。  </p>
<p>取消暂存的文件,就是取消你git add 后的那个文件，就是把绿色的变成红色的</p>
<h1 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h1><p>git merge 工具用来合并一个或者多个分支到你已经检出的分支中。 然后它将当前分支指针移动到合并结果上。  </p>
<p>–ff  快进式的合并（fast-forward），  这时候只会更新分支的指向，不会创建一个”merge xxxx”这样的一个提交的。这个是默认行为。<br>–no-ff 这个选项是 非快快进的，它总是会创建一个”merge xxx“这样的一个提交的。不管你是快进式，还是非快进式的。<br>–ff-only  这个选项是只采用快进式的，如果不是快进式就会报错退出合并操作的。<br>–squash, –no-squash<br>git merge –abort #终止合并操作，恢复合并前的状态。<br>git merge –continue # 继续合并操作  </p>
<h1 id="git-mergetool"><a href="#git-mergetool" class="headerlink" title="git mergetool"></a>git mergetool</h1><p>当你在 Git 的合并中遇到问题时，可以使用 git mergetool 来启动一个外部的合并帮助工具。  </p>
<h1 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h1><p>git log 命令用来展示一个项目的可达历史记录，从最近的提交快照起。<br>默认情况下，它只显示你当前所在分支的历史记录，但是可以显示不同的甚至多个头记录或分支以供遍历。<br>此命令通常也用来在提交记录级别显示两个或多个分支之间的差异。   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> -p  <span class="comment">#选项展开显示每次提交的内容差异，按补丁格式显示每个更新之间的差异。</span></span><br><span class="line">git <span class="built_in">log</span> -2  <span class="comment"># 用 -2 则仅显示最近的两次更新</span></span><br><span class="line">git <span class="built_in">log</span> -p  --word-diff <span class="comment">#--word-diff获取单词层面上的对比.</span></span><br><span class="line"><span class="comment"># 在程序代码中进行单词层面的对比常常是没什么用的。不过当你需要在书籍、论文这种很大的文本文件上进行对比的时候，这个功能就显出用武之地了。</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span> <span class="comment"># --stat，仅显示简要的增改行数统计</span></span><br><span class="line">git <span class="built_in">log</span> --shortstat	 <span class="comment"># 只显示 --stat 中最后的行数修改添加移除统计。</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> --name-only  <span class="comment">#仅在提交信息后显示已修改的文件清单</span></span><br><span class="line">git <span class="built_in">log</span> --name-status<span class="comment">#显示新增、修改、删除的文件清单</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> --abbrev-commit <span class="comment"># 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。</span></span><br><span class="line"></span><br><span class="line">git  <span class="built_in">log</span> --oneline  <span class="comment"># --pretty=oneline --abbrev-commit 的简化用法。</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们还可以对历史进行格式化输出，利用–pretty 选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --pretty[=&lt;format&gt;] <span class="comment"># 其中&lt;format&gt;可以是oneline, short, medium, full, fuller, email, raw, format:&lt;string&gt;, tformat:&lt;string&gt;</span></span><br><span class="line"><span class="comment"># 默认是medium样式的输出。可以配置到gitconfig文件改变这个默认样式。</span></span><br></pre></td></tr></table></figure>

<p>oneline的样式是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;sha1&gt; &lt;title line&gt;</span><br></pre></td></tr></table></figure>
<p>short的样式是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    commit &lt;sha1&gt;</span><br><span class="line">    Author: &lt;author&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;title line&gt;</span><br><span class="line">```    </span><br><span class="line">medium的样式是</span><br></pre></td></tr></table></figure>
<pre><code>commit &lt;sha1&gt;
Author: &lt;author&gt;
Date:   &lt;author date&gt;

&lt;title line&gt;

&lt;full commit message&gt;    
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">full的样式是</span><br></pre></td></tr></table></figure>
<pre><code>commit &lt;sha1&gt;
Author: &lt;author&gt;
Commit: &lt;committer&gt;

&lt;title line&gt;

&lt;full commit message&gt;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fuller的样式是</span><br></pre></td></tr></table></figure>
<pre><code>commit &lt;sha1&gt;
Author:     &lt;author&gt;
AuthorDate: &lt;author date&gt;
Commit:     &lt;committer&gt;
CommitDate: &lt;committer date&gt;

&lt;title line&gt;

&lt;full commit message&gt;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">email的样式是</span><br></pre></td></tr></table></figure>
<pre><code>From &lt;sha1&gt; &lt;date&gt;
From: &lt;author&gt;
Date: &lt;author date&gt;
Subject: [PATCH] &lt;title line&gt;

&lt;full commit message&gt;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">raw的样式</span><br><span class="line">```text</span><br><span class="line">    commit &lt;sha1&gt;</span><br><span class="line">    tree &lt;sha1&gt;</span><br><span class="line">    parent &lt;sha1&gt;</span><br><span class="line">    author &lt;author&gt; 1528082498 +0800</span><br><span class="line">    committer &lt;date&gt; 1528082498 +0800</span><br><span class="line">    </span><br><span class="line">        &lt;full commit message&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>format:<string>的，这种自定义样式更强大，功能更丰富。类似printf的格式化输出。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"># 例如： format:&quot;The author of %h was %an, %ar%nThe title was &gt;&gt;%s&lt;&lt;%n&quot;，其中使用%n来换行。</span><br><span class="line"></span><br><span class="line">可以用的占位符有：</span><br><span class="line">    ·   %H: commit hash  提交对象（commit）的完整哈希字串</span><br><span class="line">    ·   %h: abbreviated commit hash 提交对象的简短哈希字串</span><br><span class="line">    ·   %T: tree hash  树对象（tree）的完整哈希字串</span><br><span class="line">    ·   %t: abbreviated tree hash 树对象的简短哈希字串</span><br><span class="line">    ·   %P: parent hashes  父对象（parent）的完整哈希字串</span><br><span class="line">    ·   %p: abbreviated parent hashes 父对象的简短哈希字串</span><br><span class="line">    ·   %an: author name 作者（author）的名字</span><br><span class="line">    ·   %aN: author name (respecting .mailmap, see git-shortlog(1) or git-blame(1))</span><br><span class="line">    ·   %ae: author email 作者的电子邮件地址</span><br><span class="line">    ·   %aE: author email (respecting .mailmap, see git-shortlog(1) or git-blame(1))</span><br><span class="line">    ·   %ad: author date (format respects --date= option) 作者修订日期（可以用 -date= 选项定制格式）</span><br><span class="line">    ·   %aD: author date, RFC2822 style</span><br><span class="line">    ·   %ar: author date, relative  作者修订日期，按多久以前的方式显示</span><br><span class="line">    ·   %at: author date, UNIX timestamp</span><br><span class="line">    ·   %ai: author date, ISO 8601-like format</span><br><span class="line">    ·   %aI: author date, strict ISO 8601 format</span><br><span class="line">    ·   %cn: committer name  提交者(committer)的名字</span><br><span class="line">    ·   %cN: committer name (respecting .mailmap, see git-shortlog(1) or git-blame(1))</span><br><span class="line">    ·   %ce: committer email 提交者的电子邮件地址</span><br><span class="line">    ·   %cE: committer email (respecting .mailmap, see git-shortlog(1) or git-blame(1))</span><br><span class="line">    ·   %cd: committer date (format respects --date= option) 提交日期（可以用 -date= 选项定制格式）</span><br><span class="line">    ·   %cD: committer date, RFC2822 style</span><br><span class="line">    ·   %cr: committer date, relative  提交日期，按多久以前的方式显示</span><br><span class="line">    ·   %ct: committer date, UNIX timestamp</span><br><span class="line">    ·   %ci: committer date, ISO 8601-like format</span><br><span class="line">    ·   %cI: committer date, strict ISO 8601 format</span><br><span class="line">    ·   %d: ref names, like the --decorate option of git-log(1)</span><br><span class="line">    ·   %D: ref names without the &quot; (&quot;, &quot;)&quot; wrapping.</span><br><span class="line">    ·   %e: encoding</span><br><span class="line">    ·   %s: subject  提交说明</span><br><span class="line">    ·   %f: sanitized subject line, suitable for a filename</span><br><span class="line">    ·   %b: body</span><br><span class="line">    ·   %B: raw body (unwrapped subject and body)</span><br><span class="line">    ·   %N: commit notes</span><br><span class="line">    ·   %GG: raw verification message from GPG for a signed commit</span><br><span class="line">    ·   %G?: show &quot;G&quot; for a good (valid) signature, &quot;B&quot; for a bad signature, &quot;U&quot; for a good</span><br><span class="line">             signature with unknown validity, &quot;X&quot; for a good signature that has expired, &quot;Y&quot; for a</span><br><span class="line">             good signature made by an expired key, &quot;R&quot; for a good signature made by a revoked key, </span><br><span class="line">             &quot;E&quot; if the signature cannot be checked (e.g. missing key) and &quot;N&quot; for no signature</span><br><span class="line">    ·   %GS: show the name of the signer for a signed commit</span><br><span class="line">    ·   %GK: show the key used to sign a signed commit</span><br><span class="line">    ·   %gD: reflog selector, e.g., refs/stash@&#123;1&#125; or refs/stash@&#123;2 minutes ago&#125;; the format follows </span><br><span class="line">             the rules described for the -g option. The portion before the @ is the refname</span><br><span class="line">             as given on the command line (so git log -g refs/heads/master would yield refs/heads/master@&#123;0&#125;).</span><br><span class="line">    ·   %gd: shortened reflog selector; same as %gD, but the refname portion is shortened for human readability</span><br><span class="line">             (so refs/heads/master becomes just master).</span><br><span class="line">    ·   %gn: reflog identity name</span><br><span class="line">    ·   %gN: reflog identity name (respecting .mailmap, see git-shortlog(1) or git-blame(1))</span><br><span class="line">    ·   %ge: reflog identity email</span><br><span class="line">    ·   %gE: reflog identity email (respecting .mailmap, see git-shortlog(1) or git-blame(1))</span><br><span class="line">    ·   %gs: reflog subject</span><br><span class="line">    ·   %Cred: switch color to red</span><br><span class="line">    ·   %Cgreen: switch color to green</span><br><span class="line">    ·   %Cblue: switch color to blue</span><br><span class="line">    ·   %Creset: reset color</span><br><span class="line">    ·   %C(...): color specification, as described under Values in the &quot;CONFIGURATION FILE&quot; section of git-config(1). </span><br><span class="line">                 By default, colors are shown only when enabled for log output</span><br><span class="line">                 (by color.diff, color.ui, or --color, and respecting the auto settings of the former if we are going to a terminal).</span><br><span class="line">                 %C(auto,...)  is accepted as a historical synonym for</span><br><span class="line">                 the default (e.g., %C(auto,red)). Specifying %C(always,...) will show the colors even </span><br><span class="line">                 when color is not otherwise enabled (though consider just using `--color=always to</span><br><span class="line">                 enable color for the whole output, including this format and anything else git might color).</span><br><span class="line">                 auto alone (i.e.  %C(auto)) will turn on auto coloring on the next</span><br><span class="line">                 placeholders until the color is switched again.</span><br><span class="line">    ·   %m: left (&lt;), right (&gt;) or boundary (-) mark</span><br><span class="line">    ·   %n: newline</span><br><span class="line">    ·   %%: a raw %</span><br><span class="line">    ·   %x00: print a byte from a hex code</span><br><span class="line">    ·   %w([&lt;w&gt;[,&lt;i1&gt;[,&lt;i2&gt;]]]): switch line wrapping, like the -w option of git-shortlog(1).</span><br><span class="line">    ·   %&lt;(&lt;N&gt;[,trunc|ltrunc|mtrunc]): make the next placeholder take at least N columns, padding spaces on the </span><br><span class="line">                                        right if necessary. Optionally truncate at the beginning (ltrunc),</span><br><span class="line">                                        the middle (mtrunc) or the end (trunc) if the output is longer than N columns.</span><br><span class="line">                                        Note that truncating only works correctly with N &gt;= 2.</span><br><span class="line">    ·   %&lt;|(&lt;N&gt;): make the next placeholder take at least until Nth columns, padding spaces on the right if necessary</span><br><span class="line">    ·   %&gt;(&lt;N&gt;), %&gt;|(&lt;N&gt;): similar to %&lt;(&lt;N&gt;), %&lt;|(&lt;N&gt;) respectively, but padding spaces on the left</span><br><span class="line">    ·   %&gt;&gt;(&lt;N&gt;), %&gt;&gt;|(&lt;N&gt;): similar to %&gt;(&lt;N&gt;), %&gt;|(&lt;N&gt;) respectively, except that if the next placeholder takes </span><br><span class="line">                             more spaces than given and there are spaces on its left, use those spaces</span><br><span class="line">    ·   %&gt;&lt;(&lt;N&gt;), %&gt;&lt;|(&lt;N&gt;): similar to % &lt;(&lt;N&gt;), %&lt;|(&lt;N&gt;) respectively, but padding both sides (i.e. the text is centered)</span><br><span class="line">    ·   %(trailers): display the trailers of the body as interpreted by git-interpret-trailers(1)           </span><br><span class="line">需要注意的是有些占位符需要和某些选择配合使用的。              </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>git log  –graph，  用 oneline 或 format 时结合 –graph 选项，可以看到开头多出一些 ASCII 字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&quot;%h %s&quot; --graph</span><br><span class="line">* 2d3acf9 ignore errors from SIGCHLD on trap</span><br><span class="line">*  5e3ee11 Merge branch &#x27;master&#x27; of git://github.com/dustin/grit</span><br><span class="line">|\</span><br><span class="line">| * 420eac9 Added a method for getting the current branch.</span><br><span class="line">* | 30e367c timeout code and tests</span><br><span class="line">* | 5a09431 add timeout protection to grit</span><br><span class="line">* | e1193f8 support for heads with slashes in them</span><br><span class="line">|/</span><br><span class="line">* d6016bc require time for xmlschema</span><br><span class="line">*  11d191e Merge branch &#x27;defunkt&#x27; into local</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>限制输出长度 –since</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-&lt;n&gt; 选项,后面跟上数字，显示最新的几个提交。</span><br><span class="line">--since, --after  仅显示指定时间之后的提交。 </span><br><span class="line">--until, --before仅显示指定时间之前的提交</span><br><span class="line">--author 仅显示指定作者相关的提交。</span><br><span class="line">--committer 仅显示指定提交者相关的提交。</span><br><span class="line"></span><br><span class="line">$ git log --since=2.weeks     #</span><br><span class="line"></span><br><span class="line">$ git log --pretty=&quot;%h - %s&quot; --author=gitster --since=&quot;2008-10-01&quot; --before=&quot;2008-11-01&quot; --no-merges -- t/</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>下面是定义的几个常用的git log的别名。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">last = log -1 HEAD  </span><br><span class="line">lo   = log --oneline  </span><br><span class="line">ll   = log --graph --format=format:&#x27;%C(bold blue)%h%C(reset) %C(red)%&lt;(100,trunc)%s%C(reset) %C(bold black)— %an%C(reset)%C(bold green)%d%C(reset) - %C(bold green)(%ar)%C(reset)&#x27; --abbrev-commit --date=relative --show-signature   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>比较2个分支的差异的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git lc   = log --left-right --cherry-pick --date=short --pretty=&#x27;%m || %h ||  %&lt;(120,trunc)%s (%&lt;(10,trunc)%an) (%cd)&#x27;    </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">git stash 命令用来临时地保存一些还没有提交的工作，以便在分支上不需要提交未完成工作就可以清理工作目录。  </span><br><span class="line">git stash用于想要保存当前的修改,但是想回到之前最后一次提交的干净的工作仓库时进行的操作.git stash将本地的修改保存起来,并且将当前代码切换到HEAD提交上.</span><br><span class="line">通过git stash存储的修改列表,可以通过git stash list查看.git stash show用于校验,git stash apply用于重新存储.直接执行git stash等同于git stash save.</span><br><span class="line"></span><br><span class="line">最新的存储保存在refs/stash中.老的存储可以通过相关的参数获得,例如stash@&#123;0&#125;获取最新的存储,stash@&#123;1&#125;获取次新.stash@&#123;2.hour.ago&#125;获取两小时之前的.存储可以直接通过索引的位置来获得stash@&#123;n&#125;.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git stash   save [-p|--patch] [-k|--[no-]keep-index] [-u|--include-untracked] [-a|--all] [-q|--quiet] [&lt;message&gt;]</span><br><span class="line"></span><br><span class="line">git stash   push [-p|--patch] [-k|--[no-]keep-index] [-u|--include-untracked] [-a|--all] [-q|--quiet] [-m|--message &lt;message&gt;] [--] [&lt;pathspec&gt;…​]</span><br><span class="line"></span><br><span class="line">save和push命令都可以用于存储修改.并且将git的工作状态切回到HEAD也就是上一次合法提交上.后面的&lt;message&gt;是选填项.</span><br><span class="line"></span><br><span class="line">save 子命令最后可以跟上一个描述信息。用push的话需要加上-m选项的。</span><br><span class="line">push子命令最后可以跟上多个patspec。</span><br><span class="line"></span><br><span class="line">--keep-index(简写为-k)只会存储为加入git管理的文件，未追踪的文件不会加入。</span><br><span class="line">--include-untracked未追踪的文件也会被缓存,当前的工作空间会被恢复为完全清空的状态.</span><br><span class="line">--all,那么除了未加入管理的文件,被git忽略(ignore)的文件也会被缓存.</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">git stash list 查看现有的储藏 </span><br><span class="line">  </span><br><span class="line">git stash apply 重新应用你刚刚实施的储藏 </span><br><span class="line"> </span><br><span class="line">git stash apply stash@&#123;2&#125;。指定应用第二个。如果你不指明，Git 默认使用最近的储藏并尝试应用它.  </span><br><span class="line"></span><br><span class="line">git stash drop，加上你希望移除的储藏的名字</span><br><span class="line"></span><br><span class="line">git stash show 展示存储单元和最新提交的diff结果.如果没有给定&lt;stash&gt;参数时,会对比最新的存储单元.</span><br><span class="line"></span><br><span class="line">git stash pop 移除单个存储单元.和git stash save的作用相反  </span><br></pre></td></tr></table></figure>
<p>开发到一半,同步远端代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">当你的开发进行到一半,但是代码还不想进行提交 ,然后需要同步去关联远端代码时.如果你本地的代码和远端代码没有冲突时,</span><br><span class="line">可以直接通过git pull解决.但是如果可能发生冲突怎么办.直接git pull会拒绝覆盖当前的修改.</span><br><span class="line"></span><br><span class="line">遇到这种情况,需要先保存本地的代码,进行git pull,然后再pop出本地代码:</span><br></pre></td></tr></table></figure>


<p>工作流被打断,需要先做别的需求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">当开发进行到一半,老板过来跟你说&quot;线上有个bug,你现在给我改好,不然扣你鸡腿&quot;.当然,你可以开一个新的分支,</span><br><span class="line">把当前代码提交过去,回头再merge,具体代码如下 </span><br><span class="line">繁琐的工作流示例</span><br><span class="line"># ... hack hack hack ...</span><br><span class="line"> git checkout -b my_wip</span><br><span class="line"> git commit -a -m &quot;WIP&quot;</span><br><span class="line"> git checkout master</span><br><span class="line"> edit emergency fix</span><br><span class="line"> git commit -a -m &quot;Fix in a hurry&quot;</span><br><span class="line"> git checkout my_wip</span><br><span class="line"> git reset --soft HEAD^</span><br><span class="line"># ... continue hacking ...</span><br><span class="line"></span><br><span class="line">我们可以通过git stash来简化这个流程</span><br><span class="line">正确姿势</span><br><span class="line"># ... hack hack hack ...</span><br><span class="line"> git stash        //保存开发到一半的代码</span><br><span class="line"> edit emergency fix</span><br><span class="line"> git commit -a -m &quot;Fix in a hurry&quot;</span><br><span class="line"> git stash pop   //将代码追加到最新的提交之后</span><br><span class="line"># ... continue hacking ...</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="git-worktree"><a href="#git-worktree" class="headerlink" title="git worktree"></a>git worktree</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">管理多个工作目录的一个命令</span><br><span class="line"></span><br><span class="line">git worktree add [-f] [--detach] [--checkout] [--lock] [-b &lt;new-branch&gt;] &lt;path&gt; [&lt;commit-ish&gt;]</span><br><span class="line">git worktree list [--porcelain]</span><br><span class="line">git worktree lock [--reason &lt;string&gt;] &lt;worktree&gt;</span><br><span class="line">git worktree move &lt;worktree&gt; &lt;new-path&gt;</span><br><span class="line">git worktree prune [-n] [-v] [--expire &lt;expire&gt;]</span><br><span class="line">git worktree remove [-f] &lt;worktree&gt;</span><br><span class="line">git worktree unlock &lt;worktree&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这个命令和git stash有相似的使用场景。当工作被打断了，有不想取储存，就可以使用这个新建个干净的工作目录。</span><br><span class="line">You are <span class="keyword">in</span> the middle of a refactoring session and your boss comes <span class="keyword">in</span> and demands that you fix something immediately. You might typically use git-stash(1) to store your changes away temporarily, however, your working</span><br><span class="line">tree is <span class="keyword">in</span> such a state of disarray (with new, moved, and removed files, and other bits and pieces strewn around) that you don’t want to risk disturbing any of it. Instead, you create a temporary linked working tree to</span><br><span class="line">make the emergency fix, remove it when <span class="keyword">done</span>, and <span class="keyword">then</span> resume your earlier refactoring session.</span><br><span class="line"></span><br><span class="line">$ git worktree add -b emergency-fix ../temp master</span><br><span class="line">$ <span class="built_in">pushd</span> ../temp</span><br><span class="line"><span class="comment"># ... hack hack hack ...</span></span><br><span class="line">$ git commit -a -m <span class="string">&#x27;emergency fix for boss&#x27;</span></span><br><span class="line">$ <span class="built_in">popd</span></span><br><span class="line">$ <span class="built_in">rm</span> -rf ../temp</span><br><span class="line">$ git worktree prune</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h1><p>git tag 命令用来为代码历史记录中的某一个点指定一个永久的书签。<br>git tag -l<br>git tag -d  </p>
<h1 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h1><p>git fetch 命令与一个远程的仓库交互，并且将远程仓库中有但是在当前仓库的没有的所有信息拉取下来然后存储在你本地数据库中。<br>git fetch origin   </p>
<p>–all 下载所有的远程仓库<br>-p, –prune 删除本地所有追踪分支，对应的服务器上的分支不存在的追踪分支。<br>-n, –no-tags 不下载标签<br>-t, –tags 下载所有标签  </p>
<p>引用规格的格式由一个可选的 + 号和紧随其后的 <src>:<dst> 组成，<br>其中 <src> 是一个模式（pattern），代表远程版本库中的引用；<br><dst> 是那些远程引用在本地所对应的位置。  </p>
<ul>
<li>号告诉 Git 即使在不能快进的情况下也要（强制）更新引用。</li>
</ul>
<p>默认情况下，引用规格由 git remote add 命令自动生成， Git 获取服务器中 refs&#x2F;heads&#x2F; 下面的所有引用，<br>并将它写入到本地的 refs&#x2F;remotes&#x2F;origin&#x2F; 中。 所以，如果服务器上有一个 master 分支，我们可以在本地通过下面这种方式来访问该分支上的提交记录：  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git log origin/master</span><br><span class="line">$ git log remotes/origin/master</span><br><span class="line">$ git log refs/remotes/origin/master</span><br><span class="line"></span><br><span class="line"># 上面的三个命令作用相同，因为 Git 会把它们都扩展成 refs/remotes/origin/master。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果想让 Git 每次只拉取远程的 master 分支，而不是所有分支，可以把（引用规格的）获取那一行修改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch = +refs/heads/master:refs/remotes/origin/master</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>当然你也可以直接在git fetch 后面跟上,你也可以指定多个引用规格。 在命令行中，你可以按照如下的方式拉取多个分支：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin master:refs/remotes/origin/mymaster</span><br><span class="line"></span><br><span class="line">$ git fetch origin master:refs/remotes/origin/mymaster topic:refs/remotes/origin/topic</span><br><span class="line">From git@github.com:schacon/simplegit</span><br><span class="line">! [rejected]        master     -&gt; origin/mymaster  (non fast forward)</span><br><span class="line">* [new branch]      topic      -&gt; origin/topic</span><br><span class="line">#在这个例子中，对 master 分支的拉取操作被拒绝，因为它不是一个可以快进的引用。 我们可以通过在引用规格之前指定 + 号来覆盖该规则。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>你也可以在配置文件中指定多个用于获取操作的引用规格。 如果想在每次获取时都包括 master 和 experiment 分支，添加如下两行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[remote &quot;origin&quot;]</span><br><span class="line">    url = https://github.com/schacon/simplegit-progit</span><br><span class="line">    fetch = +refs/heads/master:refs/remotes/origin/master</span><br><span class="line">    fetch = +refs/heads/experiment:refs/remotes/origin/experiment</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们不能在模式中使用部分通配符，所以像下面这样的引用规格是不合法的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch = +refs/heads/qa*:refs/remotes/origin/qa*  # 这个不对的，不能两边都是星号的.这个在高版本git中可以用</span><br><span class="line">fetch = +refs/heads/*:refs/remotes/origin/qa*   # 不过可以这样，这样把服务器的分支都下载本地，本地都以qa开头。</span><br><span class="line"></span><br><span class="line">fetch = +refs/heads/qa/*:refs/remotes/origin/qa/* # 这样的也是可以的,heads后面可以跟任意多层的，就像路径那样的层次结构一样</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h1><p>git pull 命令基本上就是 git fetch 和 git merge 命令的组合体，Git 从你指定的远程仓库中抓取内容，然后马上尝试将其合并进你所在的分支中。<br>git pull 等价于 git fetch  然后 git merge FETCH_HEAD<br>git pull –rebase  </p>
<h1 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h1><p>git push origin HEAD:master<br>git push origin HEAD:refs&#x2F;heads&#x2F;master<br>git push <a href="mailto:&#103;&#105;&#116;&#64;&#x31;&#x39;&#50;&#46;&#49;&#x36;&#x38;&#46;&#49;&#x2e;&#49;&#x30;&#x36;">&#103;&#105;&#116;&#64;&#x31;&#x39;&#50;&#46;&#49;&#x36;&#x38;&#46;&#49;&#x2e;&#49;&#x30;&#x36;</a>:mage&#x2F;my-git-project.git  HEAD:refs&#x2F;heads&#x2F;dev<br>git push origin HEAD:refs&#x2F;for&#x2F;master<br>git push origin HEAD:refs&#x2F;tags&#x2F;v1.0<br>git push origin master:refs&#x2F;heads&#x2F;master<br>git push origin refs&#x2F;heads&#x2F;master:refs&#x2F;heads&#x2F;master<br>git push origin master:refs&#x2F;heads&#x2F;qa&#x2F;master<br>git push origin :topic 删除  </p>
<h1 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h1><p>git remote 命令是一个是你远程仓库记录的管理工具。<br>它允许你将一个长的 URL 保存成一个简写的句柄，例如 origin ，这样你就可以不用每次都输入他们了。<br>你可以有多个这样的句柄，git remote 可以用来添加，修改，及删除它们。<br>git remote add <name> <url>   </p>
<h1 id="git-archive"><a href="#git-archive" class="headerlink" title="git archive"></a>git archive</h1><p>git archive 命令用来创建项目一个指定快照的归档文件。<br>我们在 准备一次发布 一节中，使用 git archive 命令来创建一个项目的归档文件用于分享。  </p>
<h1 id="git-submodule"><a href="#git-submodule" class="headerlink" title="git submodule"></a>git submodule</h1><p>git submodule 命令用来管理一个仓库的其他外部仓库。 它可以被用在库或者其他类型的共享资源上。<br>submodule 命令有几个子命令, 如（add、update、sync 等等）用来管理这些资源。<br>git submodule update –remote 来从上游拉取新工作<br>git submodule update –remote –rebase<br>参考：<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97">https://git-scm.com/book/zh/v2/Git-工具-子模块</a>   </p>
<h1 id="git-show"><a href="#git-show" class="headerlink" title="git show"></a>git show</h1><p>git show 命令可以以一种简单的人类可读的方式来显示一个 Git 对象。 你一般使用此命令来显示一个标签或一个提交的信息。  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git show [&lt;options&gt;] &lt;object&gt;...</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里的&lt;object&gt;可以是tree,blob,commit,tag</span></span><br><span class="line"></span><br><span class="line">git cat-file -p HEAD^&#123;tree&#125; <span class="comment"># 得到当前HEAD对应的tree-blob结构</span></span><br><span class="line">git show blobID <span class="comment">#显示文件内容</span></span><br><span class="line">git show -s --pretty=raw  commitID <span class="comment"># 显示commit的具体信息</span></span><br><span class="line">git cat-file tag &lt;TAG&gt; 显示tag的具体信息</span><br></pre></td></tr></table></figure>

<p>这个命令和git log命令有很多重复的地方，重复的选项等。</p>
<p>git show –notes,–no-notes</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ git config --add remote.origin.fetch +refs/notes/*:refs/notes/*</span><br><span class="line">$ git config notes.displayRef refs/notes/*</span><br><span class="line">配置了上面的选项会下载到 notes的信息，一般是review的相关信息</span><br><span class="line"></span><br><span class="line">$ git show</span><br><span class="line">commit 9a460a3af12a150192c84f568c28e78bc256cabc (HEAD, changes/66/83266/1)</span><br><span class="line">Author: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">Date:   Tue Jun 12 19:33:15 2018 +0800</span><br><span class="line"></span><br><span class="line">    example: add platform/vendor/zui/app/BSAMAgent</span><br><span class="line">    </span><br><span class="line">    Change-Id: I6d632133aaf2ae5cdc99df56f2e499443caf24d2</span><br><span class="line">    Signed-off-by: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line"></span><br><span class="line">Notes (review):</span><br><span class="line">    Code-Review+1: Jira &lt;jira@马哥私房菜.com&gt;</span><br><span class="line">    Code-Review+2: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">    Verified+1: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">    Submitted-by: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">    Submitted-at: Tue, 12 Jun 2018 19:34:07 +0800</span><br><span class="line">    Reviewed-on: http://gerrit.马哥私房菜.com:8080/83266</span><br><span class="line">    Project: git/android/platform/manifest</span><br><span class="line">    Branch: refs/heads/bs_master</span><br><span class="line"></span><br><span class="line">如果没有配置“$ git config notes.displayRef refs/notes/*”这个，</span><br><span class="line">默认git show不会显示notes信息的，可以带上--notes选项来使用。</span><br><span class="line">$ git show --notes=refs/notes/review  </span><br><span class="line">commit 9a460a3af12a150192c84f568c28e78bc256cabc (HEAD, changes/66/83266/1)</span><br><span class="line">Author: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">Date:   Tue Jun 12 19:33:15 2018 +0800</span><br><span class="line"></span><br><span class="line">    example: add platform/vendor/马哥私房菜/zui/app/BSAMAgent</span><br><span class="line">    </span><br><span class="line">    Change-Id: I6d632133aaf2ae5cdc99df56f2e499443caf24d2</span><br><span class="line">    Signed-off-by: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line"></span><br><span class="line">Notes (review):</span><br><span class="line">    Code-Review+1: Jira &lt;jira@马哥私房菜.com&gt;</span><br><span class="line">    Code-Review+2: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">    Verified+1: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">    Submitted-by: 马哥私房菜 &lt;bright.ma@马哥私房菜.com&gt;</span><br><span class="line">    Submitted-at: Tue, 12 Jun 2018 19:34:07 +0800</span><br><span class="line">    Reviewed-on: http://gerrit.马哥私房菜.com:8080/83266</span><br><span class="line">    Project: git/android/platform/manifest</span><br><span class="line">    Branch: refs/heads/bs_master</span><br><span class="line"></span><br><span class="line">使用--no-notes选项可以不显示notes信息。</span><br><span class="line">$ git show --no-notes </span><br></pre></td></tr></table></figure>
<p>git show</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#什么参数都加 是显示HEAD指向的那个提交信息的</span></span><br><span class="line">$ git --no-pager show   </span><br><span class="line">commit da40341a3e6e2e45877426aaefb97b3f0735a776 (HEAD -&gt; master, origin/master, origin/HEAD, new)</span><br><span class="line">Author: Nasser Grainawi &lt;nasser@codeaurora.org&gt;</span><br><span class="line">Date:   Fri May 4 12:53:29 2018 -0600</span><br><span class="line"></span><br><span class="line">    manifest: Support a default upstream value</span><br><span class="line">    </span><br><span class="line">    It<span class="string">&#x27;s convenient to set upstream for all projects in a manifest instead of</span></span><br><span class="line"><span class="string">    repeating the same value for each project.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Change-Id: I946b1de4efb01b351c332dfad108fa7d4f443cba</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">diff --git a/docs/manifest-format.txt b/docs/manifest-format.txt</span></span><br><span class="line"><span class="string">index 56bdf14..0c957dd 100644</span></span><br><span class="line"><span class="string">--- a/docs/manifest-format.txt</span></span><br><span class="line"><span class="string">+++ b/docs/manifest-format.txt</span></span><br><span class="line"><span class="string">@@ -44,6 +44,7 @@ following DTD:</span></span><br><span class="line"><span class="string">     &lt;!ATTLIST default remote      IDREF #IMPLIED&gt;</span></span><br><span class="line"><span class="string">     &lt;!ATTLIST default revision    CDATA #IMPLIED&gt;</span></span><br><span class="line"><span class="string">     &lt;!ATTLIST default dest-branch CDATA #IMPLIED&gt;</span></span><br><span class="line"><span class="string">+    &lt;!ATTLIST default upstream    CDATA #IMPLIED&gt;</span></span><br><span class="line"><span class="string">     &lt;!ATTLIST default sync-j      CDATA #IMPLIED&gt;</span></span><br><span class="line"><span class="string">     &lt;!ATTLIST default sync-c      CDATA #IMPLIED&gt;</span></span><br><span class="line"><span class="string">     &lt;!ATTLIST default sync-s      CDATA #IMPLIED&gt;</span></span><br><span class="line"><span class="string">@@ -164,6 +165,11 @@ Project elements not setting their own `dest-branch` will inherit</span></span><br><span class="line"><span class="string"> this value. If this value is not set, projects will use `revision`</span></span><br><span class="line"><span class="string"> by default instead.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">+Attribute `upstream`: Name of the Git ref in which a sha1</span></span><br><span class="line"><span class="string">+can be found.  Used when syncing a revision locked manifest in</span></span><br><span class="line"><span class="string">+-c mode to avoid having to sync the entire ref space. Project elements</span></span><br><span class="line"><span class="string">+not setting their own `upstream` will inherit this value.</span></span><br><span class="line"><span class="string">+</span></span><br><span class="line"><span class="string"> Attribute `sync-j`: Number of parallel jobs to use when synching.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> Attribute `sync-c`: Set to true to only sync the given Git</span></span><br><span class="line"><span class="string">diff --git a/manifest_xml.py b/manifest_xml.py</span></span><br><span class="line"><span class="string">index 60d6116..d0211ea 100644</span></span><br><span class="line"><span class="string">--- a/manifest_xml.py</span></span><br><span class="line"><span class="string">+++ b/manifest_xml.py</span></span><br><span class="line"><span class="string">@@ -59,6 +59,7 @@ class _Default(object):</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">   revisionExpr = None</span></span><br><span class="line"><span class="string">   destBranchExpr = None</span></span><br><span class="line"><span class="string">+  upstreamExpr = None</span></span><br><span class="line"><span class="string">   remote = None</span></span><br><span class="line"><span class="string">   sync_j = 1</span></span><br><span class="line"><span class="string">   sync_c = False</span></span><br><span class="line"><span class="string">@@ -230,6 +231,9 @@ class XmlManifest(object):</span></span><br><span class="line"><span class="string">     if d.destBranchExpr:</span></span><br><span class="line"><span class="string">       have_default = True</span></span><br><span class="line"><span class="string">       e.setAttribute(&#x27;</span>dest-branch<span class="string">&#x27;, d.destBranchExpr)</span></span><br><span class="line"><span class="string">+    if d.upstreamExpr:</span></span><br><span class="line"><span class="string">+      have_default = True</span></span><br><span class="line"><span class="string">+      e.setAttribute(&#x27;</span>upstream<span class="string">&#x27;, d.upstreamExpr)</span></span><br><span class="line"><span class="string">     if d.sync_j &gt; 1:</span></span><br><span class="line"><span class="string">       have_default = True</span></span><br><span class="line"><span class="string">       e.setAttribute(&#x27;</span>sync-j<span class="string">&#x27;, &#x27;</span>%d<span class="string">&#x27; % d.sync_j)</span></span><br><span class="line"><span class="string">@@ -295,7 +299,8 @@ class XmlManifest(object):</span></span><br><span class="line"><span class="string">         revision = self.remotes[p.remote.orig_name].revision or d.revisionExpr</span></span><br><span class="line"><span class="string">         if not revision or revision != p.revisionExpr:</span></span><br><span class="line"><span class="string">           e.setAttribute(&#x27;</span>revision<span class="string">&#x27;, p.revisionExpr)</span></span><br><span class="line"><span class="string">-        if p.upstream and p.upstream != p.revisionExpr:</span></span><br><span class="line"><span class="string">+        if (p.upstream and (p.upstream != p.revisionExpr or</span></span><br><span class="line"><span class="string">+                            p.upstream != d.upstreamExpr)):</span></span><br><span class="line"><span class="string">           e.setAttribute(&#x27;</span>upstream<span class="string">&#x27;, p.upstream)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">       if p.dest_branch and p.dest_branch != d.destBranchExpr:</span></span><br><span class="line"><span class="string">@@ -694,6 +699,7 @@ class XmlManifest(object):</span></span><br><span class="line"><span class="string">       d.revisionExpr = None</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">     d.destBranchExpr = node.getAttribute(&#x27;</span>dest-branch<span class="string">&#x27;) or None</span></span><br><span class="line"><span class="string">+    d.upstreamExpr = node.getAttribute(&#x27;</span>upstream<span class="string">&#x27;) or None</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">     sync_j = node.getAttribute(&#x27;</span>sync-j<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">     if sync_j == &#x27;</span><span class="string">&#x27; or sync_j is None:</span></span><br><span class="line"><span class="string">@@ -830,7 +836,7 @@ class XmlManifest(object):</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">     dest_branch = node.getAttribute(&#x27;</span>dest-branch<span class="string">&#x27;) or self._default.destBranchExpr</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">-    upstream = node.getAttribute(&#x27;</span>upstream<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">+    upstream = node.getAttribute(&#x27;</span>upstream<span class="string">&#x27;) or self._default.upstreamExpr</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">     groups = &#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">     if node.hasAttribute(&#x27;</span><span class="built_in">groups</span><span class="string">&#x27;):</span></span><br><span class="line"><span class="string">                     </span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>git show -s, –no-patch 不显示提交更改的内容<br>默认是显示更改内容的，可以通过-p, -u, –patch选项来改变这个选项的行为。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git --no-pager show  --pretty=raw -s  </span><br><span class="line">commit cf7c0834cfc24c5c9584695c657c6baf97d0fbb3</span><br><span class="line">tree 49be7db9b2f7b0e0cf9026a84b81716ddfc66034</span><br><span class="line">parent 4ea1f0cabdda28fdee837ee2f99e14375028b5f4</span><br><span class="line">author Akshay Verma &lt;akshayverma948@gmail.com&gt; 1521131190 +0530</span><br><span class="line">committer Akshay Verma &lt;akshayverma948@gmail.com&gt; 1521284363 +0530</span><br><span class="line"></span><br><span class="line">    Download latest patch when no patch is specified</span><br><span class="line">    </span><br><span class="line">    When someone does <span class="string">&quot;repo download -c &lt;project&gt; &lt;change&gt;&quot;</span></span><br><span class="line">    without specifying a patch number, by default patch 1 is</span><br><span class="line">    downloaded. An alternative is to look <span class="keyword">for</span> the latest patch</span><br><span class="line">    and download the same when no explicit patch is given.</span><br><span class="line">    This commit does the same by identifying the latest patch</span><br><span class="line">    using <span class="string">&quot;git ls-remote&quot;</span>.</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ia5fa7364415f53a3d9436df4643e38f3c90ded58</span><br><span class="line">$      </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>git show –name-only，–name-status这个和git log 中的一样</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ git show --name-only </span><br><span class="line">commit cf7c0834cfc24c5c9584695c657c6baf97d0fbb3 (HEAD)</span><br><span class="line">Author: Akshay Verma &lt;akshayverma948@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 15 21:56:30 2018 +0530</span><br><span class="line"></span><br><span class="line">    Download latest patch when no patch is specified</span><br><span class="line">    </span><br><span class="line">    When someone does <span class="string">&quot;repo download -c &lt;project&gt; &lt;change&gt;&quot;</span></span><br><span class="line">    without specifying a patch number, by default patch 1 is</span><br><span class="line">    downloaded. An alternative is to look <span class="keyword">for</span> the latest patch</span><br><span class="line">    and download the same when no explicit patch is given.</span><br><span class="line">    This commit does the same by identifying the latest patch</span><br><span class="line">    using <span class="string">&quot;git ls-remote&quot;</span>.</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ia5fa7364415f53a3d9436df4643e38f3c90ded58</span><br><span class="line"></span><br><span class="line">project.py</span><br><span class="line">subcmds/download.py</span><br><span class="line"></span><br><span class="line">$ git show --name-status</span><br><span class="line">commit cf7c0834cfc24c5c9584695c657c6baf97d0fbb3 (HEAD)</span><br><span class="line">Author: Akshay Verma &lt;akshayverma948@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 15 21:56:30 2018 +0530</span><br><span class="line"></span><br><span class="line">    Download latest patch when no patch is specified</span><br><span class="line">    </span><br><span class="line">    When someone does <span class="string">&quot;repo download -c &lt;project&gt; &lt;change&gt;&quot;</span></span><br><span class="line">    without specifying a patch number, by default patch 1 is</span><br><span class="line">    downloaded. An alternative is to look <span class="keyword">for</span> the latest patch</span><br><span class="line">    and download the same when no explicit patch is given.</span><br><span class="line">    This commit does the same by identifying the latest patch</span><br><span class="line">    using <span class="string">&quot;git ls-remote&quot;</span>.</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ia5fa7364415f53a3d9436df4643e38f3c90ded58</span><br><span class="line"></span><br><span class="line">M       project.py</span><br><span class="line">M       subcmds/download.py</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>git show –abbrev-commit，–no-abbrev-commit 是显示40位commitid还是显示简短的commitid。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">使用 --abbrev-commit 选项显示简短的</span><br><span class="line">$ git show --abbrev-commit -s  </span><br><span class="line">commit cf7c083 (HEAD)</span><br><span class="line">Author: Akshay Verma &lt;akshayverma948@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 15 21:56:30 2018 +0530</span><br><span class="line"></span><br><span class="line">    Download latest patch when no patch is specified</span><br><span class="line">    </span><br><span class="line">    When someone does <span class="string">&quot;repo download -c &lt;project&gt; &lt;change&gt;&quot;</span></span><br><span class="line">    without specifying a patch number, by default patch 1 is</span><br><span class="line">    downloaded. An alternative is to look <span class="keyword">for</span> the latest patch</span><br><span class="line">    and download the same when no explicit patch is given.</span><br><span class="line">    This commit does the same by identifying the latest patch</span><br><span class="line">    using <span class="string">&quot;git ls-remote&quot;</span>.</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ia5fa7364415f53a3d9436df4643e38f3c90ded58</span><br><span class="line"></span><br><span class="line">同时可以使用--abbrev=3来决定显示几位commit <span class="built_in">id</span>。</span><br><span class="line">$ git show --abbrev-commit -s --abbrev=3  </span><br><span class="line">commit cf7c (HEAD)</span><br><span class="line">Author: Akshay Verma &lt;akshayverma948@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 15 21:56:30 2018 +0530</span><br><span class="line"></span><br><span class="line">    Download latest patch when no patch is specified</span><br><span class="line">    </span><br><span class="line">    When someone does <span class="string">&quot;repo download -c &lt;project&gt; &lt;change&gt;&quot;</span></span><br><span class="line">    without specifying a patch number, by default patch 1 is</span><br><span class="line">    downloaded. An alternative is to look <span class="keyword">for</span> the latest patch</span><br><span class="line">    and download the same when no explicit patch is given.</span><br><span class="line">    This commit does the same by identifying the latest patch</span><br><span class="line">    using <span class="string">&quot;git ls-remote&quot;</span>.</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ia5fa7364415f53a3d9436df4643e38f3c90ded58</span><br><span class="line"> </span><br><span class="line">$ git show --abbrev-commit -s --abbrev=15   </span><br><span class="line">commit cf7c0834cfc24c5 (HEAD)</span><br><span class="line">Author: Akshay Verma &lt;akshayverma948@gmail.com&gt;</span><br><span class="line">Date:   Thu Mar 15 21:56:30 2018 +0530</span><br><span class="line"></span><br><span class="line">    Download latest patch when no patch is specified</span><br><span class="line">    </span><br><span class="line">    When someone does <span class="string">&quot;repo download -c &lt;project&gt; &lt;change&gt;&quot;</span></span><br><span class="line">    without specifying a patch number, by default patch 1 is</span><br><span class="line">    downloaded. An alternative is to look <span class="keyword">for</span> the latest patch</span><br><span class="line">    and download the same when no explicit patch is given.</span><br><span class="line">    This commit does the same by identifying the latest patch</span><br><span class="line">    using <span class="string">&quot;git ls-remote&quot;</span>.</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ia5fa7364415f53a3d9436df4643e38f3c90ded58</span><br><span class="line"></span><br><span class="line">使用了--no-abbrev-commit选项就会显示完整的40位的commit <span class="built_in">id</span>了。</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>git show –oneline   显示为一行，和git log的一样效果。如果同时使用了-s那就是和git log –oneline -1 等价效果了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">$ git show --oneline </span><br><span class="line">cf7c083 (HEAD) Download latest patch when no patch is specified</span><br><span class="line">diff --git a/project.py b/project.py</span><br><span class="line">old mode 100644</span><br><span class="line">new mode 100755</span><br><span class="line">index e4682e6..5297a5c</span><br><span class="line">--- a/project.py</span><br><span class="line">+++ b/project.py</span><br><span class="line">@@ -2270,6 +2270,16 @@ class Project(object):</span><br><span class="line">       <span class="keyword">if</span> self._allrefs:</span><br><span class="line">         raise GitError(<span class="string">&#x27;%s cherry-pick %s &#x27;</span> % (self.name, rev))</span><br><span class="line"> </span><br><span class="line">+  def _LsRemote(self):</span><br><span class="line">+    cmd = [<span class="string">&#x27;ls-remote&#x27;</span>]</span><br><span class="line">+    p = GitCommand(self, cmd, capture_stdout=True)</span><br><span class="line">+    <span class="keyword">if</span> p.Wait() == 0:</span><br><span class="line">+      <span class="keyword">if</span> hasattr(p.stdout, <span class="string">&#x27;decode&#x27;</span>):</span><br><span class="line">+        <span class="built_in">return</span> p.stdout.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">+      <span class="keyword">else</span>:</span><br><span class="line">+        <span class="built_in">return</span> p.stdout</span><br><span class="line">+    <span class="built_in">return</span> None</span><br><span class="line">+</span><br><span class="line">   def _Revert(self, rev):</span><br><span class="line">     cmd = [<span class="string">&#x27;revert&#x27;</span>]</span><br><span class="line">     cmd.append(<span class="string">&#x27;--no-edit&#x27;</span>)</span><br><span class="line">diff --git a/subcmds/download.py b/subcmds/download.py</span><br><span class="line">old mode 100644</span><br><span class="line">new mode 100755</span><br><span class="line">index e1010aa..384af78</span><br><span class="line">--- a/subcmds/download.py</span><br><span class="line">+++ b/subcmds/download.py</span><br><span class="line">@@ -62,6 +62,14 @@ If no project is specified try to use current directory as a project.</span><br><span class="line">           ps_id = int(m.group(2))</span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">           ps_id = 1</span><br><span class="line">+          regex = r<span class="string">&#x27;refs/changes/%2.2d/%d/(\d+)&#x27;</span> % (chg_id % 100, chg_id)</span><br><span class="line">+          output = project._LsRemote()</span><br><span class="line">+          <span class="keyword">if</span> output:</span><br><span class="line">+            rcomp = re.compile(regex, re.I)</span><br><span class="line">+            <span class="keyword">for</span> line <span class="keyword">in</span> output.splitlines():</span><br><span class="line">+              match = rcomp.search(line)</span><br><span class="line">+              <span class="keyword">if</span> match:</span><br><span class="line">+                ps_id = max(int(match.group(1)), ps_id)</span><br><span class="line">         to_get.append((project, chg_id, ps_id))</span><br><span class="line">       <span class="keyword">else</span>:</span><br><span class="line">         project = self.GetProjects([a])[0]</span><br><span class="line"></span><br><span class="line">如果同时使用了 -s选项</span><br><span class="line">$ git show -s --oneline  </span><br><span class="line">cf7c083 (HEAD) Download latest patch when no patch is specified</span><br><span class="line">这个时候和git <span class="built_in">log</span> 的效果一样了</span><br><span class="line">$ git <span class="built_in">log</span> --oneline -1 </span><br><span class="line">cf7c083 (HEAD) Download latest patch when no patch is specified</span><br></pre></td></tr></table></figure>

<p>git show –pretty 和 git log的一样。</p>
<h1 id="git-shortlog"><a href="#git-shortlog" class="headerlink" title="git shortlog"></a>git shortlog</h1><p>git shortlog 是一个用来归纳 git log 的输出的命令。 它可以接受很多与 git log 相同的选项，<br>但是此命令并不会列出所有的提交，而是展示一个根据作者分组的提交记录的概括性信息。  </p>
<h1 id="git-describe"><a href="#git-describe" class="headerlink" title="git describe"></a>git describe</h1><p>git describe 命令用来接受任何可以解析成一个提交的东西，然后生成一个人类可读的字符串且不可变。<br>这是一种获得一个提交的描述的方式，它跟一个提交的 SHA-1 值一样是无歧义，但是更具可读性。  </p>
<h1 id="git-bisect"><a href="#git-bisect" class="headerlink" title="git bisect"></a>git bisect</h1><p>git bisect 工具是一个非常有用的调试工具，它通过自动进行一个二分查找来找到哪一个特定的提交是导致 bug 或者问题的第一个提交。  </p>
<h1 id="git-blame"><a href="#git-blame" class="headerlink" title="git blame"></a>git blame</h1><p>git blame 命令标注任何文件的行，指出文件的每一行的最后的变更的提交及谁是那一个提交的作者。 当你要找那个人去询问关于这块特殊代码的信息时这会很有用。  </p>
<h1 id="git-grep"><a href="#git-grep" class="headerlink" title="git grep"></a>git grep</h1><p>git grep 命令可以帮助在源代码中，甚至是你项目的老版本中的任意文件中查找任何字符串或者正则表达式。  </p>
<h1 id="git-cherry-pick"><a href="#git-cherry-pick" class="headerlink" title="git cherry-pick"></a>git cherry-pick</h1><p>git cherry-pick 命令用来获得在单个提交中引入的变更，然后尝试将作为一个新的提交引入到你当前分支上。<br>从一个分支单独一个或者两个提交而不是合并整个分支的所有变更是非常有用的。<br>git cherry-pick –ff<br>git cherry-pick –continue<br>git cherry-pick –abort<br>git cherry-pick –quit<br>git cherry-pick c6ade72c576^..b299ad990db 一个连续的提交记录,基线升级使用。<a target="_blank" rel="noopener" href="https://blog.csdn.net/mmh19891113/article/details/79258738">https://blog.csdn.net/mmh19891113/article/details/79258738</a><br>git cherry-pick start^..end  表示包括 start，结束到end。都是一个闭区间。  </p>
<h1 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h1><p>git rebase 命令基本是是一个自动化的 cherry-pick 命令。 它计算出一系列的提交，然后再以它们在其他地方以同样的顺序一个一个的 cherry-picks 出它们。<br>git rebase -i 交互式的，可以合并多个提交为一个，可以调整提交的前后顺序等<br>git rebase –onto  基线升级使用<br>git rebase  –onto  new   start_point   end_point<br>git rebase –continue | –skip | –abort | –quit  </p>
<h1 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h1><p>git revert 命令本质上就是一个逆向的 git cherry-pick 操作。<br>它将你提交中的变更的以完全相反的方式的应用到一个新创建的提交中，本质上就是撤销或者倒转。<br>git revert –continue<br>git revert –quit<br>git revert –abort                                       </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git revert [--[no-]edit] [-n] [-m parent-number] [-s] [-S[&lt;keyid&gt;]] &lt;commit&gt;...</span><br><span class="line">git revert --<span class="built_in">continue</span></span><br><span class="line">git revert --quit</span><br><span class="line">git revert --abort</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>-e, –edit进入到编辑界面，可以再次编辑提交信息。–no-edit</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">git revert --edit HEAD~3</span><br><span class="line"></span><br><span class="line">$ git revert --no-edit 96ed6df cdd80fa ef9faab                                                                                      </span><br><span class="line">[<span class="built_in">test</span> d9bb334] Revert <span class="string">&quot;touch c&quot;</span></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 c</span><br><span class="line">[<span class="built_in">test</span> ba0ff99] Revert <span class="string">&quot;touch e&quot;</span></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 e</span><br><span class="line">[<span class="built_in">test</span> 0c19967] Revert <span class="string">&quot;update b file&quot;</span></span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line">$ git st                                                                                                                            </span><br><span class="line">On branch <span class="built_in">test</span></span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line">$ git ll                                                                                                                           </span><br><span class="line">* 0c19967 - Revert <span class="string">&quot;update b file&quot;</span>                                                                                                   — SCM life (HEAD -&gt; <span class="built_in">test</span>) - (3 seconds ago)</span><br><span class="line">* ba0ff99 - Revert <span class="string">&quot;touch e&quot;</span>                                                                                                         — SCM life - (3 seconds ago)</span><br><span class="line">* d9bb334 - Revert <span class="string">&quot;touch c&quot;</span>                                                                                                         — SCM life - (3 seconds ago)</span><br><span class="line">* ef9faab - update b file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line">$                     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在revert多个提交的时候如果没有联系，这个revert的顺序可以变的。如果代码是有联系的revert顺序变了会有冲突了。</span><br><span class="line">$ git revert --no-edit ef9faab  96ed6df cdd80fa                                                                                     </span><br><span class="line">[<span class="built_in">test</span> 952062a] Revert <span class="string">&quot;update b file&quot;</span></span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line">[<span class="built_in">test</span> 20aa374] Revert <span class="string">&quot;touch c&quot;</span></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 c</span><br><span class="line">[<span class="built_in">test</span> dc48716] Revert <span class="string">&quot;touch e&quot;</span></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 e</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* dc48716 - Revert <span class="string">&quot;touch e&quot;</span>                                                                                                         — SCM life (HEAD -&gt; <span class="built_in">test</span>) - (3 seconds ago)</span><br><span class="line">* 20aa374 - Revert <span class="string">&quot;touch c&quot;</span>                                                                                                         — SCM life - (3 seconds ago)</span><br><span class="line">* 952062a - Revert <span class="string">&quot;update b file&quot;</span>                                                                                                   — SCM life - (3 seconds ago)</span><br><span class="line">* ef9faab - update b file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f7277c4 - init empty git</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ git ll                                                                                                                            [mamh@10.0.63.43 ] 18-06-19 13:57  /home/mamh/tmp/myconfig</span><br><span class="line">* ef9faab - update b file                                                                                                            — SCM life (HEAD -&gt; <span class="built_in">test</span>) - (2 days ago)</span><br><span class="line">* 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line"></span><br><span class="line">这个范围写反是不对的 </span><br><span class="line">$ git revert --no-edit 5211c8d..96ed6df  </span><br><span class="line">error: empty commit <span class="built_in">set</span> passed</span><br><span class="line">fatal: revert failed</span><br><span class="line"></span><br><span class="line">一次revert多个提交，可以是一个连续的提交区间，这里加上--no-edit选项就不用每次都进入到vim的编辑提交信息的界面了。 </span><br><span class="line">$ git revert --no-edit 96ed6df..5211c8d                                                                                             </span><br><span class="line">[<span class="built_in">test</span> a8b374e] Revert <span class="string">&quot;update a file&quot;</span></span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line">[<span class="built_in">test</span> d1cf5e7] Revert <span class="string">&quot;touch e&quot;</span></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 e</span><br><span class="line">[<span class="built_in">test</span> 48b7718] Revert <span class="string">&quot;touch d&quot;</span></span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 d</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* 48b7718 - Revert <span class="string">&quot;touch d&quot;</span>                                                                                                         — SCM life (HEAD -&gt; <span class="built_in">test</span>) - (3 seconds ago)</span><br><span class="line">* d1cf5e7 - Revert <span class="string">&quot;touch e&quot;</span>                                                                                                         — SCM life - (3 seconds ago)</span><br><span class="line">* a8b374e - Revert <span class="string">&quot;update a file&quot;</span>                                                                                                   — SCM life - (3 seconds ago)</span><br><span class="line">* ef9faab - update b file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br></pre></td></tr></table></figure>
<p>-n, –no-commit，只是revert一个提交而不进行commit，这是文件状态是绿色的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">下面我们试试这个-n选项的效果</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* ef9faab - update b file                                                                                                            — SCM life (HEAD -&gt; test) - (2 days ago)</span><br><span class="line">* 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* cdd80fa - touch e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 34260fc - touch d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 96ed6df - touch c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f3480c7 - touch b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* a2b661e - touch a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line">$                                                                                                                                   </span><br><span class="line">$  git revert -n HEAD~5..HEAD~2                                                                                                     </span><br><span class="line">到这里git revert执行成功了 </span><br><span class="line"></span><br><span class="line">通过git log看到并没有产生revert的那个提交</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* ef9faab - update b file                                                                                                            — SCM life (HEAD -&gt; test) - (2 days ago)</span><br><span class="line">* 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* cdd80fa - touch e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 34260fc - touch d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* 96ed6df - touch c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f3480c7 - touch b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* a2b661e - touch a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line"></span><br><span class="line">通过git status我们查看工作区和暂存区的状态，发现3个删除状态的文件，这个3个文件就是我们命令参数中的3个提交加上的文件，这里是revert操作那就是要删除这3个文件了</span><br><span class="line">$ git st                                                                                                                            </span><br><span class="line">On branch test</span><br><span class="line">You are currently reverting commit 96ed6df.</span><br><span class="line">  (all conflicts fixed: run &quot;git revert --continue&quot;)</span><br><span class="line">  (use &quot;git revert --abort&quot; to cancel the revert operation)</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">	deleted:    c</span><br><span class="line">	deleted:    d</span><br><span class="line">	deleted:    e</span><br><span class="line"></span><br><span class="line">                                                                                                                                   </span><br></pre></td></tr></table></figure>

<p>-m parent-number, –mainline parent-number当revert一个merge的提交需要加上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">git revert -m 2 xxx</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> tmp/myconfig                                                                                                                                </span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">*   d322685 - Merge branch <span class="string">&#x27;test&#x27;</span> into empty                                                                                           — SCM life (HEAD -&gt; empty) - (2 days ago)</span><br><span class="line">|\  </span><br><span class="line">| * ef9faab - update b file                                                                                                            — SCM life (<span class="built_in">test</span>) - (2 days ago)</span><br><span class="line">| * 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">| * cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* | d826f8a - update file a                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* | 01b8625 - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">|/  </span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line">$                                                                                                                                   </span><br><span class="line">$                                                                                                                                   </span><br><span class="line">$ git revert d322685                                                                                                                </span><br><span class="line">error: commit d3226856737d20b4945ef6ff3454f093fe851052 is a merge but no -m option was given.</span><br><span class="line">fatal: revert failed</span><br><span class="line">这个时候不使用-m选项会报错的，这个提交有2个父提交，我们要通过-m来指定哪个父提交。</span><br><span class="line"></span><br><span class="line">$ git revert -m 3 d322685                                                                                                           </span><br><span class="line">error: commit d3226856737d20b4945ef6ff3454f093fe851052 does not have parent 3</span><br><span class="line">fatal: revert failed</span><br><span class="line"></span><br><span class="line">$ git revert -m 2 d322685                                                                                                           </span><br><span class="line">[empty 56049dc] Revert <span class="string">&quot;Merge branch &#x27;test&#x27; into empty&quot;</span></span><br><span class="line"> 1 file changed, 1 insertion(+), 8 deletions(-)</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* 56049dc - Revert <span class="string">&quot;Merge branch &#x27;test&#x27; into empty&quot;</span>                                                                                  — SCM life (HEAD -&gt; empty) - (5 seconds ago)</span><br><span class="line">*   d322685 - Merge branch <span class="string">&#x27;test&#x27;</span> into empty                                                                                           — SCM life - (2 days ago)</span><br><span class="line">|\  </span><br><span class="line">| * ef9faab - update b file                                                                                                            — SCM life (<span class="built_in">test</span>) - (2 days ago)</span><br><span class="line">| * 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">| * cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* | d826f8a - update file a                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* | 01b8625 - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">|/  </span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line">$                                                                                                                                   </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">如果是-m 1这个时候revert的 “a2b661e - <span class="built_in">touch</span> a”  到 “ef9faab - update b file” 这几个提交的改动</span><br><span class="line">$ git revert -m 1 d322685                                                                                                           </span><br><span class="line">[empty 03da93b] Revert <span class="string">&quot;Merge branch &#x27;test&#x27; into empty&quot;</span></span><br><span class="line"> 4 files changed, 1 deletion(-)</span><br><span class="line"> delete mode 100644 b</span><br><span class="line"> delete mode 100644 c</span><br><span class="line"> delete mode 100644 d</span><br><span class="line"> delete mode 100644 e</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* 03da93b - Revert <span class="string">&quot;Merge branch &#x27;test&#x27; into empty&quot;</span>                                                                                  — SCM life (HEAD -&gt; empty) - (4 seconds ago)</span><br><span class="line">*   d322685 - Merge branch <span class="string">&#x27;test&#x27;</span> into empty                                                                                           — SCM life - (2 days ago)</span><br><span class="line">|\  </span><br><span class="line">| * ef9faab - update b file                                                                                                            — SCM life (<span class="built_in">test</span>) - (2 days ago)</span><br><span class="line">| * 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">| * cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* | d826f8a - update file a                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* | 01b8625 - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">|/  </span><br><span class="line">* f7277c4 - init empty git                                                                                                                                    </span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">我们重置回原来</span><br><span class="line">$ git reset --hard d322685                                                                                                          </span><br><span class="line">HEAD is now at d322685 Merge branch <span class="string">&#x27;test&#x27;</span> into empty</span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">*   d322685 - Merge branch <span class="string">&#x27;test&#x27;</span> into empty                                                                                           — SCM life (HEAD -&gt; empty) - (2 days ago)</span><br><span class="line">|\  </span><br><span class="line">| * ef9faab - update b file                                                                                                            — SCM life (<span class="built_in">test</span>) - (2 days ago)</span><br><span class="line">| * 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">| * cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* | d826f8a - update file a                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* | 01b8625 - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">|/  </span><br><span class="line">* f7277c4 - init empty git </span><br><span class="line"></span><br><span class="line">此时看看b文件的内容</span><br><span class="line">$ <span class="built_in">cat</span> b                                                                                                                             </span><br><span class="line">bbb</span><br><span class="line"></span><br><span class="line">我们可以看到这一行是在 ef9faabedab94293708588d93e4b6e8a6a697a3a 这个提交上加上的</span><br><span class="line">$ git show ef9faab                                                                                                                  </span><br><span class="line">commit ef9faabedab94293708588d93e4b6e8a6a697a3a (<span class="built_in">test</span>)</span><br><span class="line">Author: SCM life &lt;scm.life@scmlife.com&gt;</span><br><span class="line">Date:   Sun Jun 17 12:35:10 2018 +0800</span><br><span class="line"></span><br><span class="line">    update b file</span><br><span class="line">    </span><br><span class="line">    Change-Id: Ic28a9e9434fe4cbc1d95ec4436289d9008689c31</span><br><span class="line">    Signed-off-by: SCM life &lt;scm.life@scmlife.com&gt;</span><br><span class="line"></span><br><span class="line">diff --git a/b b/b</span><br><span class="line">index e69de29..f761ec1 100644</span><br><span class="line">--- a/b</span><br><span class="line">+++ b/b</span><br><span class="line">@@ -0,0 +1 @@</span><br><span class="line">+bbb</span><br><span class="line"></span><br><span class="line">这个时候我们revert这个提交 </span><br><span class="line">$ git revert ef9faab                                                                                                                </span><br><span class="line">[empty a1cfaec] Revert <span class="string">&quot;update b file&quot;</span></span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line"></span><br><span class="line">$ git st                                                                                                                            </span><br><span class="line">On branch empty</span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line"></span><br><span class="line">$ git ll                                                                                                                            </span><br><span class="line">* a1cfaec - Revert <span class="string">&quot;update b file&quot;</span>                                                                                                   — SCM life (HEAD -&gt; empty) - (5 seconds ago)</span><br><span class="line">*   d322685 - Merge branch <span class="string">&#x27;test&#x27;</span> into empty                                                                                           — SCM life - (2 days ago)</span><br><span class="line">|\  </span><br><span class="line">| * ef9faab - update b file                                                                                                            — SCM life (<span class="built_in">test</span>) - (2 days ago)</span><br><span class="line">| * 5211c8d - update a file                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">| * cdd80fa - <span class="built_in">touch</span> e                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 34260fc - <span class="built_in">touch</span> d                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * 96ed6df - <span class="built_in">touch</span> c                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * f3480c7 - <span class="built_in">touch</span> b                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">| * a2b661e - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">* | d826f8a - update file a                                                                                                            — SCM life - (2 days ago)</span><br><span class="line">* | 01b8625 - <span class="built_in">touch</span> a                                                                                                                  — SCM life - (2 days ago)</span><br><span class="line">|/  </span><br><span class="line">* f7277c4 - init empty git                                                                                                           — Minghui Ma - (12 days ago)</span><br><span class="line"></span><br><span class="line">这个时候revert之后我们再看这个b文件，这个文件内容已经没有了。</span><br><span class="line">$ <span class="built_in">cat</span> b                                                                                                                             </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="git-apply"><a href="#git-apply" class="headerlink" title="git apply"></a>git apply</h1><p>git apply 命令应用一个通过 git diff 或者甚至使用 GNU diff 命令创建的补丁。 它跟补丁命令做了差不多的工作，但还是有一些小小的差别。  </p>
<h1 id="git-am"><a href="#git-am" class="headerlink" title="git am"></a>git am</h1><p>git am 命令用来应用来自邮箱的补丁。特别是那些被 mbox 格式化过的。 这对于通过邮件接受补丁并将他们轻松地应用到你的项目中很有用。  </p>
<h1 id="git-format-patch"><a href="#git-format-patch" class="headerlink" title="git format-patch"></a>git format-patch</h1><p>git format-patch 命令用来以 mbox 的格式来生成一系列的补丁以便你可以发送到一个邮件列表中。  </p>
<h1 id="git-imap-send"><a href="#git-imap-send" class="headerlink" title="git imap-send"></a>git imap-send</h1><p>git imap-send 将一个由 git format-patch 生成的邮箱上传至 IMAP 草稿文件夹。<br>我们在 通过邮件的公开项目 一节中见过一个通过使用 git imap-send 工具向一个项目发送补丁进行贡献的例子。</p>
<h1 id="git-send-email"><a href="#git-send-email" class="headerlink" title="git send-email"></a>git send-email</h1><p>git send-mail 命令用来通过邮件发送那些使用 git format-patch 生成的补丁。  </p>
<h1 id="git-request-pull"><a href="#git-request-pull" class="headerlink" title="git request-pull"></a>git request-pull</h1><p>git request-pull 命令只是简单的用来生成一个可通过邮件发送给某个人的示例信息体。 如果你在公共服务器上有一个分支，<br>并且想让别人知道如何集成这些变更，而不用通过邮件发送补丁，你就可以执行此命令的输出发送给这个你想拉取变更的人。  </p>
<h1 id="git-svn"><a href="#git-svn" class="headerlink" title="git svn"></a>git svn</h1><p>git svn 可以使 Git 作为一个客户端来与 Subversion 版本控制系统通信。<br>这意味着你可以使用 Git 来检出内容，或者提交到 Subversion 服务器。  </p>
<h1 id="git-fast-import"><a href="#git-fast-import" class="headerlink" title="git fast-import"></a>git fast-import</h1><p>对于其他版本控制系统或者从其他任何的格式导入，你可以使用 git fast-import 快速地将其他格式映射到 Git 可以轻松记录的格式。  </p>
<h1 id="git-gc"><a href="#git-gc" class="headerlink" title="git gc"></a>git gc</h1><p>git gc 命令在你的仓库中执行 “garbage collection” ，删除数据库中不需要的文件和将其他文件打包成一种更有效的格式。<br>此命令一般在背后为你工作，虽然你可以手动执行它-如果你想的话。    </p>
<h1 id="git-fsck"><a href="#git-fsck" class="headerlink" title="git fsck"></a>git fsck</h1><p>git fsck 命令用来检查内部数据库的问题或者不一致性。  </p>
<h1 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h1><p>git reflog 命令分析你所有分支的头指针的日志来查找出你在重写历史上可能丢失的提交。  </p>
<h1 id="git-filter-branch"><a href="#git-filter-branch" class="headerlink" title="git filter-branch"></a>git filter-branch</h1><p>git filter-branch 命令用来根据某些规则来重写大量的提交记录，<br>例如从任何地方删除文件，或者通过过滤一个仓库中的一个单独的子目录以提取出一个项目。  </p>
<h1 id="git中2个点和3个点区别"><a href="#git中2个点和3个点区别" class="headerlink" title="git中2个点和3个点区别"></a>git中2个点和3个点区别</h1><p>What are the differences between double-dot “..” and triple-dot “…” in Git commit ranges?</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#Commit-Ranges">https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#Commit-Ranges</a></p>
<p>对于在git log中使用double dot和triple dot的区别：  </p>
<p>对于2个分支A和B来说：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> A..B    <span class="comment"># </span></span><br></pre></td></tr></table></figure>
<p>这个会显示B分支有的，而A分支没有的那些提交，下面这个图片可以清楚的显示出来</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Android%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E9%81%93%E4%B9%8Bgit%E7%9A%84%E4%BD%BF%E7%94%A8_1.png" alt="Android下的配置管理之道之git的使用_1.png"></p>
<p>对于2个分支A和B来说： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> A...B   <span class="comment"># </span></span><br></pre></td></tr></table></figure>
<p>这个将会显示A分支有的B分支没有的， B分支有的A分支没有的。用下面的图清楚的表示  </p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Android%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E9%81%93%E4%B9%8Bgit%E7%9A%84%E4%BD%BF%E7%94%A8_2.png" alt="Android下的配置管理之道之git的使用_2.png"></p>
<p>这个3个点的非常有用，经常会配合–lfet-right来一起用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --decorate --left-right --graph master...origin/master</span><br><span class="line">&lt; 1794bee (HEAD, master) Derp some more</span><br><span class="line">&gt; 6e6ce69 (origin/master, origin/HEAD) Add hello.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>上面就是比较2个分支的差异，小于号开头的行是表示master分支有的提交，大于号表示origin&#x2F;master分支的提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --decorate --graph shgit/dev_20180319...shgit/dev_20171101 --left-right --boundary                  </span><br><span class="line">&lt; 036a649 (shgit/dev_20180319) [SHARK-4246] device/qcom/sdm845: add startOffsetMs to 300</span><br><span class="line">&lt; 547f251 [SHAR-995][BSP] Disable ext4 barrier</span><br><span class="line">&lt; 2b55f87 [SHAR-7690][Drv][WLAN]Enable wifi host side recovery</span><br><span class="line">| &gt; 89f5290 (HEAD, dev_20171101) [SHARK-4246] device/qcom/sdm845: add startOffsetMs to 300</span><br><span class="line">| &gt; 29b877a [SHAR-995][BSP] Disable ext4 barrier</span><br><span class="line">|/  </span><br><span class="line">o 9aebb83 [SR-886][app]performance optimization:<span class="built_in">disable</span> iop from xiaomi</span><br></pre></td></tr></table></figure>
<p>通过这个命令我们可以看到左右2个分支之间的差异，使用–left-right选项，小于号开始的表示是shgit&#x2F;dev_20180319有的提交，<br>大于号开始的表示shgit&#x2F;dev_20171101分支的提交。最后一行表示他们的共同祖先提交。这个是加了–boundary的效果。   </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate --graph shgit/dev_20180319...shgit/dev_20171101 --left-right --boundary   --cherry-pick </span><br><span class="line">&lt; 2b55f87 [SHAR-7690][Drv][WLAN]Enable wifi host side recovery</span><br><span class="line">o 9aebb83 [SR-886][app]performance optimization:disable iop from xiaomi</span><br></pre></td></tr></table></figure>
<p>同样的这个是加了  –cherry-pick选项，我们发现少了几行，这个选项会认为通过cherr-pick的提交是一样的提交，会过滤掉这些提交的。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate --graph shgit/dev_20180319...shgit/dev_20171101 --left-right   --cherry-pick </span><br><span class="line">&lt; 2b55f87 [SHAR-7690][Drv][WLAN]Enable wifi host side recovery</span><br></pre></td></tr></table></figure>
<p>这个是去掉 –boundary  选项，就是不显示他们的起始点那个提交。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate --graph shgit/dev_20180319...shgit/dev_20171101 --left-only --boundary </span><br><span class="line">* 036a649 (shgit/dev_20180319) [SHARK-4246] device/qcom/sdm845: add startOffsetMs to 300</span><br><span class="line">* 547f251 [SHAR-995][BSP] Disable ext4 barrier</span><br><span class="line">* 2b55f87 [SHAR-7690][Drv][WLAN]Enable wifi host side recovery</span><br><span class="line">o 9aebb83 [SR-886][app]performance optimization:disable iop from xiaomi</span><br></pre></td></tr></table></figure>
<p>–left-only 选项只会显示左边那个分支的提交就是只显示shgit&#x2F;dev_20180319分支的提交。<br>同样的他们的共同起始提交是最后一行那个。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline --decorate --graph shgit/dev_20180319...shgit/dev_20171101  --right-only --boundary   </span><br><span class="line">* 89f5290 (HEAD, shgit/dev_20171101) [SHARK-4246] device/qcom/sdm845: add startOffsetMs to 300</span><br><span class="line">* 29b877a [SHAR-995][BSP] Disable ext4 barrier</span><br><span class="line">o 9aebb83 [SR-886][app]performance optimization:disable iop from xiaomi</span><br></pre></td></tr></table></figure>
<p>–right-only 选项只会显示右边那个分支的提交，就是只显示shgit&#x2F;dev_20171101分支的提交。<br>同样的他们的共同起始提交是最后一行那个。  </p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Android%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E9%81%93%E4%B9%8Bgit%E7%9A%84%E4%BD%BF%E7%94%A8_5.png" alt="Android下的配置管理之道之git的使用_5.png"></p>
<p>对于在git diff中使用double dot和triple dot的区别：  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git diff topic master    (1)      #</span><br><span class="line">$ git diff topic..master   (2)  </span><br><span class="line">$ git diff topic...master  (3)  </span><br></pre></td></tr></table></figure>
<p>1.Changes between the tips of the topic and the master branches.<br>2.Same as above.<br>3.Changes that occurred on the master branch since when the topic branch was started off it.<br>第一个和第二个一样，都是比较topic 分支到 master分支在那个最后一个提交处的代码的差异。<br>第三个就是比较两个分支共同起始点那个提交开始，到master结束的那个提交 的差异。<br>我们给个图片就清楚可以看到了：<br><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Android%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E9%81%93%E4%B9%8Bgit%E7%9A%84%E4%BD%BF%E7%94%A8_3.png" alt="Android下的配置管理之道之git的使用_3.png"></p>
<p>git diff topic..master  等价 git diff topic master      #<br>git diff topic…master 等价 git diff $(git merge-base topic master) master<br><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/mageSFC/myblog/master/images/Android%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E9%81%93%E4%B9%8Bgit%E7%9A%84%E4%BD%BF%E7%94%A8_4.png" alt="Android下的配置管理之道之git的使用_4.png"></p>
<h1 id="git中HEAD-和HEAD-区别"><a href="#git中HEAD-和HEAD-区别" class="headerlink" title="git中HEAD^ 和HEAD~ 区别"></a>git中HEAD^ 和HEAD~ 区别</h1><p>What’s the difference between HEAD^ and HEAD~ in git</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;rev&gt;^, e.g. HEAD^, v1.5.1^0   </span><br><span class="line">    A suffix ^ to a revision parameter means the first parent of that commit object.  ^&lt;n&gt; means the &lt;n&gt;th parent (i.e.  &lt;rev&gt;^ is equivalent to &lt;rev&gt;^1). As a special rule,</span><br><span class="line">    &lt;rev&gt;^0 means the commit itself and is used when &lt;rev&gt; is the object name of a tag object that refers to a commit object.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;rev&gt;~&lt;n&gt;, e.g. master~3   </span><br><span class="line">    A suffix ~&lt;n&gt; to a revision parameter means the commit object that is the &lt;n&gt;th generation ancestor of the named commit object, following only the first parents. I.e.  &lt;rev&gt;~3</span><br><span class="line">    is equivalent to &lt;rev&gt;^^^ <span class="built_in">which</span> is equivalent to &lt;rev&gt;^1^1^1. See below <span class="keyword">for</span> an illustration of the usage of this form.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>类似这样的一个符号的 ～  和  ^  都是表示父提交，<br>两个符号 ～～  和 ^^ 都是表示的爷爷提交。  </p>
<p>他们的不同是体现在后面跟上了数字。<br>～2 表示的是上面2层。这个是在层级上的。<del>2 means up two levels in the hierarchy。<br>^2 表示的第二个父提交。一个^ 表示第一个父提交，两个^表示第二个父提交。^2 means the second parent where a commit has more than one parent (i.e. because it’s a merge)<br>这2个符号也可以组合起来使用的。HEAD</del>2^3 means HEAD’s grandparent commit’s third parent commit  </p>
<p>下面我们看一个提交树状图。从下往上，从左往右。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Here is an illustration, by Jon Loeliger. Both commit nodes B and C are parents of commit node A. Parent commits are ordered left-to-right.</span><br><span class="line"></span><br><span class="line">    G   H   I   J</span><br><span class="line">     \ /     \ /</span><br><span class="line">      D   E   F</span><br><span class="line">       \  |  / \</span><br><span class="line">        \ | /   |</span><br><span class="line">         \|/    |</span><br><span class="line">          B     C</span><br><span class="line">           \   /</span><br><span class="line">            \ /</span><br><span class="line">             A</span><br><span class="line"></span><br><span class="line">    A =      = A^0</span><br><span class="line">    B = A^   = A^1     = A~1    </span><br><span class="line">    C = A^2  = A^2              </span><br><span class="line">    D = A^^  = A^1^1   = A~2    </span><br><span class="line">    E = B^2  = A^^2              </span><br><span class="line">    F = B^3  = A^^3              </span><br><span class="line">    G = A^^^ = A^1^1^1 = A~3     </span><br><span class="line">    H = D^2  = B^^2    = A^^^2  = A~2^2  </span><br><span class="line">    I = F^   = B^3^    = A^^3^    </span><br><span class="line">    J = F^2  = B^3^2   = A^^3^2   </span><br><span class="line"></span><br></pre></td></tr></table></figure>






















</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/f2f18a16dcb5cae64b81109cda0d473cf5d193d4/">https://magesfc.github.io/mage/f2f18a16dcb5cae64b81109cda0d473cf5d193d4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://magesfc.github.io" target="_blank">马哥私房菜</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/android/">android</a><a class="post-meta__tags" href="/tags/git/">git</a></div><div class="post_share"><div class="social-share" data-image="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="支付寶"/></a><div class="post-qr-code-desc">支付寶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/fb5509cf3fa8d2a0b6197b8cb907c435bf58dfb4/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hibernate学习之HQL查询</div></div></a></div><div class="next-post pull-right"><a href="/mage/78041cdd158ce394fd12761be8f79665665edf6a/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Android下的配置管理之道之APKCERTS_FILE</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/mage/25fa14ac848a10fef0b2b94b5568f9d5cc31c7e6/" title="Android下的配置管理之道之git相关的常见问题"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Android下的配置管理之道之git相关的常见问题</div></div></a></div><div><a href="/mage/78041cdd158ce394fd12761be8f79665665edf6a/" title="Android下的配置管理之道之APKCERTS_FILE"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Android下的配置管理之道之APKCERTS_FILE</div></div></a></div><div><a href="/mage/a8c76effbd066dee4bc99357a83500a72755062e/" title="Android下的配置管理之道之android软件开发人员的VM环境配置"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Android下的配置管理之道之android软件开发人员的VM环境配置</div></div></a></div><div><a href="/mage/5d82ce7d7c18656b02523fcf81d7ee0acd58ffff/" title="Android下的配置管理之道之apk签名相关"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Android下的配置管理之道之apk签名相关</div></div></a></div><div><a href="/mage/9f11362bb48e38171ec1992629522ab39976a878/" title="Android下的配置管理之道之gerrit代码服务器之ssh队列详解"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Android下的配置管理之道之gerrit代码服务器之ssh队列详解</div></div></a></div><div><a href="/mage/4ffe00a009758049d18e75751a7dcc4ee3a21ef9/" title="Android下的配置管理之道之gerrit安装github插件"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Android下的配置管理之道之gerrit安装github插件</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> 这里是 马哥 的个人博客 </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">197</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">208</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">41</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Android%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E9%81%93%E4%B9%8Bgit%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">Android下的配置管理之道之git的使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-help"><span class="toc-number">2.</span> <span class="toc-text">git help</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-config"><span class="toc-number">3.</span> <span class="toc-text">git config</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-init"><span class="toc-number">4.</span> <span class="toc-text">git init</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-clone"><span class="toc-number">5.</span> <span class="toc-text">git clone</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-add"><span class="toc-number">6.</span> <span class="toc-text">git add</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-rm"><span class="toc-number">7.</span> <span class="toc-text">git rm</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-mv"><span class="toc-number">8.</span> <span class="toc-text">git mv</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-status"><span class="toc-number">9.</span> <span class="toc-text">git status</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-diff"><span class="toc-number">10.</span> <span class="toc-text">git diff</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-difftool"><span class="toc-number">11.</span> <span class="toc-text">git difftool</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-commit"><span class="toc-number">12.</span> <span class="toc-text">git commit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-clean"><span class="toc-number">13.</span> <span class="toc-text">git clean</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-branch"><span class="toc-number">14.</span> <span class="toc-text">git branch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-checkout"><span class="toc-number">15.</span> <span class="toc-text">git checkout</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-reset"><span class="toc-number">16.</span> <span class="toc-text">git reset</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-merge"><span class="toc-number">17.</span> <span class="toc-text">git merge</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-mergetool"><span class="toc-number">18.</span> <span class="toc-text">git mergetool</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-log"><span class="toc-number">19.</span> <span class="toc-text">git log</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-stash"><span class="toc-number">20.</span> <span class="toc-text">git stash</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-worktree"><span class="toc-number">21.</span> <span class="toc-text">git worktree</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-tag"><span class="toc-number">22.</span> <span class="toc-text">git tag</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-fetch"><span class="toc-number">23.</span> <span class="toc-text">git fetch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-pull"><span class="toc-number">24.</span> <span class="toc-text">git pull</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-push"><span class="toc-number">25.</span> <span class="toc-text">git push</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-remote"><span class="toc-number">26.</span> <span class="toc-text">git remote</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-archive"><span class="toc-number">27.</span> <span class="toc-text">git archive</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-submodule"><span class="toc-number">28.</span> <span class="toc-text">git submodule</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-show"><span class="toc-number">29.</span> <span class="toc-text">git show</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-shortlog"><span class="toc-number">30.</span> <span class="toc-text">git shortlog</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-describe"><span class="toc-number">31.</span> <span class="toc-text">git describe</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-bisect"><span class="toc-number">32.</span> <span class="toc-text">git bisect</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-blame"><span class="toc-number">33.</span> <span class="toc-text">git blame</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-grep"><span class="toc-number">34.</span> <span class="toc-text">git grep</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-cherry-pick"><span class="toc-number">35.</span> <span class="toc-text">git cherry-pick</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-rebase"><span class="toc-number">36.</span> <span class="toc-text">git rebase</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-revert"><span class="toc-number">37.</span> <span class="toc-text">git revert</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-apply"><span class="toc-number">38.</span> <span class="toc-text">git apply</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-am"><span class="toc-number">39.</span> <span class="toc-text">git am</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-format-patch"><span class="toc-number">40.</span> <span class="toc-text">git format-patch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-imap-send"><span class="toc-number">41.</span> <span class="toc-text">git imap-send</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-send-email"><span class="toc-number">42.</span> <span class="toc-text">git send-email</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-request-pull"><span class="toc-number">43.</span> <span class="toc-text">git request-pull</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-svn"><span class="toc-number">44.</span> <span class="toc-text">git svn</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-fast-import"><span class="toc-number">45.</span> <span class="toc-text">git fast-import</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-gc"><span class="toc-number">46.</span> <span class="toc-text">git gc</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-fsck"><span class="toc-number">47.</span> <span class="toc-text">git fsck</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-reflog"><span class="toc-number">48.</span> <span class="toc-text">git reflog</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-filter-branch"><span class="toc-number">49.</span> <span class="toc-text">git filter-branch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git%E4%B8%AD2%E4%B8%AA%E7%82%B9%E5%92%8C3%E4%B8%AA%E7%82%B9%E5%8C%BA%E5%88%AB"><span class="toc-number">50.</span> <span class="toc-text">git中2个点和3个点区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git%E4%B8%ADHEAD-%E5%92%8CHEAD-%E5%8C%BA%E5%88%AB"><span class="toc-number">51.</span> <span class="toc-text">git中HEAD^ 和HEAD~ 区别</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/b38618c7c0891155403a10441a22a817282834a8/" title="DevOps系列学习Drone之drone-runner-exec源码学习"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps系列学习Drone之drone-runner-exec源码学习"/></a><div class="content"><a class="title" href="/mage/b38618c7c0891155403a10441a22a817282834a8/" title="DevOps系列学习Drone之drone-runner-exec源码学习">DevOps系列学习Drone之drone-runner-exec源码学习</a><time datetime="2023-07-16T03:59:52.000Z" title="更新于 2023-07-16 11:59:52">2023-07-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/1dc207672579f74b36792524fc59173d13a83f13/" title="DevOps系列学习Drone学习之Drone介绍"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps系列学习Drone学习之Drone介绍"/></a><div class="content"><a class="title" href="/mage/1dc207672579f74b36792524fc59173d13a83f13/" title="DevOps系列学习Drone学习之Drone介绍">DevOps系列学习Drone学习之Drone介绍</a><time datetime="2023-07-16T03:59:06.000Z" title="更新于 2023-07-16 11:59:06">2023-07-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/9df97ef80a4259b5fb1dfb21e65a56bf93537f27/" title="DevOps系列学习Zadig学习之Zadig介绍"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps系列学习Zadig学习之Zadig介绍"/></a><div class="content"><a class="title" href="/mage/9df97ef80a4259b5fb1dfb21e65a56bf93537f27/" title="DevOps系列学习Zadig学习之Zadig介绍">DevOps系列学习Zadig学习之Zadig介绍</a><time datetime="2023-07-16T03:58:31.000Z" title="更新于 2023-07-16 11:58:31">2023-07-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/f9d188073085a5409e9a32a9b901a3e168ceb79e/" title="DevOps系列学习Tekton学习之Tekton介绍"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps系列学习Tekton学习之Tekton介绍"/></a><div class="content"><a class="title" href="/mage/f9d188073085a5409e9a32a9b901a3e168ceb79e/" title="DevOps系列学习Tekton学习之Tekton介绍">DevOps系列学习Tekton学习之Tekton介绍</a><time datetime="2023-07-16T03:58:04.000Z" title="更新于 2023-07-16 11:58:04">2023-07-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/63ad9886673c326fd8ed2a7b966d11332377afe9/" title="Docker学习之docker中的DNS解析问题"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker学习之docker中的DNS解析问题"/></a><div class="content"><a class="title" href="/mage/63ad9886673c326fd8ed2a7b966d11332377afe9/" title="Docker学习之docker中的DNS解析问题">Docker学习之docker中的DNS解析问题</a><time datetime="2023-07-15T15:53:26.000Z" title="更新于 2023-07-15 23:53:26">2023-07-15</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By mage</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>