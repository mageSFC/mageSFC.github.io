<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Linuxå­¦ä¹ ä¹‹zfsæ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– | é©¬å“¥ç§æˆ¿èœ</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="How to Improve ZFS performance https:&#x2F;&#x2F;icesquare.com&#x2F;wordpress&#x2F;how-to-improve-zfs-performance&#x2F; In this tutorial, I will show you how to improve the performance of your ZFS using the affordable consume">
<meta property="og:type" content="article">
<meta property="og:title" content="Linuxå­¦ä¹ ä¹‹zfsæ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–">
<meta property="og:url" content="https://magesfc.github.io/mage/f4f2b2154a6937c2e705a1527d3eddbf0a7acfb3/">
<meta property="og:site_name" content="é©¬å“¥ç§æˆ¿èœ">
<meta property="og:description" content="How to Improve ZFS performance https:&#x2F;&#x2F;icesquare.com&#x2F;wordpress&#x2F;how-to-improve-zfs-performance&#x2F; In this tutorial, I will show you how to improve the performance of your ZFS using the affordable consume">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg">
<meta property="article:published_time" content="2022-03-30T03:27:45.000Z">
<meta property="article:modified_time" content="2022-03-30T03:27:45.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="zfs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg"><link rel="shortcut icon" href="http://www.blackshark.com/favicon.ico"><link rel="canonical" href="https://magesfc.github.io/mage/f4f2b2154a6937c2e705a1527d3eddbf0a7acfb3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: mage","link":"é“¾æ¥: ","source":"æ¥æº: é©¬å“¥ç§æˆ¿èœ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linuxå­¦ä¹ ä¹‹zfsæ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-30 11:27:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">161</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">180</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">34</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">é©¬å“¥ç§æˆ¿èœ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linuxå­¦ä¹ ä¹‹zfsæ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-03-30T03:27:45.000Z" title="å‘è¡¨äº 2022-03-30 11:27:45">2022-03-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-03-30T03:27:45.000Z" title="æ›´æ–°äº 2022-03-30 11:27:45">2022-03-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/linux/">linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linuxå­¦ä¹ ä¹‹zfsæ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>How to Improve ZFS performance</p>
<p><a target="_blank" rel="noopener" href="https://icesquare.com/wordpress/how-to-improve-zfs-performance/">https://icesquare.com/wordpress/how-to-improve-zfs-performance/</a></p>
<p>In this tutorial, I will show you how to improve the performance of your ZFS using the affordable consumer-grade hardware (e.g., Gigabit network card, standard SATA non-SSD hard drives, consumer-grade motherboard etc.).</p>
<p>Many people found a problem on their ZFS system. The speed is slow! It is slow to read or write files to the system. In this article, I am going to show you some tips on improving the speed of your ZFS file system.</p>
<p>Notice that this article was originally based on ZFS on FreeBSD. Although most concepts can be applied to Linux, you may want to check out these two articles: ZFS: Linux VS FreeBSD and ZFS On Linux Emergency Recovery Guide. I always go back to the second article to rescure my ZFS data after rebooting my Linux server to a newer kernel.</p>
<p>This article is about how to build a single node ZFS server. If you are interested in implementing multiple-nodes ZFS system &#x2F; ZFS clusters, please check here for details.</p>
<p><a target="_blank" rel="noopener" href="https://icesquare.com/wordpress/zfs-linux-vs-freebsd/">https://icesquare.com/wordpress/zfs-linux-vs-freebsd/</a></p>
<p><a target="_blank" rel="noopener" href="https://icesquare.com/wordpress/how-to-fix-the-mess-created-by-zfs-on-linux-after-update/">https://icesquare.com/wordpress/how-to-fix-the-mess-created-by-zfs-on-linux-after-update/</a></p>
<p>Table of Content</p>
<pre><code>A Good 64-bit CPU + Lots of Memory
Tweaking the Boot Loader
Use Disks with the Same Specifications
Use a Powerful Power Supply
Enable Compression
Identify the Bottleneck
Keep Your ZFS up to Date
Understand How the ZFS Caching Works
More Disk = Faster
Use a Combination of Strip and RAIDZ If Speed Is Your First Concern.
Distribute Your Free Space Evenly (How to Rebalance ZFS)
Make Your Zpool Expandable
Backup the Data on a Different Machine, Not on the Same Zpool
Rsync or ZFS Send?
Did You Enable Dedup? Disable It!
Reinstall Your Old System
Connect Your Disks via High Speed Interface
Do Not Use up All Spaces
Use AHCI, Not IDE
Refresh Your Zpool
Great Performance Settings
My Settings
</code></pre>
<h1 id="Improve-ZFS-Performance-Step-1-A-Good-64-bit-CPU-Lots-of-Memory"><a href="#Improve-ZFS-Performance-Step-1-A-Good-64-bit-CPU-Lots-of-Memory" class="headerlink" title="Improve ZFS Performance: Step 1  A Good 64-bit CPU + Lots of Memory"></a>Improve ZFS Performance: Step 1  A Good 64-bit CPU + Lots of Memory</h1><p>Traditionally, we are told to use a less powerful computer for a file&#x2F;data server. Thatâ€™s not true for ZFS. ZFS is more than a file system. It uses a lot of resources to improve the performance of the input&#x2F;output, such as compressing data on the fly. For example, suppose you need to write a 1GB file. Without enabling the compression, the system will write the entire 1GB file on the disk. With the compression being enabled, the CPU will compress the data first, and write the data on the disk after that. Since the compressed data is smaller, it takes shorter time to write to the disk, which results a higher writing speed. The same thing can be applied for reading. ZFS can cache the file for you in the memory, it will result a higher reading speed.</p>
<p>Thatâ€™s why a 64-bit CPU and higher amount of memory is recommended. I recommended at least a Quad Core CPU with 4GB of memory (Personally I use Xeon and i7, with at least 20GB of memory).</p>
<p>Please make sure that the memory modules should have the same frequencies&#x2F;speed. If you mix them with different speed, try to group the memories with same speed together., e.g., Channel 1 and Channel 2: 1333 MHz, Channel 3 and Channel 4: 1600 MHz.</p>
<p>Letâ€™s do a test. Suppose I am going to create a 10GB file with all zero. Letâ€™s see how long does it take to write on the disk:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#CPU: i7 920 (A 4 cores/8 threads CPU from 2009) + 24GB Memory + FreeBSD 9.3 64-bit</span><br><span class="line">#dd if=/dev/zero of=./file.out bs=1M count=10k</span><br><span class="line">10737418240 bytes transferred in 6.138918 secs (1749073364 bytes/sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Thatâ€™s 1.6GB&#x2F;s! Why is it so fast? Thatâ€™s because it is a zero based file. After the compression, a compressed 10GB file may result in few bytes only. Since the performance of the compression is highly depended on the CPU, thatâ€™s why a fast CPU matters.</p>
<p>Now, letâ€™s do the same thing on a not-so-fast CPU:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#CPU: AMD 4600 (2 cores) + 5GB Memory + FreeBSD 9.3 64-bit</span><br><span class="line">#dd if=/dev/zero of=./file.out bs=1M count=10k</span><br><span class="line">10737418240 bytes transferred in 23.672373 secs (453584362 bytes/sec)</span><br></pre></td></tr></table></figure>
<p>Thatâ€™s 434MB&#x2F;s only. See the difference?</p>
<h1 id="Improve-ZFS-Performance-Step-2-Tweaking-the-Boot-Loader-Parameters"><a href="#Improve-ZFS-Performance-Step-2-Tweaking-the-Boot-Loader-Parameters" class="headerlink" title="Improve ZFS Performance: Step 2  Tweaking the Boot Loader Parameters"></a>Improve ZFS Performance: Step 2  Tweaking the Boot Loader Parameters</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/f4f2b2154a6937c2e705a1527d3eddbf0a7acfb3/">https://magesfc.github.io/mage/f4f2b2154a6937c2e705a1527d3eddbf0a7acfb3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://magesfc.github.io" target="_blank">é©¬å“¥ç§æˆ¿èœ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a><a class="post-meta__tags" href="/tags/zfs/">zfs</a></div><div class="post_share"><div class="social-share" data-image="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="æ”¯ä»˜å¯¶"/></a><div class="post-qr-code-desc">æ”¯ä»˜å¯¶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/531887d5e7eb014078dd6f2951d13500e0551ca5/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Ansibleè‡ªåŠ¨åŒ–è¿ç»´å·¥å…·ä¹‹playbookä»‹ç»</div></div></a></div><div class="next-post pull-right"><a href="/mage/58f260a2b55b742f68c099917acc006eb5dcfd40/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">gerritå­¦ä¹ ä¹‹ä¿®æ”¹ç¼–è¯‘gerritæºç </div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/mage/d98de400d172c2a1012ced6496ab01f175b24831/" title="Linuxå­¦ä¹ ä¹‹æ–‡ä»¶ç³»ç»Ÿzfsæ–‡ä»¶ç³»ç»Ÿ"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Linuxå­¦ä¹ ä¹‹æ–‡ä»¶ç³»ç»Ÿzfsæ–‡ä»¶ç³»ç»Ÿ</div></div></a></div><div><a href="/mage/bead5c222ebd755a0ea0b8165ff0663545d6c700/" title="Linuxå­¦ä¹ ä¹‹10ä¸ªæœ‰ç”¨çš„é“¾å¼æ“ä½œç¬¦åŠå…¶å®ä¾‹"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Linuxå­¦ä¹ ä¹‹10ä¸ªæœ‰ç”¨çš„é“¾å¼æ“ä½œç¬¦åŠå…¶å®ä¾‹</div></div></a></div><div><a href="/mage/16b8c6357057536aa45c505f7c99cb9d22c87038/" title="Linuxå­¦ä¹ ä¹‹awkå­¦ä¹ ä¹‹Linux-awk-commandç³»åˆ—"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Linuxå­¦ä¹ ä¹‹awkå­¦ä¹ ä¹‹Linux-awk-commandç³»åˆ—</div></div></a></div><div><a href="/mage/29b1dee9b6336ea01be4716d95ecfbad663018d6/" title="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹å‡ ä¸ªç‰¹æ®Šå˜é‡"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹å‡ ä¸ªç‰¹æ®Šå˜é‡</div></div></a></div><div><a href="/mage/0158e8186f0827d0b00df276735e46e876749b88/" title="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹åœ¨bashä¸­&#x3D;å’Œ&#x3D;~çš„åŒºåˆ«"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹åœ¨bashä¸­&#x3D;å’Œ&#x3D;~çš„åŒºåˆ«</div></div></a></div><div><a href="/mage/38ae2954216cbb01f17e65a071e8e4ed0db94823/" title="Linuxå­¦ä¹ ä¹‹shellå®ç°å¹¶å‘æ‰§è¡Œå‘½ä»¤"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Linuxå­¦ä¹ ä¹‹shellå®ç°å¹¶å‘æ‰§è¡Œå‘½ä»¤</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> è¿™é‡Œæ˜¯ é©¬å“¥ çš„ä¸ªäººåšå®¢ </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">161</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">180</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">34</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Improve-ZFS-Performance-Step-1-A-Good-64-bit-CPU-Lots-of-Memory"><span class="toc-number">1.</span> <span class="toc-text">Improve ZFS Performance: Step 1  A Good 64-bit CPU + Lots of Memory</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Improve-ZFS-Performance-Step-2-Tweaking-the-Boot-Loader-Parameters"><span class="toc-number">2.</span> <span class="toc-text">Improve ZFS Performance: Step 2  Tweaking the Boot Loader Parameters</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/920ba7d54be9e9f0429be4182aa7071f08d117da/" title="jenkinså­¦ä¹ ä¹‹Jenkinså¼€å‘DataBoundConstructorå’ŒDataBoundSetter"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinså­¦ä¹ ä¹‹Jenkinså¼€å‘DataBoundConstructorå’ŒDataBoundSetter"/></a><div class="content"><a class="title" href="/mage/920ba7d54be9e9f0429be4182aa7071f08d117da/" title="jenkinså­¦ä¹ ä¹‹Jenkinså¼€å‘DataBoundConstructorå’ŒDataBoundSetter">jenkinså­¦ä¹ ä¹‹Jenkinså¼€å‘DataBoundConstructorå’ŒDataBoundSetter</a><time datetime="2022-11-06T06:40:11.000Z" title="æ›´æ–°äº 2022-11-06 14:40:11">2022-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/a718e01bee375dd72d94fd15211e2e4f41c0a52c/" title="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§"/></a><div class="content"><a class="title" href="/mage/a718e01bee375dd72d94fd15211e2e4f41c0a52c/" title="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§">Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§</a><time datetime="2022-11-04T04:39:46.000Z" title="æ›´æ–°äº 2022-11-04 12:39:46">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/84776adcfbfc963bd1f2f6d5bd3fd8d22c6a46a5/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin"/></a><div class="content"><a class="title" href="/mage/84776adcfbfc963bd1f2f6d5bd3fd8d22c6a46a5/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin</a><time datetime="2022-11-04T03:53:50.000Z" title="æ›´æ–°äº 2022-11-04 11:53:50">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/23369f1e1080d1a6749c477927cb9acccf216b36/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin"/></a><div class="content"><a class="title" href="/mage/23369f1e1080d1a6749c477927cb9acccf216b36/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin</a><time datetime="2022-11-04T03:53:32.000Z" title="æ›´æ–°äº 2022-11-04 11:53:32">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/f69d2317dbb9ce1dbfccbd61f81a402200d7547f/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin"/></a><div class="content"><a class="title" href="/mage/f69d2317dbb9ce1dbfccbd61f81a402200d7547f/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin</a><time datetime="2022-11-04T03:53:14.000Z" title="æ›´æ–°äº 2022-11-04 11:53:14">2022-11-04</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 By mage</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>