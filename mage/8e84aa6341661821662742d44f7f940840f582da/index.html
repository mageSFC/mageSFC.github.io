<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>gerritå­¦ä¹ ä¹‹JS-Plugin-Development | é©¬å“¥ç§æˆ¿èœ</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="gerrit ä½¿ç”¨ JS æ’ä»¶gerrit JS æ’ä»¶Gerrit Code Review æ”¯æŒç”¨äº JavaScript æ’ä»¶çš„ APIï¼Œä»¥ä¸ Web UI å’ŒæœåŠ¡å™¨è¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚ Plugin loading and initializationJavaScript æ˜¯ä½¿ç”¨æ ‡å‡†çš„ &#96;&#96;&#96; &lt;script src&#x3D;&#39;??&#39;&gt; &#96;&#96;&#96; HTML æ ‡ç­¾åŠ è½½çš„ã€‚  æ’ä»¶åº”è¯¥">
<meta property="og:type" content="article">
<meta property="og:title" content="gerritå­¦ä¹ ä¹‹JS-Plugin-Development">
<meta property="og:url" content="https://magesfc.github.io/mage/8e84aa6341661821662742d44f7f940840f582da/">
<meta property="og:site_name" content="é©¬å“¥ç§æˆ¿èœ">
<meta property="og:description" content="gerrit ä½¿ç”¨ JS æ’ä»¶gerrit JS æ’ä»¶Gerrit Code Review æ”¯æŒç”¨äº JavaScript æ’ä»¶çš„ APIï¼Œä»¥ä¸ Web UI å’ŒæœåŠ¡å™¨è¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚ Plugin loading and initializationJavaScript æ˜¯ä½¿ç”¨æ ‡å‡†çš„ &#96;&#96;&#96; &lt;script src&#x3D;&#39;??&#39;&gt; &#96;&#96;&#96; HTML æ ‡ç­¾åŠ è½½çš„ã€‚  æ’ä»¶åº”è¯¥">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg">
<meta property="article:published_time" content="2022-03-02T05:43:32.000Z">
<meta property="article:modified_time" content="2022-11-02T11:39:07.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="gerrit">
<meta property="article:tag" content="js">
<meta property="article:tag" content="plugin">
<meta property="article:tag" content="development">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg"><link rel="shortcut icon" href="http://www.blackshark.com/favicon.ico"><link rel="canonical" href="https://magesfc.github.io/mage/8e84aa6341661821662742d44f7f940840f582da/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: mage","link":"é“¾æ¥: ","source":"æ¥æº: é©¬å“¥ç§æˆ¿èœ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'gerritå­¦ä¹ ä¹‹JS-Plugin-Development',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-02 19:39:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">161</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">180</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">34</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">é©¬å“¥ç§æˆ¿èœ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">gerritå­¦ä¹ ä¹‹JS-Plugin-Development</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-03-02T05:43:32.000Z" title="å‘è¡¨äº 2022-03-02 13:43:32">2022-03-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-11-02T11:39:07.000Z" title="æ›´æ–°äº 2022-11-02 19:39:07">2022-11-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/gerrit/">gerrit</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="gerritå­¦ä¹ ä¹‹JS-Plugin-Development"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="gerrit-ä½¿ç”¨-JS-æ’ä»¶"><a href="#gerrit-ä½¿ç”¨-JS-æ’ä»¶" class="headerlink" title="gerrit ä½¿ç”¨ JS æ’ä»¶"></a>gerrit ä½¿ç”¨ JS æ’ä»¶</h1><h1 id="gerrit-JS-æ’ä»¶"><a href="#gerrit-JS-æ’ä»¶" class="headerlink" title="gerrit JS æ’ä»¶"></a>gerrit JS æ’ä»¶</h1><p>Gerrit Code Review æ”¯æŒç”¨äº JavaScript æ’ä»¶çš„ APIï¼Œä»¥ä¸ Web UI å’ŒæœåŠ¡å™¨è¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚</p>
<h2 id="Plugin-loading-and-initialization"><a href="#Plugin-loading-and-initialization" class="headerlink" title="Plugin loading and initialization"></a>Plugin loading and initialization</h2><pre><code>JavaScript æ˜¯ä½¿ç”¨æ ‡å‡†çš„ ``` &lt;script src=&#39;??&#39;&gt; ``` HTML æ ‡ç­¾åŠ è½½çš„ã€‚ 
æ’ä»¶åº”è¯¥é€šè¿‡ ä¼ é€’ç»™ Gerrit.install() çš„åŒ¿åå‡½æ•°ä¸­å®šä¹‰å®ƒä»¬çš„ä»£ç æ¥ä¿æŠ¤å…¨å±€å‘½åç©ºé—´ã€‚ 
è¯¥æ’ä»¶å°†è¢«ä¼ é€’ä¸€ä¸ªæè¿°å…¶åœ¨ Gerrit æ³¨å†Œçš„å¯¹è±¡ã€‚

è¯¥æ’ä»¶ pluginname.jsï¼Œå¯ä»¥æ˜¯ç‹¬ç«‹æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯jar ä¸­çš„é™æ€èµ„äº§ä½œä¸ºWeb UI æ’ä»¶ã€‚
pluginname.js åŒ…å«å¯¹ Gerrit.install() çš„è°ƒç”¨ã€‚ æ¯ä¸ªæ–‡ä»¶åº”è¯¥åªæœ‰ä¸€ä¸ª Gerrit.install() è°ƒç”¨ã€‚
Gerrit Web åº”ç”¨ç¨‹åºå¯¼å…¥ pluginname.jsã€‚
å¯¹äºç‹¬ç«‹æ’ä»¶ï¼Œå…¥å£ç‚¹æ–‡ä»¶æ˜¯ä½äº gerrit-site/plugins æ–‡ä»¶å¤¹ä¸­çš„ pluginname.js æ–‡ä»¶ï¼Œå…¶ä¸­ pluginname æ˜¯ä¸€ä¸ªå­—æ¯æ•°å­—æ’ä»¶åç§°ã€‚ 
</code></pre>
<p>Hereâ€™s a recommended starter myplugin.js:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">  // Your code here.</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ‚¨å¯ä»¥åœ¨æºä»£ç æ ‘çš„ polygerrit-ui&#x2F;app&#x2F;samples&#x2F; ç›®å½•ä¸­æ‰¾åˆ°æ›´è¯¦ç»†çš„ç¤ºä¾‹ã€‚</p>
<h2 id="Low-level-DOM-API-concepts"><a href="#Low-level-DOM-API-concepts" class="headerlink" title="Low-level DOM API concepts"></a>Low-level DOM API concepts</h2><pre><code>åŸºæœ¬ä¸Šï¼ŒDOM æ˜¯ API surfaceã€‚ ä½çº§ API æä¾›äº†decoratingã€replacingå’Œstyling é€šè¿‡ä¸€ç»„ç«¯ç‚¹å…¬å¼€çš„ DOM å…ƒç´ çš„æ–¹æ³•ã€‚
Gerrit æä¾›äº†ä¸€ç§é€šè¿‡ DOM  hooks API è®¿é—® DOM çš„ç®€å•æ–¹æ³•ã€‚ DOM  hooks æ˜¯ä¸ºæ’ä»¶ç«¯ç‚¹å®ä¾‹åŒ–çš„è‡ªå®šä¹‰å…ƒç´ ã€‚ 
åœ¨è£…é¥°æ¡ˆä¾‹ä¸­ï¼Œä½¿ç”¨æŒ‡å‘ DOM å…ƒç´ çš„å†…å®¹å±æ€§è®¾ç½®äº†ä¸€ä¸ªé’©å­ã€‚ 
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Get the DOM hook API instance via plugin.hook(endpointName)</span><br><span class="line">Set up an onAttached callback</span><br><span class="line">Callback is called when the hook element is created and inserted into DOM</span><br><span class="line">Use element.content to get UI element</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">  const domHook = plugin.hook(&#x27;reply-text&#x27;);</span><br><span class="line">  domHook.onAttached(element =&gt; &#123;</span><br><span class="line">    if (!element.content) &#123; return; &#125;</span><br><span class="line">    // element.content is a reply dialog text area.</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li><p>Decorating DOM Elements</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">For each endpoint, Gerrit provides a list of DOM properties (such as attributes and events) that are supported in the long-term.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">  const domHook = plugin.hook(&#x27;reply-text&#x27;);</span><br><span class="line">  domHook.onAttached(element =&gt; &#123;</span><br><span class="line">    if (!element.content) &#123; return; &#125;</span><br><span class="line">    element.content.style.border = &#x27;1px red dashed&#x27;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>Replacing DOM Elements</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">An endpointâ€™s contents can be replaced by passing the replace attribute as an option.</span><br><span class="line"></span><br><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">  const domHook = plugin.hook(&#x27;header-title&#x27;, &#123;replace: true&#125;);</span><br><span class="line">  domHook.onAttached(element =&gt; &#123;</span><br><span class="line">    element.appendChild(document.createElement(&#x27;my-site-header&#x27;));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
<li><p>Styling DOM Elements</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Gerrit only offers customized CSS styling by setting custom_properties (aka css variables).</span><br><span class="line">See app-theme.ts for the list of available variables.</span><br><span class="line">Just add code like this to your JavaScript plugin:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const styleEl = document.createElement(&#x27;style&#x27;);</span><br><span class="line">styleEl.innerHTML = `</span><br><span class="line">    html &#123;</span><br><span class="line">      --header-background-color: #c3d9ff;</span><br><span class="line">    &#125;</span><br><span class="line">    html.darkTheme &#123;</span><br><span class="line">      --header-background-color: #c3d9ff90;</span><br><span class="line">    &#125;</span><br><span class="line">`;</span><br><span class="line">document.head.appendChild(styleEl);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="High-level-DOM-API-concepts"><a href="#High-level-DOM-API-concepts" class="headerlink" title="High-level DOM API concepts"></a>High-level DOM API concepts</h2><pre><code>High level API is based on low-level DOM API and is essentially a standardized way for doing common tasks. Itâ€™s less flexible, but will be a bit more stable.
The common way to access high-level API is through plugin instance passed into setup callback parameter of Gerrit.install(), also sometimes referred to as self.
é«˜çº§ API åŸºäºä½çº§ DOM APIï¼Œæœ¬è´¨ä¸Šæ˜¯æ‰§è¡Œå¸¸è§ä»»åŠ¡çš„æ ‡å‡†åŒ–æ–¹å¼ã€‚ å®ƒä¸å¤ªçµæ´»ï¼Œä½†ä¼šæ›´ç¨³å®šä¸€äº›ã€‚
è®¿é—®é«˜çº§ API çš„å¸¸ç”¨æ–¹æ³•æ˜¯é€šè¿‡å°†æ’ä»¶å®ä¾‹ä¼ é€’ç»™ Gerrit.install() çš„ setup å›è°ƒå‚æ•°ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸º selfã€‚ 
</code></pre>
<h2 id="Low-level-DOM-API"><a href="#Low-level-DOM-API" class="headerlink" title="Low-level DOM API"></a>Low-level DOM API</h2><pre><code>The low-level DOM API methods are the base of all UI customization.
ä½çº§ DOM API æ–¹æ³•æ˜¯æ‰€æœ‰ UI å®šåˆ¶çš„åŸºç¡€ã€‚ 
</code></pre>
<ol>
<li>attributeHelper<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugin.attributeHelper(element)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
Alternative for Polymer data for plugins that donâ€™t use Polymer. Can be used to bind element attribute changes to callbacks.</li>
</ol>
<p>See samples&#x2F;bind-parameters.js for an example.</p>
<ol start="2">
<li><p>hook</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">plugin.hook(endpointName, opt_options)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>See endpoints. <a target="_blank" rel="noopener" href="https://gerrit-review.googlesource.com/Documentation/pg-plugin-endpoints.html">https://gerrit-review.googlesource.com/Documentation/pg-plugin-endpoints.html</a></p>
</li>
<li><p>registerCustomComponent</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">plugin.registerCustomComponent(endpointName, opt_moduleName, opt_options)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>See endpoints. <a target="_blank" rel="noopener" href="https://gerrit-review.googlesource.com/Documentation/pg-plugin-endpoints.html">https://gerrit-review.googlesource.com/Documentation/pg-plugin-endpoints.html</a></p>
</li>
<li><p>registerDynamicCustomComponent</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">plugin.registerDynamicCustomComponent(dynamicEndpointName, opt_moduleName, opt_options)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>See endpoints. <a target="_blank" rel="noopener" href="https://gerrit-review.googlesource.com/Documentation/pg-plugin-endpoints.html">https://gerrit-review.googlesource.com/Documentation/pg-plugin-endpoints.html</a></p>
</li>
<li><p>registerStyleModule  (deprecated )</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugin.registerStyleModule(endpointName, moduleName)</span><br></pre></td></tr></table></figure>
<p>This API is deprecated and will be removed either in version 3.6 or 3.7, see above <a target="_blank" rel="noopener" href="https://gerrit-review.googlesource.com/Documentation/pg-plugin-dev.html#low-level-style">https://gerrit-review.googlesource.com/Documentation/pg-plugin-dev.html#low-level-style</a> for an alternative</p>
</li>
<li><p>on</p>
</li>
</ol>
<p>Register a JavaScript callback to be invoked when events occur within the web interface. Signature</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.on(event, callback);</span><br></pre></td></tr></table></figure>

<p>Parameters</p>
<pre><code>event: A supported event type. See below for description.
callback: JavaScript function to be invoked when event happens. Arguments may be passed to this function, depending on the event.
</code></pre>
<p>Supported events:</p>
<pre><code>history: Invoked when the view is changed to a new screen within the Gerrit web application. The token after &quot;#&quot; is passed as the argument to the callback function, for example &quot;/c/42/&quot; while showing change 42.
showchange: Invoked when a change is made visible. A ChangeInfo and RevisionInfo are passed as arguments. Gerrit provides a third parameter which is an object with a mergeable boolean.
submitchange: Invoked when the submit button is clicked on a change. A ChangeInfo and RevisionInfo are passed as arguments. Similar to a form submit validation, the function must return true to allow the operation to continue, or false to prevent it. The function may be called multiple times, for example, if submitting a change shows a confirmation dialog, this event may be called to validate that the check whether dialog can be shown, and called again when the submit is confirmed to check whether the actual submission action can proceed.
comment: Invoked when a DOM element that represents a comment is created. This DOM element is passed as argument. This DOM element contains nested elements that Gerrit uses to format the comment. The DOM structure may differ between comment types such as inline comments, file-level comments and summary comments, and it may change with new Gerrit versions.
highlightjs-loaded: Invoked when the highlight.js library has finished loading. The global hljs object (also now accessible via window.hljs) is passed as an argument to the callback function. This event can be used to register a new language highlighter with the highlight.js library before syntax highlighting begins.
</code></pre>
<h2 id="High-level-API"><a href="#High-level-API" class="headerlink" title="High-level API"></a>High-level API</h2><pre><code>Plugin instance provides access to a number of more specific APIs and methods to be used by plugin authors.
</code></pre>
<h1 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h1><h2 id="ä¸»é¢˜è®¾ç½®"><a href="#ä¸»é¢˜è®¾ç½®" class="headerlink" title="ä¸»é¢˜è®¾ç½®"></a>ä¸»é¢˜è®¾ç½®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// gerrit https://gerrit.googlesource.com/gerrit/+/master/polygerrit-ui/app/samples/theme-plugin.js</span><br><span class="line">// https://gerrit-review.googlesource.com/Documentation/pg-plugin-dev.html</span><br><span class="line">// https://groups.google.com/g/repo-discuss/c/tgvmGhfFcgU</span><br><span class="line">// https://stackoverflow.com/questions/19307964/customize-gerrit-home-pagelogo-and-color</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">    const styleElement = document.createElement(&#x27;dom-module&#x27;);</span><br><span class="line">    styleElement.innerHTML = `</span><br><span class="line">&lt;template&gt;</span><br><span class="line">        &lt;style&gt;</span><br><span class="line">        html &#123;</span><br><span class="line">        --header-background-color: #D4E9A9;</span><br><span class="line">        --header-text-color: #000;</span><br><span class="line">        --header-title-content: &quot;é©¬å“¥ç§æˆ¿èœ Gerrit&quot;;</span><br><span class="line">        --header-icon: url(&quot;/static/logo.png&quot;);</span><br><span class="line">        --header-icon-size: 1em;</span><br><span class="line">        --primary-text-color: #000;</span><br><span class="line">        --dropdown-background-color: #D4E9A9;</span><br><span class="line">        &#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line"> &lt;/template&gt;`;</span><br><span class="line">    styleElement.register(&#x27;site-theme&#x27;);</span><br><span class="line">    plugin.registerStyleModule(&#x27;app-theme&#x27;, &#x27;site-theme&#x27;);</span><br><span class="line">&#125;); // end Gerrit.install(plugin =&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰æ¨ªå¹…æ–‡å­—"><a href="#è‡ªå®šä¹‰æ¨ªå¹…æ–‡å­—" class="headerlink" title="è‡ªå®šä¹‰æ¨ªå¹…æ–‡å­—"></a>è‡ªå®šä¹‰æ¨ªå¹…æ–‡å­—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">    const domHook = plugin.hook(&#x27;banner&#x27;, &#123;replace: true&#125;);</span><br><span class="line">    domHook.onAttached(element =&gt; &#123;</span><br><span class="line">        const banner = document.createElement(&#x27;div&#x27;);</span><br><span class="line">        banner.innerHTML = `</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.bs-banner &#123;</span><br><span class="line">    background-color: #D4E9A9;</span><br><span class="line">    color: #000000;</span><br><span class="line">    text-align: left;</span><br><span class="line">    padding: 5px;</span><br><span class="line">&#125;</span><br><span class="line">.bs-banner .close &#123;</span><br><span class="line">    float: right;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    margin: 3px 8px 0px 0px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;bs-banner&quot; id=&quot;bs-banner-message&quot;&gt;</span><br><span class="line">    &lt;span class=&quot;close&quot; title=&quot;close&quot; onclick=&quot;this.parentElement.style.display = &#x27;none&#x27;&quot;&gt; å…³é—­ &lt;/span&gt;</span><br><span class="line">    &lt;span class=&quot;inner&quot;&gt;</span><br><span class="line">      è¿™é‡Œå†™ä¸Š æ¨ªå¹… å±•ç¤ºçš„ æ–‡å­—ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼é©¬å“¥ç§æˆ¿èœ Gerrit</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line">        element.appendChild(banner);</span><br><span class="line"></span><br><span class="line">    &#125;); //end domHook.onAttached(element =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;); // end Gerrit.install(plugin =&gt; &#123;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<ol>
<li>ä¸»è¦è¿™é‡Œ plugin.hook(â€˜bannerâ€™,  è¿™é‡Œçš„ banner æ˜¯ gerrit ä¸Š å®šä¹‰å¥½çš„ã€‚ï¼Œé€šè¿‡é¡µé¢ å³é”® æ£€æŸ¥ å¯ä»¥çœ‹åˆ° <gr-endpoint-decorator name="banner"></gr-endpoint-decorator> è¿™ä¸ªæ ‡ç­¾</li>
<li>å…¶ä»–çš„ ç±»ä¼¼ ä¹Ÿæ˜¯æ‰¾ gr-endpoint-decorator  è¿™æ ·çš„æ ‡ç­¾ã€‚ä¾‹å¦‚ç°ä¾‹å­çš„ footerã€‚</li>
</ol>
<h2 id="è‡ªå®šä¹‰-footer"><a href="#è‡ªå®šä¹‰-footer" class="headerlink" title="è‡ªå®šä¹‰ footer"></a>è‡ªå®šä¹‰ footer</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">// gerrit https://gerrit.googlesource.com/gerrit/+/master/polygerrit-ui/app/samples/theme-plugin.js</span><br><span class="line">// https://gerrit-review.googlesource.com/Documentation/pg-plugin-dev.html</span><br><span class="line">// https://groups.google.com/g/repo-discuss/c/tgvmGhfFcgU</span><br><span class="line">// https://stackoverflow.com/questions/19307964/customize-gerrit-home-pagelogo-and-color</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Gerrit.install(plugin =&gt; &#123;</span><br><span class="line">    const domHook = plugin.hook(&#x27;footer-up&#x27;, &#123;replace: true&#125;);</span><br><span class="line">    domHook.onAttached(element =&gt; &#123;</span><br><span class="line">        const banner = document.createElement(&#x27;div&#x27;);</span><br><span class="line">        banner.innerHTML = `</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">a &#123;</span><br><span class="line">color: #0060B6;</span><br><span class="line">text-decoration: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a:hover &#123;</span><br><span class="line">color:#00A0C6;</span><br><span class="line">text-decoration:none;</span><br><span class="line">cursor:pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bs-footer&#123;</span><br><span class="line">display: flex;</span><br><span class="line">justify-content: space-between;</span><br><span class="line">padding: var(--spacing-m) var(--spacing-l);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;bs-footer&quot; id=&quot;bs-banner-message&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">  è¿™é‡Œå†™ä¸Š footer å±•ç¤ºçš„ å†…å®¹ã€‚è¿™ä¸ª footer up æ˜¯æˆ‘ è‡ªå·± åŠ çš„ä¸€ä¸ªï¼Œä½äº main ç°ï¼ŒçœŸæ­£çš„ footer ä¸Šé¢ä¸€ç‚¹ã€‚</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line">        element.appendChild(banner);</span><br><span class="line"></span><br><span class="line">    &#125;); //end domHook.onAttached(element =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;); // end Gerrit.install(plugin =&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>














































</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/8e84aa6341661821662742d44f7f940840f582da/">https://magesfc.github.io/mage/8e84aa6341661821662742d44f7f940840f582da/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://magesfc.github.io" target="_blank">é©¬å“¥ç§æˆ¿èœ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/gerrit/">gerrit</a><a class="post-meta__tags" href="/tags/js/">js</a><a class="post-meta__tags" href="/tags/plugin/">plugin</a><a class="post-meta__tags" href="/tags/development/">development</a></div><div class="post_share"><div class="social-share" data-image="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="æ”¯ä»˜å¯¶"/></a><div class="post-qr-code-desc">æ”¯ä»˜å¯¶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/58f260a2b55b742f68c099917acc006eb5dcfd40/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">gerritå­¦ä¹ ä¹‹ä¿®æ”¹ç¼–è¯‘gerritæºç </div></div></a></div><div class="next-post pull-right"><a href="/mage/ed893b98e2059ff6ec4cc874ca0124b383d8f151/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Ubuntuå­¦ä¹ ç¬”è®°ä¹‹åˆ†åŒºè¯¦è§£ä¹‹partedå‘½ä»¤</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/mage/9f11362bb48e38171ec1992629522ab39976a878/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritä»£ç æœåŠ¡å™¨ä¹‹sshé˜Ÿåˆ—è¯¦è§£"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritä»£ç æœåŠ¡å™¨ä¹‹sshé˜Ÿåˆ—è¯¦è§£</div></div></a></div><div><a href="/mage/8ac00d53eb291c161df9a3d30ccaca66be48f13c/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritä¿®æ”¹projectè·¯å¾„"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritä¿®æ”¹projectè·¯å¾„</div></div></a></div><div><a href="/mage/e2cc5e300708461bde262aaae49a064be28321d2/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritæƒé™ç®¡ç†"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritæƒé™ç®¡ç†</div></div></a></div><div><a href="/mage/4ffe00a009758049d18e75751a7dcc4ee3a21ef9/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritå®‰è£…githubæ’ä»¶"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritå®‰è£…githubæ’ä»¶</div></div></a></div><div><a href="/mage/b1cf003423f7ac158b861abd5a96522cbd2fae86/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritçš„sshå‘½ä»¤è¡Œå·¥å…·"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹gerritçš„sshå‘½ä»¤è¡Œå·¥å…·</div></div></a></div><div><a href="/mage/037b07ff16870d51848a2e4b1a21052b80988d7d/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹å®‰è£…gerritä»£ç æœåŠ¡å™¨"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹å®‰è£…gerritä»£ç æœåŠ¡å™¨</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> è¿™é‡Œæ˜¯ é©¬å“¥ çš„ä¸ªäººåšå®¢ </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">161</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">180</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">34</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#gerrit-%E4%BD%BF%E7%94%A8-JS-%E6%8F%92%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">gerrit ä½¿ç”¨ JS æ’ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gerrit-JS-%E6%8F%92%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">gerrit JS æ’ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Plugin-loading-and-initialization"><span class="toc-number">2.1.</span> <span class="toc-text">Plugin loading and initialization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Low-level-DOM-API-concepts"><span class="toc-number">2.2.</span> <span class="toc-text">Low-level DOM API concepts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#High-level-DOM-API-concepts"><span class="toc-number">2.3.</span> <span class="toc-text">High-level DOM API concepts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Low-level-DOM-API"><span class="toc-number">2.4.</span> <span class="toc-text">Low-level DOM API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#High-level-API"><span class="toc-number">2.5.</span> <span class="toc-text">High-level API</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">3.</span> <span class="toc-text">ä¾‹å­</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE"><span class="toc-number">3.1.</span> <span class="toc-text">ä¸»é¢˜è®¾ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%AA%E5%B9%85%E6%96%87%E5%AD%97"><span class="toc-number">3.2.</span> <span class="toc-text">è‡ªå®šä¹‰æ¨ªå¹…æ–‡å­—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-footer"><span class="toc-number">3.3.</span> <span class="toc-text">è‡ªå®šä¹‰ footer</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/84776adcfbfc963bd1f2f6d5bd3fd8d22c6a46a5/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin"/></a><div class="content"><a class="title" href="/mage/84776adcfbfc963bd1f2f6d5bd3fd8d22c6a46a5/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹show-build-parameters-plugin</a><time datetime="2022-11-04T03:53:50.000Z" title="æ›´æ–°äº 2022-11-04 11:53:50">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/23369f1e1080d1a6749c477927cb9acccf216b36/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin"/></a><div class="content"><a class="title" href="/mage/23369f1e1080d1a6749c477927cb9acccf216b36/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹matrix-project-plugin</a><time datetime="2022-11-04T03:53:32.000Z" title="æ›´æ–°äº 2022-11-04 11:53:32">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/f69d2317dbb9ce1dbfccbd61f81a402200d7547f/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin"/></a><div class="content"><a class="title" href="/mage/f69d2317dbb9ce1dbfccbd61f81a402200d7547f/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹job-parameter-summary-plugin</a><time datetime="2022-11-04T03:53:14.000Z" title="æ›´æ–°äº 2022-11-04 11:53:14">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/dd153582d58799584987955d6355cf3c32f1bc7f/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹hidden-parameter-plugin"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jenkinsæ’ä»¶å­¦ä¹ ä¹‹hidden-parameter-plugin"/></a><div class="content"><a class="title" href="/mage/dd153582d58799584987955d6355cf3c32f1bc7f/" title="jenkinsæ’ä»¶å­¦ä¹ ä¹‹hidden-parameter-plugin">jenkinsæ’ä»¶å­¦ä¹ ä¹‹hidden-parameter-plugin</a><time datetime="2022-11-04T03:52:57.000Z" title="æ›´æ–°äº 2022-11-04 11:52:57">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/a718e01bee375dd72d94fd15211e2e4f41c0a52c/" title="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§"><img src= "/img/loading.gif" data-lazy-src="https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§"/></a><div class="content"><a class="title" href="/mage/a718e01bee375dd72d94fd15211e2e4f41c0a52c/" title="Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§">Linuxå­¦ä¹ ä¹‹bashå­¦ä¹ ä¹‹cookbookæŠ€å·§</a><time datetime="2022-11-04T03:48:18.000Z" title="æ›´æ–°äº 2022-11-04 11:48:18">2022-11-04</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://office-1256119282.file.myqcloud.com/2022/official-web/cdn/20220301/pc_bg_05.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 By mage</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>