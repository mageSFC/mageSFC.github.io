<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Harborå®‰è£…å’Œé…ç½®å­¦ä¹ ç¬”è®° | é©¬å“¥ç§æˆ¿èœ</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Harbor Installation and Configuration ç‰ˆæœ¬ 2.8.0 https:&#x2F;&#x2F;goharbor.io&#x2F;docs&#x2F;2.0.0&#x2F;install-config&#x2F; harbor å®‰è£…æ¡ä»¶ç¡¬ä»¶æ¡ä»¶ Hardwareä¸‹é¢åˆ—å‡ºäº† éœ€è¦çš„ç¡¬ä»¶èµ„æºï¼Œ cpu ï¼Œå†…å­˜ï¼Œç£ç›˜ç­‰ï¼š Resource 	Minimum 	Recommended CPU 	    2 CPU 	    4 C">
<meta property="og:type" content="article">
<meta property="og:title" content="Harborå®‰è£…å’Œé…ç½®å­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://magesfc.github.io/mage/68d7b1dd29e1dbef2bda325151ad5ee39f9980c1/">
<meta property="og:site_name" content="é©¬å“¥ç§æˆ¿èœ">
<meta property="og:description" content="Harbor Installation and Configuration ç‰ˆæœ¬ 2.8.0 https:&#x2F;&#x2F;goharbor.io&#x2F;docs&#x2F;2.0.0&#x2F;install-config&#x2F; harbor å®‰è£…æ¡ä»¶ç¡¬ä»¶æ¡ä»¶ Hardwareä¸‹é¢åˆ—å‡ºäº† éœ€è¦çš„ç¡¬ä»¶èµ„æºï¼Œ cpu ï¼Œå†…å­˜ï¼Œç£ç›˜ç­‰ï¼š Resource 	Minimum 	Recommended CPU 	    2 CPU 	    4 C">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://t.mwm.moe/fj/">
<meta property="article:published_time" content="2023-07-13T08:07:37.000Z">
<meta property="article:modified_time" content="2023-07-13T09:51:43.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="harbor">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://t.mwm.moe/fj/"><link rel="shortcut icon" href="https://www.zeekrlife.com/favicon.png"><link rel="canonical" href="https://magesfc.github.io/mage/68d7b1dd29e1dbef2bda325151ad5ee39f9980c1/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: mage","link":"é“¾æ¥: ","source":"æ¥æº: é©¬å“¥ç§æˆ¿èœ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Harborå®‰è£…å’Œé…ç½®å­¦ä¹ ç¬”è®°',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-13 17:51:43'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">233</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">40</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://t.mwm.moe/fj/')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">é©¬å“¥ç§æˆ¿èœ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> ç›®å½•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> ç²¾é€‰æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿå¼€å§‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¢˜é¡µé¢</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¢˜é…ç½®-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> ğŸ›  ä¸»é¢˜é…ç½®-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> â“ ä¸»é¢˜é—®ç­”</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> âš¡ï¸ è¿›é˜¶æ•™ç¨‹</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥å¿—</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> å…¶ä»–ç¤ºä¾‹</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Harborå®‰è£…å’Œé…ç½®å­¦ä¹ ç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-07-13T08:07:37.000Z" title="å‘è¡¨äº 2023-07-13 16:07:37">2023-07-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-07-13T09:51:43.000Z" title="æ›´æ–°äº 2023-07-13 17:51:43">2023-07-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/harbor/">harbor</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Harborå®‰è£…å’Œé…ç½®å­¦ä¹ ç¬”è®°"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Harbor-Installation-and-Configuration"><a href="#Harbor-Installation-and-Configuration" class="headerlink" title="Harbor Installation and Configuration "></a>Harbor Installation and Configuration </h1><p>ç‰ˆæœ¬ 2.8.0</p>
<p><a target="_blank" rel="noopener" href="https://goharbor.io/docs/2.0.0/install-config/">https://goharbor.io/docs/2.0.0/install-config/</a></p>
<h1 id="harbor-å®‰è£…æ¡ä»¶"><a href="#harbor-å®‰è£…æ¡ä»¶" class="headerlink" title="harbor å®‰è£…æ¡ä»¶"></a>harbor å®‰è£…æ¡ä»¶</h1><h2 id="ç¡¬ä»¶æ¡ä»¶-Hardware"><a href="#ç¡¬ä»¶æ¡ä»¶-Hardware" class="headerlink" title="ç¡¬ä»¶æ¡ä»¶ Hardware"></a>ç¡¬ä»¶æ¡ä»¶ Hardware</h2><p>ä¸‹é¢åˆ—å‡ºäº† éœ€è¦çš„ç¡¬ä»¶èµ„æºï¼Œ cpu ï¼Œå†…å­˜ï¼Œç£ç›˜ç­‰ï¼š</p>
<pre><code>Resource 	Minimum 	Recommended
CPU 	    2 CPU 	    4 CPU
Mem 	    4 GB 	    8 GB
Disk 	    40 GB 	    160 GB
</code></pre>
<h2 id="è½¯ä»¶æ¡ä»¶-Software"><a href="#è½¯ä»¶æ¡ä»¶-Software" class="headerlink" title="è½¯ä»¶æ¡ä»¶ Software"></a>è½¯ä»¶æ¡ä»¶ Software</h2><p>å®‰è£…harborå‰éœ€è¦æå‰å®‰è£…ï¼Œå‡†å¤‡çš„è½¯ä»¶ç¯å¢ƒï¼Œä¾‹å¦‚dockerï¼Œdocker-composeï¼Œ openssl</p>
<pre><code>Software 	    Version 	                    Description
Docker engine 	Version 17.06.0-ce+ or higher 	å‚è€ƒæ–‡æ¡£ https://docs.docker.com/engine/installation/
Docker Compose 	Version 1.18.0 or higher 	    å‚è€ƒæ–‡æ¡£ https://docs.docker.com/compose/install/
Openssl 	    Latest is preferred 	        Used to generate certificate and keys for Harbor
</code></pre>
<h2 id="ç½‘ç»œç«¯å£æ¡ä»¶-Network-ports"><a href="#ç½‘ç»œç«¯å£æ¡ä»¶-Network-ports" class="headerlink" title="ç½‘ç»œç«¯å£æ¡ä»¶ Network ports"></a>ç½‘ç»œç«¯å£æ¡ä»¶ Network ports</h2><p>harbor æœåŠ¡ éœ€è¦å¦‚ä¸‹çš„å‡ ä¸ª ç½‘ç»œç«¯å£ï¼Œç«¯å£éƒ½æ˜¯å¯ä»¥æ”¹çš„ï¼Œä¸è¿‡é»˜è®¤ï¼Œä¹ æƒ¯ ç”¨ä¸‹é¢çš„å‡ ä¸ªç«¯å£ã€‚</p>
<pre><code>Port 	Protocol 	Description
443 	HTTPS 	    Harbor portal and core API accept HTTPS requests on this port. You can change this port in the configuration file.
80 	    HTTP 	    Harbor portal and core API accept HTTP  requests on this port. You can change this port in the configuration file.
4443 	HTTPS 	    Connections to the Docker Content Trust service for Harbor. Only required if Notary is enabled. You can change this port in the configuration file.
</code></pre>
<h1 id="ä¸‹è½½-Harbor-Installer"><a href="#ä¸‹è½½-Harbor-Installer" class="headerlink" title="ä¸‹è½½ Harbor Installer"></a>ä¸‹è½½ Harbor Installer</h1><p>å¯ä»¥ä»å®˜æ–¹å‘å¸ƒé¡µé¢ä¸‹è½½Harborå®‰è£…ç¨‹åºã€‚ä¸‹è½½ è”æœºå®‰è£…ç¨‹åº æˆ– è„±æœºå®‰è£…ç¨‹åºã€‚ </p>
<pre><code>Online installer: åœ¨çº¿å®‰è£…åŒ…å¾ˆå°ï¼Œå°±æ˜¯ä¸€ä¸ªæ‰§è¡Œè„šæœ¬åŠ ä¸Šå‡ ä¸ªé…ç½®æ–‡ä»¶ .

Offline installer: ç¦»çº¿å®‰è£…åŒ…å¾ˆå¤šï¼Œå…¶ä¸­å¤šäº†é•œåƒæ–‡ä»¶.
</code></pre>
<p>ä¸‹é¢å¯ä»¥çœ‹åˆ° å®‰è£… åŒ…å¤§å°ï¼Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">harbor-offline-installer-v2.8.2.tgz 579 MB </span><br><span class="line"></span><br><span class="line">harbor-offline-installer-v2.8.2.tgz.asc 833 Bytes   è¿™ä¸ªæ–‡ä»¶æ˜¯ éªŒè¯å®‰è£…åŒ…æ–‡ä»¶æ˜¯å¦æ˜¯å®˜æ–¹çš„ï¼Œç±»ä¼¼ç­¾åéªŒè¯ ï¼Œæ£€æµ‹æ–‡ä»¶çœŸå‡çš„ï¼Œæ˜¯å¦æ˜¯è¢«ç¯¡æ”¹è¿‡çš„ã€‚</span><br><span class="line"></span><br><span class="line">harbor-online-installer-v2.8.2.tgz 10.8 KB </span><br><span class="line"></span><br><span class="line">harbor-online-installer-v2.8.2.tgz.asc 833 Bytes</span><br></pre></td></tr></table></figure>
<p>ç„¶åé€‰æ‹©éœ€è¦çš„åŒ…ï¼Œä» github ä¸Šä¸‹è½½ <a target="_blank" rel="noopener" href="https://github.com/goharbor/harbor/releases">https://github.com/goharbor/harbor/releases</a></p>
<p>åˆ©ç”¨ wget å‘½ä»¤ä¸‹è½½ æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/goharbor/harbor/releases/download/v2.8.2/harbor-offline-installer-v2.8.2.tgz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wget https://github.com/goharbor/harbor/releases/download/v2.8.2/harbor-online-installer-v2.8.2.tgz</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶æ­£ç‰ˆéªŒè¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg -v --keyserver hkps://keyserver.ubuntu.com --verify harbor-online-installer-version.tgz.asc</span><br><span class="line"></span><br><span class="line">gpg -v --keyserver hkps://keyserver.ubuntu.com --verify harbor-offline-installer-version.tgz.asc</span><br></pre></td></tr></table></figure>


<p>è§£å‹æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xvzf harbor-online-installer-v2.8.2.tgz</span><br><span class="line">harbor/prepare</span><br><span class="line">harbor/LICENSE</span><br><span class="line">harbor/install.sh</span><br><span class="line">harbor/common.sh</span><br><span class="line">harbor/harbor.yml.tmpl</span><br><span class="line"></span><br><span class="line"># å¯ä»¥çœ‹åˆ°è§£å‹åæ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">tree</span><br><span class="line">â”œâ”€â”€ harbor</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ common.sh</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ harbor.yml.tmpl</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ install.sh</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ LICENSE</span><br><span class="line">â”‚Â Â  â””â”€â”€ prepare</span><br><span class="line">â”œâ”€â”€ harbor-offline-installer-v2.8.2.tgz</span><br><span class="line">â””â”€â”€ harbor-online-installer-v2.8.2.tgz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="é…ç½®-HTTPS-å»è®¿é—®-Harbor"><a href="#é…ç½®-HTTPS-å»è®¿é—®-Harbor" class="headerlink" title="é…ç½® HTTPS å»è®¿é—® Harbor"></a>é…ç½® HTTPS å»è®¿é—® Harbor</h1><p>è‹¥è¦é…ç½®HTTPSï¼Œå¿…é¡»åˆ›å»ºSSLè¯ä¹¦ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç”±å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹CAç­¾åçš„è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ã€‚æœ¬èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨OpenSSLåˆ›å»ºCAï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨CAå¯¹æœåŠ¡å™¨è¯ä¹¦å’Œå®¢æˆ·ç«¯è¯ä¹¦è¿›è¡Œç­¾åã€‚æ‚¨å¯ä»¥ä½¿ç”¨å…¶ä»–CAæä¾›ç¨‹åºï¼Œä¾‹å¦‚Letâ€™s Encryptã€‚</p>
<h2 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h2><pre><code>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ‚¨åº”è¯¥ä»CAè·å¾—è¯ä¹¦ã€‚åœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯ä»¥ç”Ÿæˆè‡ªå·±çš„CAã€‚è‹¥è¦ç”ŸæˆCAè¯ä¹¦ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚ 
</code></pre>
<p>Generate a CA certificate private key.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out ca.key 4096</span><br></pre></td></tr></table></figure>


<p>Generate the CA certificate.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -new -nodes -sha512 -days 3650 \</span><br><span class="line"> -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=yourdomain.com&quot; \</span><br><span class="line"> -key ca.key \</span><br><span class="line"> -out ca.crt</span><br></pre></td></tr></table></figure>


<h2 id="ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦"><a href="#ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦" class="headerlink" title="ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦"></a>ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦</h2><pre><code> è¯ä¹¦é€šå¸¸åŒ…å«.crtæ–‡ä»¶å’Œ.keyæ–‡ä»¶ï¼Œä¾‹å¦‚yourdomain.com.crtå’Œyourdomain.com.keyã€‚ 
</code></pre>
<p>ç”Ÿæˆç§é’¥æ–‡ä»¶ Generate a private key.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out yourdomain.com.key 4096</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆ csr æ–‡ä»¶ Generate a certificate signing request (CSR).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openssl req -sha512 -new \</span><br><span class="line">    -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=yourdomain.com&quot; \</span><br><span class="line">    -key yourdomain.com.key \</span><br><span class="line">    -out yourdomain.com.csr</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>ç”Ÿæˆ x509 v3 æ–‡ä»¶</p>
<p>Generate an x509 v3 extension file.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; v3.ext &lt;&lt;-EOF</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class="line">extendedKeyUsage = serverAuth</span><br><span class="line">subjectAltName = @alt_names</span><br><span class="line"></span><br><span class="line">[alt_names]</span><br><span class="line">DNS.1=yourdomain.com</span><br><span class="line">DNS.2=yourdomain</span><br><span class="line">DNS.3=hostname</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆ crt æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -sha512 -days 3650 \</span><br><span class="line">    -extfile v3.ext \</span><br><span class="line">    -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br><span class="line">    -in yourdomain.com.csr \</span><br><span class="line">    -out yourdomain.com.crt</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®è¯ä¹¦åˆ°æœåŠ¡å™¨ä¸Š"><a href="#é…ç½®è¯ä¹¦åˆ°æœåŠ¡å™¨ä¸Š" class="headerlink" title="é…ç½®è¯ä¹¦åˆ°æœåŠ¡å™¨ä¸Š"></a>é…ç½®è¯ä¹¦åˆ°æœåŠ¡å™¨ä¸Š</h2><p>éœ€è¦ ca.crt, yourdomain.com.crt, and yourdomain.com.key æ–‡ä»¶åˆ° harborï¼Œdocker ç­‰ä¸Š</p>
<p>å¤åˆ¶ crtï¼Œ key æ–‡ä»¶åˆ° harbor æœåŠ¡å™¨ä¸Š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp yourdomain.com.crt /data/cert/</span><br><span class="line">cp yourdomain.com.key /data/cert/</span><br></pre></td></tr></table></figure>

<p>è½¬æ¢ç”Ÿæˆ cert æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -inform PEM -in yourdomain.com.crt -out yourdomain.com.cert</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>å°†æ‚¨çš„domain.com.crtè½¬æ¢ä¸ºyourdomain.com.certï¼Œä¾›Dockerä½¿ç”¨ã€‚
Dockerå®ˆæŠ¤è¿›ç¨‹å°†.crtæ–‡ä»¶è§£é‡Šä¸ºCAè¯ä¹¦ï¼Œå°†.certæ–‡ä»¶è§£é‡Šä¸ºå®¢æˆ·ç«¯è¯ä¹¦ã€‚
</code></pre>
<p>å¤åˆ¶ certï¼Œ keyï¼Œ ca.crt æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp yourdomain.com.cert /etc/docker/certs.d/yourdomain.com/</span><br><span class="line">cp yourdomain.com.key /etc/docker/certs.d/yourdomain.com/</span><br><span class="line">cp ca.crt /etc/docker/certs.d/yourdomain.com/</span><br></pre></td></tr></table></figure>


<pre><code>å¦‚æœ é»˜è®¤çš„nginxç«¯å£443æ˜ å°„åˆ°ä¸åŒçš„ç«¯å£ï¼Œ
è¯·åˆ›å»ºæ–‡ä»¶å¤¹/etc/docker/certs.d/yourdomain.com:port
æˆ–/etc/docker/certs.d/harbor_IP:portã€‚ 
</code></pre>
<p>é‡å¯ docker æœåŠ¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/docker/certs.d/</span><br><span class="line">    â””â”€â”€ yourdomain.com:port</span><br><span class="line">       â”œâ”€â”€ yourdomain.com.cert  &lt;-- Server certificate signed by CA</span><br><span class="line">       â”œâ”€â”€ yourdomain.com.key   &lt;-- Server key signed by CA</span><br><span class="line">       â””â”€â”€ ca.crt               &lt;-- Certificate authority that signed the registry certificate</span><br></pre></td></tr></table></figure>


<h2 id="é‡æ–°éƒ¨ç½²æˆ–è€…é‡æ–°é…ç½®-harborçš„æƒ…å†µ"><a href="#é‡æ–°éƒ¨ç½²æˆ–è€…é‡æ–°é…ç½®-harborçš„æƒ…å†µ" class="headerlink" title="é‡æ–°éƒ¨ç½²æˆ–è€…é‡æ–°é…ç½® harborçš„æƒ…å†µ"></a>é‡æ–°éƒ¨ç½²æˆ–è€…é‡æ–°é…ç½® harborçš„æƒ…å†µ</h2><p>å¦‚æœä½ å·²ç»éƒ¨ç½²äº†harborï¼Œä½†æ˜¯é‡‡ç”¨çš„httpåè®®çš„ï¼Œéœ€è¦å¦‚ä¸‹æ“ä½œ</p>
<p>é‡æ–°æ‰§è¡Œ  prepare è„šæœ¬ï¼Œå»å¼€å¯ https é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./prepare</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœharbor æ­£åœ¨è¿è¡Œï¼Œéœ€è¦å…³é—­æ‰ï¼Œç§»é™¤æ‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down -v</span><br></pre></td></tr></table></figure>

<p>é‡å¯ harbor</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<h2 id="ç¡®è®¤httpsæ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®"><a href="#ç¡®è®¤httpsæ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®" class="headerlink" title="ç¡®è®¤httpsæ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®"></a>ç¡®è®¤httpsæ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®</h2><p>æµè§ˆå™¨ æ‰“å¼€ <a target="_blank" rel="noopener" href="https://yourdomain.com,å¦‚æœèƒ½æ­£å¸¸è®¿é—®è¯´æ˜é…ç½®æ²¡é—®é¢˜äº†./">https://yourdomain.comï¼Œå¦‚æœèƒ½æ­£å¸¸è®¿é—®è¯´æ˜é…ç½®æ²¡é—®é¢˜äº†ã€‚</a></p>
<p>æŸ¥çœ‹å…¶ä»–dockerå®ä¾‹æœºå™¨ä¸Š&#x2F;etc&#x2F;docker&#x2F;daemon.jsonæ–‡ä»¶ æ²¡æœ‰é…ç½®ä¸Š -insecure-registry   <a target="_blank" rel="noopener" href="https://yourdomain.com.,/">https://yourdomain.com.ï¼Œ</a> å¹¶ä¸” docker login yourdomain.com å¯ä»¥æ­£å¸¸ç™»å½•ï¼Œè¿™æ ·è¯´æ˜é…ç½®æ²¡é—®é¢˜äº†ã€‚</p>
<p>å¦‚æœä½ çš„httpsç«¯å£é»˜è®¤ä¸æ˜¯ 443 ï¼Œä½¿ç”¨ docker login yourdomain.com:port ç™»å½•ã€‚</p>
<h1 id="é…ç½®-Harbor-YML-æ–‡ä»¶"><a href="#é…ç½®-Harbor-YML-æ–‡ä»¶" class="headerlink" title="é…ç½® Harbor YML æ–‡ä»¶"></a>é…ç½® Harbor YML æ–‡ä»¶</h1><p>ä¸»è¦é…ç½® å¦‚ä¸‹ å‡ ä¸ªåœ°æ–¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åŸŸå</span><br><span class="line">hostname: reg.mydomain.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯ä¹¦</span><br><span class="line">certificate: /your/certificate/path</span><br><span class="line">private_key: /your/private/key/path </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç®¡ç†å‘˜å¯†ç ï¼Œ</span><br><span class="line">harbor_admin_password</span><br><span class="line"></span><br><span class="line">æ•°æ®å­˜å‚¨çš„ä½ç½® </span><br><span class="line">data_volume: /data</span><br></pre></td></tr></table></figure>

<h1 id="é…ç½®harborå†…éƒ¨ç»„ä»¶ä¹‹é—´é€šä¿¡ä½¿ç”¨-tls"><a href="#é…ç½®harborå†…éƒ¨ç»„ä»¶ä¹‹é—´é€šä¿¡ä½¿ç”¨-tls" class="headerlink" title="é…ç½®harborå†…éƒ¨ç»„ä»¶ä¹‹é—´é€šä¿¡ä½¿ç”¨ tls"></a>é…ç½®harborå†…éƒ¨ç»„ä»¶ä¹‹é—´é€šä¿¡ä½¿ç”¨ tls</h1><h1 id="æ‰§è¡Œå®‰è£…è„šæœ¬"><a href="#æ‰§è¡Œå®‰è£…è„šæœ¬" class="headerlink" title="æ‰§è¡Œå®‰è£…è„šæœ¬"></a>æ‰§è¡Œå®‰è£…è„šæœ¬</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Harborå®‰è£…ç¯å¢ƒé¢„å¤„ç†</span><br><span class="line">./prepare</span><br><span class="line"></span><br><span class="line"># å®‰è£…å¹¶å¯åŠ¨Harbor</span><br><span class="line">./install.sh</span><br><span class="line"></span><br><span class="line"># æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼ˆåº”è¯¥æ˜¯å¯åŠ¨9ä¸ªå®¹å™¨ï¼‰è¦åœ¨harborç›®å½•ä¸‹æ“ä½œï¼Œå¦åˆ™docker-composeä¼šåˆé—®é¢˜ï¼›</span><br><span class="line">docker-compose ps</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="å…¶ä»–å‚è€ƒ"><a href="#å…¶ä»–å‚è€ƒ" class="headerlink" title="å…¶ä»–å‚è€ƒ"></a>å…¶ä»–å‚è€ƒ</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kevingrace/p/6547616.html">https://www.cnblogs.com/kevingrace/p/6547616.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.qikqiak.com/post/harbor-code-analysis/">https://www.qikqiak.com/post/harbor-code-analysis/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/leffss/p/15621165.html">https://www.cnblogs.com/leffss/p/15621165.html</a></p>
<p><a target="_blank" rel="noopener" href="https://xie.infoq.cn/article/faa9ee456452891828cc080b8">https://xie.infoq.cn/article/faa9ee456452891828cc080b8</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/68d7b1dd29e1dbef2bda325151ad5ee39f9980c1/">https://magesfc.github.io/mage/68d7b1dd29e1dbef2bda325151ad5ee39f9980c1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://magesfc.github.io" target="_blank">é©¬å“¥ç§æˆ¿èœ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/harbor/">harbor</a></div><div class="post_share"><div class="social-share" data-image="https://t.mwm.moe/fj/" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="æ”¯ä»˜å¯¶"/></a><div class="post-qr-code-desc">æ”¯ä»˜å¯¶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/64aa5aff5028b66fde1c4d99fabd89113f42a31a/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Dockerå­¦ä¹ ä¹‹å®‰è£…docker</div></div></a></div><div class="next-post pull-right"><a href="/mage/59f7e0dd63137ba3f746fd695ac41ce6ff273a8e/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Vueå­¦ä¹ ä¹‹vue3å¿«é€Ÿä¸Šæ‰‹ï¼ˆå°šç¡…è°·ï¼‰</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> è¿™é‡Œæ˜¯ é©¬å“¥ çš„ä¸ªäººåšå®¢ </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">233</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">40</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Harbor-Installation-and-Configuration"><span class="toc-number">1.</span> <span class="toc-text">Harbor Installation and Configuration </span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#harbor-%E5%AE%89%E8%A3%85%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">harbor å®‰è£…æ¡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E6%9D%A1%E4%BB%B6-Hardware"><span class="toc-number">2.1.</span> <span class="toc-text">ç¡¬ä»¶æ¡ä»¶ Hardware</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E6%9D%A1%E4%BB%B6-Software"><span class="toc-number">2.2.</span> <span class="toc-text">è½¯ä»¶æ¡ä»¶ Software</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AB%AF%E5%8F%A3%E6%9D%A1%E4%BB%B6-Network-ports"><span class="toc-number">2.3.</span> <span class="toc-text">ç½‘ç»œç«¯å£æ¡ä»¶ Network ports</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-Harbor-Installer"><span class="toc-number">3.</span> <span class="toc-text">ä¸‹è½½ Harbor Installer</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-HTTPS-%E5%8E%BB%E8%AE%BF%E9%97%AE-Harbor"><span class="toc-number">4.</span> <span class="toc-text">é…ç½® HTTPS å»è®¿é—® Harbor</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6"><span class="toc-number">4.1.</span> <span class="toc-text">ç”Ÿæˆè¯ä¹¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6"><span class="toc-number">4.2.</span> <span class="toc-text">ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A"><span class="toc-number">4.3.</span> <span class="toc-text">é…ç½®è¯ä¹¦åˆ°æœåŠ¡å™¨ä¸Š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2%E6%88%96%E8%80%85%E9%87%8D%E6%96%B0%E9%85%8D%E7%BD%AE-harbor%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">4.4.</span> <span class="toc-text">é‡æ–°éƒ¨ç½²æˆ–è€…é‡æ–°é…ç½® harborçš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4https%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE"><span class="toc-number">4.5.</span> <span class="toc-text">ç¡®è®¤httpsæ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Harbor-YML-%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">é…ç½® Harbor YML æ–‡ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEharbor%E5%86%85%E9%83%A8%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E4%BD%BF%E7%94%A8-tls"><span class="toc-number">6.</span> <span class="toc-text">é…ç½®harborå†…éƒ¨ç»„ä»¶ä¹‹é—´é€šä¿¡ä½¿ç”¨ tls</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC"><span class="toc-number">7.</span> <span class="toc-text">æ‰§è¡Œå®‰è£…è„šæœ¬</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%8F%82%E8%80%83"><span class="toc-number">8.</span> <span class="toc-text">å…¶ä»–å‚è€ƒ</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/ee6e53b9fbe2f10991d150675f0b88ed427b1150/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ"/></a><div class="content"><a class="title" href="/mage/ee6e53b9fbe2f10991d150675f0b88ed427b1150/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-diffmanifestsæºç åˆ†æ</a><time datetime="2024-05-18T12:32:43.000Z" title="æ›´æ–°äº 2024-05-18 20:32:43">2024-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/a52bd2f9ab320c603de205368472b5caa19b7207/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ"/></a><div class="content"><a class="title" href="/mage/a52bd2f9ab320c603de205368472b5caa19b7207/" title="Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ">Androidä¸‹çš„é…ç½®ç®¡ç†ä¹‹é“ä¹‹repo-syncæºç åˆ†æ</a><time datetime="2024-05-18T02:15:08.000Z" title="æ›´æ–°äº 2024-05-18 10:15:08">2024-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/0bd8125569ad5e0222f4ca4e90e626be2ee24c26/" title="Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter"/></a><div class="content"><a class="title" href="/mage/0bd8125569ad5e0222f4ca4e90e626be2ee24c26/" title="Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter">Jenkinså­¦ä¹ ä¹‹DataBoundConstructorå’ŒDataBoundSetter</a><time datetime="2024-03-31T06:28:23.000Z" title="æ›´æ–°äº 2024-03-31 14:28:23">2024-03-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/4b00a873b39948044a79c7e53eedd63d7af0bfa6/" title="Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤"/></a><div class="content"><a class="title" href="/mage/4b00a873b39948044a79c7e53eedd63d7af0bfa6/" title="Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤">Dockerå­¦ä¹ ä¹‹å®‰è£…docker-swarmé›†ç¾¤</a><time datetime="2024-03-31T06:28:19.000Z" title="æ›´æ–°äº 2024-03-31 14:28:19">2024-03-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/44f033ce59a71a67f64e3c2e330151f82f8754f4/" title="Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…"/></a><div class="content"><a class="title" href="/mage/44f033ce59a71a67f64e3c2e330151f82f8754f4/" title="Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…">Jenkinså­¦ä¹ ä¹‹masteræœåŠ¡å™¨å®‰è£…ä½¿ç”¨dockerå®‰è£…</a><time datetime="2024-03-24T03:25:01.000Z" title="æ›´æ–°äº 2024-03-24 11:25:01">2024-03-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://t.mwm.moe/fj/')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By mage</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>