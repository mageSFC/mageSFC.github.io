<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>React学习总结 | 马哥私房菜</title><meta name="author" content="mage"><meta name="copyright" content="mage"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. React入门## 1.1. React基本认识 ## 1.2. React基本使用 ## 1.3. JSX的理解和使用 ## 1.4. 模块与模块化, 组件与组件化的理解  2. React组件化编程## 2.1. 组件的定义与使用 ## 2.2. 组件的3大属性: state, props, refs ## 2.3. 组件中的事件处理 ## 2.4. 组件的组合使用 ## 2.5. 组件">
<meta property="og:type" content="article">
<meta property="og:title" content="React学习总结">
<meta property="og:url" content="https://magesfc.github.io/mage/a6082cc302dc1ea3400936da1405365de03cbc7f/">
<meta property="og:site_name" content="马哥私房菜">
<meta property="og:description" content="1. React入门## 1.1. React基本认识 ## 1.2. React基本使用 ## 1.3. JSX的理解和使用 ## 1.4. 模块与模块化, 组件与组件化的理解  2. React组件化编程## 2.1. 组件的定义与使用 ## 2.2. 组件的3大属性: state, props, refs ## 2.3. 组件中的事件处理 ## 2.4. 组件的组合使用 ## 2.5. 组件">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://t.mwm.moe/fj/">
<meta property="article:published_time" content="2022-09-13T14:01:10.000Z">
<meta property="article:modified_time" content="2022-09-18T14:03:48.000Z">
<meta property="article:author" content="mage">
<meta property="article:tag" content="react">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://t.mwm.moe/fj/"><link rel="shortcut icon" href="https://www.zeekrlife.com/favicon.png"><link rel="canonical" href="https://magesfc.github.io/mage/a6082cc302dc1ea3400936da1405365de03cbc7f/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: mage","link":"链接: ","source":"来源: 马哥私房菜","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'React学习总结',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-18 22:03:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;background-color:var(--btn-bg);color:var(--btn-color);text-align:center;line-height:2.4;margin:4px 0}.card-announcement .social-button a:hover{background-color:var(--btn-hover-color)}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">233</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">41</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 精选文档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> 🚀 快速开始</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> 📑 主题页面</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> 🛠 主题配置-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> 🛠 主题配置-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> ❓ 主题问答</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> ⚡️ 进阶教程</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> ✨ 更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> 其他示例</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://t.mwm.moe/fj/')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">马哥私房菜</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 精选文档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/21cfbf15/"><span> 🚀 快速开始</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/dc584b87/"><span> 📑 主题页面</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4aa8abbe/"><span> 🛠 主题配置-1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/ceeb73f/"><span> 🛠 主题配置-2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/98d20436/"><span> ❓ 主题问答</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/4073eda/"><span> ⚡️ 进阶教程</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://butterfly.js.org/posts/198a4240/"><span> ✨ 更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://butterfly.js.org/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> 其他示例</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React学习总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-13T14:01:10.000Z" title="发表于 2022-09-13 22:01:10">2022-09-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-18T14:03:48.000Z" title="更新于 2022-09-18 22:03:48">2022-09-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/react/">react</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="React学习总结"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-React入门"><a href="#1-React入门" class="headerlink" title="1. React入门"></a>1. React入门</h1><pre><code>## 1.1. React基本认识
## 1.2. React基本使用
## 1.3. JSX的理解和使用
## 1.4. 模块与模块化, 组件与组件化的理解
</code></pre>
<h1 id="2-React组件化编程"><a href="#2-React组件化编程" class="headerlink" title="2. React组件化编程"></a>2. React组件化编程</h1><pre><code>## 2.1. 组件的定义与使用
## 2.2. 组件的3大属性: state, props, refs
## 2.3. 组件中的事件处理
## 2.4. 组件的组合使用
## 2.5. 组件收集表单数据
## 2.6. 组件的生命周期
## 2.7. 虚拟DOM与DOM diff算法
## 2.8. 命令式编程与声明式编程
</code></pre>
<h1 id="1-React入门-1"><a href="#1-React入门-1" class="headerlink" title="1. React入门"></a>1. React入门</h1><h2 id="1-1-React的基本认识"><a href="#1-1-React的基本认识" class="headerlink" title="1.1. React的基本认识"></a>1.1. React的基本认识</h2><pre><code>1). Facebook开源的一个js库
2). 一个用来动态构建用户界面的js库
3). React的特点
    Declarative(声明式编码)
    Component-Based(组件化编码)
    Learn Once, Write Anywhere(支持客户端与服务器渲染)
    高效
    单向数据流
4). React高效的原因
    虚拟(virtual)DOM, 不总是直接操作DOM(批量更新, 减少更新的次数) 
    高效的DOM Diff算法, 最小化页面重绘(减小页面更新的区域)
</code></pre>
<h2 id="1-2-React的基本使用"><a href="#1-2-React的基本使用" class="headerlink" title="1.2. React的基本使用"></a>1.2. React的基本使用</h2><p>相关 js 库</p>
<ol>
<li>react.js: React 的核心库</li>
<li>react-dom.js: 提供操作 DOM 的 react 扩展库</li>
<li>babel.min.js: 解析 JSX 语法代码转为纯 JS 语法代码的库</li>
</ol>
<p>在页面中导入 js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>编码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt; //必须声明 babel</span><br><span class="line"></span><br><span class="line">//创建虚拟 DOM 元素</span><br><span class="line">const vDom = &lt;h1&gt;Hello React&lt;/h1&gt; //千万不要加引号</span><br><span class="line"></span><br><span class="line">//渲染虚拟 DOM到页面真实 DOM 容器中</span><br><span class="line">ReactDOM.render(vDom, document.getElementById(&#x27;test&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="1-3-JSX的理解和使用"><a href="#1-3-JSX的理解和使用" class="headerlink" title="1.3. JSX的理解和使用"></a>1.3. JSX的理解和使用</h2><pre><code>1). 理解
    * 全称: JavaScript XML
    * react定义的一种类似于XML的JS扩展语法: XML+JS
    * 作用: 用来创建react虚拟DOM(元素)对象
2). 编码相关
    * js中直接可以套标签, 但标签要套js需要放在&#123;&#125;中
    * 在解析显示js数组时, 会自动遍历显示
    * 把数据的数组转换为标签的数组: 
        var liArr = dataArr.map(function(item, index)&#123;
            return &lt;li key=&#123;index&#125;&gt;&#123;item&#125;&lt;/li&gt;
        &#125;)
3). 注意:
    * 标签必须有结束
    * 标签的class属性必须改为className属性
    * 标签的style属性值必须为: &#123;&#123;color:'red', width:12&#125;&#125;
/**
 *
 * jsx 语法规则
 * 1. 定义虚拟DOM时， 不要写引号
 * 2.标签中混入js表达式时要用 &#123;&#125;, if, for 都不是表达式。能返回一个值的 东西就是表达式。表达式可以放到 赋值符号右边。
 * 3.样式的类名指定不要用class，要用 className, class 是关键字
 * 4.内联样式，要用 style=&#123;&#123;key:value&#125;&#125;的形式， 最外面的花括号是和2中一样的，里面的那个花括号 是js中 对象的写法。
 * 5. jsx 只能有一个 根标签
 * 6.标签必须闭合， jsx里面标签会转换为html标签
 * 7标签首字母，小写字母开头则转换为html同名元素，如果html中没有就会报错。如果首字母大写，react会去渲染组件，如果没有就报错。
 *
 * 8.函数式组件，函数名 必须 首字母 大写，,参考第7条
 * 9，组件必须用标签的方式 放到 render 方法里面， 标签必须闭合。
 *
 */
/**
 * js 中类相关的知识点
 * 1. 类中的构造器不是必须写的，要对实例进行一些初始化的操作，如添加指定属性时才写。
 * 2. 子类必须调用父类的构造器，也就是必须调用super来初始化父类。
 * 3.类中所定义的方法 都是放到了类的原型 对象上，供实例去使用。
 *
 *
 *
 */
</code></pre>
<h2 id="1-4-几个重要概念理解"><a href="#1-4-几个重要概念理解" class="headerlink" title="1.4. 几个重要概念理解"></a>1.4. 几个重要概念理解</h2><h3 id="1-模块与组件"><a href="#1-模块与组件" class="headerlink" title="1). 模块与组件"></a>1). 模块与组件</h3><pre><code>1. 模块:
  	理解: 向外提供特定功能的js程序, 一般就是一个js文件
  	为什么: js代码更多更复杂
  	作用: 复用js, 简化js的编写, 提高js运行效率
2. 组件: 
    理解: 用来实现特定功能效果的代码集合(html/css/js)
  	为什么: 一个界面的功能太复杂了
  	作用: 复用编码, 简化项目界面编码, 提高运行效率
</code></pre>
<h3 id="2-模块化与组件化"><a href="#2-模块化与组件化" class="headerlink" title="2). 模块化与组件化"></a>2). 模块化与组件化</h3><pre><code>1. 模块化:
    当应用的js都以模块来编写的, 这个应用就是一个模块化的应用
2. 组件化:
    当应用是以多组件的方式实现功能, 这上应用就是一个组件化的应用
</code></pre>
<h1 id="2-react组件化开发"><a href="#2-react组件化开发" class="headerlink" title="2. react组件化开发"></a>2. react组件化开发</h1><h2 id="2-1-基本理解和使用"><a href="#2-1-基本理解和使用" class="headerlink" title="2.1. 基本理解和使用"></a>2.1. 基本理解和使用</h2><pre><code>1). 自定义的标签: 组件类(函数)/标签
2). 创建组件类
    //方式1: 无状态函数(简单组件, 推荐使用) 没有状态的称为简单组件
    function MyComponentFunction(props) &#123;
        return &lt;h2&gt;我是函数定义的组件，适用于 简单组件 的定义&lt;/h2&gt;
    &#125;
    //方式2: ES6类语法(复杂组件, 推荐使用) 有状态的称为复杂组件
    class MyComponentClass extends React.Component &#123;
        render () &#123;
            // render 是放在哪里的？ MyComponentClass 的原型对象上的，供实例使用。
            // render 中的 this 是谁？ MyComponentClass 实例对象。 &lt;=&gt; MyComponentClass 组件实例对象
            &lt;h2&gt;我是类定义的组件，适用于 复杂组件 的定义&lt;/h2&gt;
        &#125;
    &#125;
3). 渲染组件标签
    // 1. react 解析组件标签找到 MyComponentFunction 组件
    // 2. 发现组件是使用函数定义的，随后调用该函数，将返回的 虚拟DOM转为真是DOM，随后渲染页面
    //ReactDOM.render(&lt;MyComponentFunction&gt;&lt;/MyComponentFunction&gt;, document.getElementById(&quot;test&quot;))
    ReactDOM.render(&lt;MyComponentFunction/&gt;, document.getElementById(&quot;test&quot;))


    //ReactDOM.render(&lt;MyComponentClass&gt;&lt;/MyComponentClass&gt;, document.getElementById(&quot;test&quot;))
    ReactDOM.render(&lt;MyComponentClass /&gt;,  document.getElementById(&quot;test&quot;))
        // 1. react 解析组件标签找到 MyComponentClass 组件
        // 2. 发现组件是使用 类 定义的，随后 new 出来该实例，并通过 该实例调用原型上的render 方法
        // 3. 将render 返回的虚拟DOM转换为真实DOM，渲染页面
        
        
4). ReactDOM.render()渲染组件标签的基本流程
    React内部会创建组件实例对象/调用组件函数, 得到虚拟DOM对象
    将虚拟DOM并解析为真实DOM
    插入到指定的页面元素内部
</code></pre>
<h2 id="2-2-组件的3大属性-state"><a href="#2-2-组件的3大属性-state" class="headerlink" title="2.2. 组件的3大属性: state"></a>2.2. 组件的3大属性: state</h2><pre><code>1. 组件被称为&quot;状态机&quot;, 页面的显示是根据组件的state属性的数据来显示
2. 初始化指定:
    constructor() &#123;
      super()
      this.state = &#123;
        stateName1 : stateValue1,
        stateName2 : stateValue2
      &#125;
    &#125;
3. 读取显示: 
    this.state.stateName1
4. 更新状态--&gt;更新界面 : 
    this.setState(&#123;stateName1 : newValue&#125;)
</code></pre>
<p>this.state 继承自  父类 React.Component </p>
<p>后续 hooks 也可以让 函数式组件 有 stage。</p>
<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Weather extends React.Component &#123;</span><br><span class="line">        constructor(props) &#123;</span><br><span class="line">            super(props);</span><br><span class="line">            this.state = &#123;</span><br><span class="line">                isHot: true,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        render()&#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;h2&gt;今天天气很  &#123;this.state.isHot? &quot;炎热&quot;: &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Weather/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Weather extends React.Component &#123;</span><br><span class="line">        constructor(props) &#123;</span><br><span class="line">            super(props);</span><br><span class="line">            this.state = &#123;</span><br><span class="line">                isHot: true,</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            this.changeWeather = this.changeWeather.bind(this) // 绑定 this, 这里重新赋值了一个this.changeWeather，已经不是之前的  原型链上的 this.changeWeather 方法了。 </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        render()&#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;h2 onClick=&#123;this.changeWeather&#125;&gt;今天天气很  &#123;this.state.isHot? &quot;炎热&quot;: &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        changeWeather()&#123; // changeWeather 函数放到 类里面了</span><br><span class="line">            // changeWeather 放在哪里，  weather 的原型对象上， 供实例使用</span><br><span class="line">            // 由于 changeWeather 是作为onClick的回调，所以不是通过实例调用的，是直接调用的</span><br><span class="line">            // 就是说 把 this.changeWeather 这个函数名 重新赋值给了另外一个变量，然后 另外一个变量直接调用了。</span><br><span class="line">            // const x =  this.changeWeather</span><br><span class="line">            // x()</span><br><span class="line">            //  类似上面这2行。</span><br><span class="line"></span><br><span class="line">            // this.state = &#123;isHot: !this.state.isHot&#125;  state 不能直接更改</span><br><span class="line">            // 直接更改不会 改变页面变化的</span><br><span class="line">            const isHot = this.state.isHot</span><br><span class="line">            console.log(this)</span><br><span class="line">            this.setState(&#123;isHot: !isHot&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Weather/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>经过简化之后，去掉了 构造函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Weather extends React.Component &#123;</span><br><span class="line">        state = &#123; // 这里时间给 实例对象 添加一个  成员属性。</span><br><span class="line">            isHot: true,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render()&#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;h2 onClick=&#123;this.changeWeather&#125;&gt;今天天气很  &#123;this.state.isHot? &quot;炎热&quot;: &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        changeWeather = ()=&gt;&#123; // 箭头函数，里面的this 就是 外面的weather类实例对象</span><br><span class="line">            const isHot = this.state.isHot</span><br><span class="line">            this.setState(&#123;isHot: !isHot&#125;)  // 这里更新 动作 是一个合并的动作，不会把state 对象里面的 其他值给弄没了。</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Weather/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


<h2 id="2-2-组件的3大属性-props"><a href="#2-2-组件的3大属性-props" class="headerlink" title="2.2. 组件的3大属性: props"></a>2.2. 组件的3大属性: props</h2><pre><code>所有组件标签的属性的集合对象
给标签指定属性, 保存外部数据(可能是一个function)
在组件内部读取属性: this.props.propertyName
作用: 从目标组件外部向组件内部传递数据
对props中的属性值进行类型限制和必要性限制
    Person.propTypes = &#123;
        name: React.PropTypes.string.isRequired,
        age: React.PropTypes.number.isRequired
    &#125;
扩展属性: 将对象的所有属性通过props传递
    &lt;Person &#123;...person&#125;/&gt;
</code></pre>
<p>html 标签 属性， 就对应到 react 中的 prop了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        render()&#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt;姓名：&#123;this.props.name&#125;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;性别：&#123;this.props.sex&#125;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;年龄：&#123;this.props.age&#125;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // html 标签 属性， 就对应到 react 中的 prop了</span><br><span class="line">    ReactDOM.render(&lt;Person name=&quot;bright&quot; sex=&quot;男&quot; age=&quot;20&quot;/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line">    ReactDOM.render(&lt;Person name=&quot;annie&quot; age=&quot;18&quot; sex=&quot;女&quot;/&gt;, document.getElementById(&quot;test1&quot;))</span><br><span class="line"></span><br><span class="line">    const p = &#123;name: &quot;hans&quot;, age: 18, sex: &quot;nan&quot;&#125;</span><br><span class="line">    ReactDOM.render(&lt;Person &#123;...p&#125;/&gt;, document.getElementById(&quot;test2&quot;)) //这里使用 ... 三个点 展开运算符,只能用于标签属性展开</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>对标签属性进行 限制，react 15.5 之后的版本就不能如下这么使用了，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Person.propTypes = &#123;</span><br><span class="line">    name: React.PropTypes.string,</span><br><span class="line">    age: React.PropTypes.number,</span><br><span class="line">    sex:React.PropTypes.string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>使用  prop-types.js 来进行标签属性限制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;  引入这个 全局多一个 React 对象</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt; 引入这个 全局多一个 ReactDOM 对象</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt;  引入这个全局多一个  PropTypes 对象</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        render() &#123;</span><br><span class="line">            const &#123;name, age, sex&#125; = this.props</span><br><span class="line">            return (</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;年龄：&#123;age + 1&#125;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 对传递的标签属性 进行 类型的限制，如果整形，字符串型。</span><br><span class="line">    // 对 默认值的限制</span><br><span class="line">    // 对必填属性的限制</span><br><span class="line">    Person.propTypes = &#123;</span><br><span class="line">        name: PropTypes.string.isRequired,</span><br><span class="line">        age: PropTypes.number,</span><br><span class="line">        sex: PropTypes.string,</span><br><span class="line"></span><br><span class="line">        speak:PropTypes.func,// 限制为函数类型</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    Person.defaultProps = &#123;</span><br><span class="line">        sex: &#x27;null&#x27;,</span><br><span class="line">        age: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // html 标签 属性， 就对应到 react 中的 prop了</span><br><span class="line">    ReactDOM.render(&lt;Person name=&quot;bright&quot; sex=&quot;男&quot; age=&#123;22&#125;/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line">    ReactDOM.render(&lt;Person name=&quot;annie&quot; age=&#123;15&#125; sex=&quot;女&quot;/&gt;, document.getElementById(&quot;test1&quot;))</span><br><span class="line">    </span><br><span class="line">	ReactDOM.render(&lt;Person name=&quot;annie&quot;/&gt;, document.getElementById(&quot;test1&quot;))</span><br><span class="line">	// 这里再来个 标签，age ， sex 都没有设置，那么 就会使用到 默认值 Person.defaultProps  中的设置的值。</span><br><span class="line">    </span><br><span class="line">	ReactDOM.render(&lt;Person /&gt;, document.getElementById(&quot;test3&quot;))</span><br><span class="line">    //Warning: Failed prop type: The prop `name` is marked as required in `Person`, but its value is `undefined`.</span><br><span class="line">	// 这里如果 标签属性 name 都没设置，那么会 报警告的，因为 我们现在了name是 必填的         name: PropTypes.string.isRequired,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	//这里 speak 限制是func 类型，这里用双引号表示字符串类型，这是不对的，会报 警告的。</span><br><span class="line">    ReactDOM.render(&lt;Person name=&quot;annie&quot; age=&#123;15&#125; sex=&quot;女&quot; speak=&quot;speak&quot;/&gt;, document.getElementById(&quot;test1&quot;))</span><br><span class="line">    //Warning: Failed prop type: Invalid prop `speak` of type `string` supplied to `Person`, expected `function`.</span><br><span class="line"></span><br><span class="line">	// 正确的做法如下： 使用 &#123;speak&#125; 这样的方式设置标签speak的属性</span><br><span class="line">    ReactDOM.render(&lt;Person name=&quot;annie&quot; age=&#123;15&#125; sex=&quot;女&quot; speak=&#123;speak&#125;/&gt;, document.getElementById(&quot;test1&quot;))</span><br><span class="line">    function speak()&#123;</span><br><span class="line">        console.log(&quot;speak function&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const p = &#123;name: &quot;hans&quot;, age: 18, sex: &quot;nan&quot;&#125;</span><br><span class="line">    ReactDOM.render(&lt;Person &#123;...p&#125;/&gt;, document.getElementById(&quot;test2&quot;)) </span><br><span class="line">	//这里使用 ... 三个点 展开运算符,只能用于标签属性展开</span><br><span class="line">    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>完成对标签属性的限制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 对传递的标签属性 进行 类型的限制，如果整形，字符串型。</span><br><span class="line">// 对 默认值的限制</span><br><span class="line">// 对必填属性的限制</span><br><span class="line">Person.propTypes = &#123;</span><br><span class="line">    name: PropTypes.string.isRequired, //限制name必须的，且是字符串</span><br><span class="line">    age: PropTypes.number, // 限制年龄是 数字</span><br><span class="line">    sex: PropTypes.string, // 限制性别是字符串</span><br><span class="line">    speak:PropTypes.func,// 限制为函数类型</span><br><span class="line">&#125;</span><br><span class="line">Person.defaultProps = &#123;</span><br><span class="line">    sex: &#x27;null&#x27;,</span><br><span class="line">    age: 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>标签属性 props 是只读的,不能修改的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: &quot;name&quot; is read-only</span><br></pre></td></tr></table></figure>


<p>props的简写方式，直接放到类定义体里面，前面加上 static 关键字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">  class Person extends React.Component &#123;</span><br><span class="line">      render() &#123;</span><br><span class="line">          const &#123;name, age, sex&#125; = this.props</span><br><span class="line">          // this.props.name=&quot;12312&quot; 属性是只读的，不能修改</span><br><span class="line">          return (</span><br><span class="line">              &lt;ul&gt;</span><br><span class="line">                  &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span><br><span class="line">                  &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span><br><span class="line">                  &lt;li&gt;年龄：&#123;age + 1&#125;&lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 对传递的标签属性 进行 类型的限制，如果整形，字符串型。</span><br><span class="line">      // 对 默认值的限制</span><br><span class="line">      // 对必填属性的限制</span><br><span class="line">      static  propTypes = &#123;</span><br><span class="line">          name: PropTypes.string.isRequired, //限制name必须的，且是字符串</span><br><span class="line">          age: PropTypes.number, // 限制年龄是 数字</span><br><span class="line">          sex: PropTypes.string, // 限制性别是字符串</span><br><span class="line">          speak:PropTypes.func,// 限制为函数类型</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">// 如果不加 static 就会是 加到 类的实例对象上了，例如之前的 stage .</span><br><span class="line">// 这里 需要加上 static，这个props 是 属于 这个 类的，而不是 实例对象。</span><br><span class="line">      static defaultProps = &#123;</span><br><span class="line">          sex: &#x27;null&#x27;,</span><br><span class="line">          age: 0</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>类中的构造器到底有什么作用呢？ 传入了props，如果不传给super会这么样呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    class Weather extends React.Component &#123;</span><br><span class="line">        constructor(props) &#123;</span><br><span class="line">            super(props);</span><br><span class="line">            this.state = &#123;</span><br><span class="line">                isHot: true,</span><br><span class="line">            &#125;</span><br><span class="line">            this.changeWeather = this.changeWeather.bind(this) // 绑定 this, 这里重新赋值了一个this.changeWeather，已经不是之前的  原型链上的 this.changeWeather 方法了。</span><br><span class="line">        &#125;</span><br><span class="line">构造函数的作用： 官网描述， 通过给 this.state 赋值对象来初始化 内部stage的。 为事件函数绑定实例的。</span><br><span class="line">在构造函数中 不要调用 setStage() 方法， 如果你的组件需要使用 stage，直接在构造函数中 为 this.state 赋值。		</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        constructor(props) &#123;</span><br><span class="line">            super(props); // 构造器是否接收 props， 是否传递给super，取决于： 是否希望在构造器中通过 this 访问 props</span><br><span class="line">			// 就是说这里没有传给 super 那么在后面的 构造器代码中 就不能使用 this.props 访问了。发现 在 render 方法还是能继续 使用 this.props 的。</span><br><span class="line">            console.log(props)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">如果不初始化 stage 或 不进行方法绑定，则不需要为 react组件实现构造函数。</span><br><span class="line"></span><br><span class="line">在react 组件挂载之前，会调用他的构造函数，在为 react.component子类实现构造函数 时，</span><br><span class="line">应在其他语句之前调用super(props),否则，this.props 在构造函数中可能出现未定义的bug。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>函数式组件的 propsm, 函数式组件也只能 使用使用 props， 利用函数的参数来传入。 其他2个 stage， refs 都不能使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function PersonFunction(props)&#123;</span><br><span class="line">    const &#123;name, age, sex&#125; = props</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;姓名：&#123;name&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;性别：&#123;sex&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;年龄：&#123;age + 1&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;PersonFunction name=&quot;annie&quot; age=&#123;15&#125; sex=&quot;女&quot;/&gt;, document.getElementById(&quot;test2&quot;)) </span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="2-2-组件的3大属性-refs"><a href="#2-2-组件的3大属性-refs" class="headerlink" title="2.2. 组件的3大属性: refs"></a>2.2. 组件的3大属性: refs</h2><pre><code>组件内包含ref属性的标签元素的集合对象
给操作目标标签指定ref属性, 打一个标识
在组件内部获得标签对象: this.refs.refName(只是得到了标签元素对象)
作用: 找到组件内部的真实dom元素对象, 进而操作它
</code></pre>
<p>普通字符串形式的 ref</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">        showDataLeft = ()=&gt;&#123;</span><br><span class="line">            console.log(&quot;input1 value：&quot;, this.refs.input1.value)</span><br><span class="line">        &#125;</span><br><span class="line">        showDataRight = ()=&gt;&#123;</span><br><span class="line">            console.log(&quot;input2 value：&quot;, this.refs.input2.value)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    // 过时的 api，这里 使用 字符串 做 定义 refs了。后续不推荐使用了</span><br><span class="line">                    &lt;input ref=&quot;input1&quot; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line">                    &lt;input ref=&quot;input2&quot; onBlur=&#123;this.showDataRight&#125;type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person /&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>回调 形式的ref</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">        showDataLeft = ()=&gt;&#123;</span><br><span class="line">            console.log(&quot;input1 value：&quot;, this.input1.value)</span><br><span class="line">        &#125;</span><br><span class="line">        showDataRight = ()=&gt;&#123;</span><br><span class="line">            console.log(&quot;input2 value：&quot;, this.input2.value)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;input ref=&#123;(param)=&gt;&#123;this.input1 = param&#125;&#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line">                    &lt;input ref=&#123;(param)=&gt;&#123;this.input2 = param&#125;&#125; onBlur=&#123;this.showDataRight&#125;type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                //这里的回调 还能简写如下</span><br><span class="line">                 &lt;div&gt;</span><br><span class="line">                    &lt;input ref=&#123; param =&gt;this.input1 = param &#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line">                    &lt;input ref=&#123;param =&gt;this.input2 = param &#125; onBlur=&#123;this.showDataRight&#125;type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person /&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>这种使用内联的方式 回调 ref ，这个回调方法会执行2次。第一次 会传入参数是 null的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        state = &#123; // 这里时间给 实例对象 添加一个  成员属性。</span><br><span class="line">            isHot: true,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        showDataLeft = () =&gt; &#123;</span><br><span class="line">            console.log(&quot;input1 value：&quot;, this.input1.value)</span><br><span class="line">        &#125;</span><br><span class="line">        showDataRight = () =&gt; &#123;</span><br><span class="line">            console.log(&quot;input2 value：&quot;, this.input2.value)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        changeWeather = () =&gt; &#123;</span><br><span class="line">            const isHot = this.state.isHot</span><br><span class="line">            this.setState(&#123;isHot: !isHot&#125;)  // 这里更新 动作 是一个合并的动作，不会把state 对象里面的 其他值给弄没了。</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h2 onClick=&#123;this.changeWeather&#125;&gt;今天天气很 &#123;this.state.isHot ? &quot;炎热&quot; : &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">                    &lt;br/&gt;</span><br><span class="line">                    &lt;input ref=&#123;(param)=&gt;&#123;this.input1 = param;  console.log(&quot;input111111111111&quot;, param)&#125;&#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line">                    &lt;input ref=&#123;param =&gt; this.input2 = param&#125; onBlur=&#123;this.showDataRight&#125;</span><br><span class="line">                           type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        state = &#123; // 这里时间给 实例对象 添加一个  成员属性。</span><br><span class="line">            isHot: true,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        showDataLeft = () =&gt; &#123;</span><br><span class="line">            console.log(this)</span><br><span class="line">            console.log(&quot;input1 value：&quot;, this.input1.value)</span><br><span class="line">        &#125;</span><br><span class="line">        showDataRight = () =&gt; &#123;</span><br><span class="line">            console.log(&quot;input2 value：&quot;, this.input2.value)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        changeWeather = () =&gt; &#123;</span><br><span class="line">            const isHot = this.state.isHot</span><br><span class="line">            this.setState(&#123;isHot: !isHot&#125;)  // 这里更新 动作 是一个合并的动作，不会把state 对象里面的 其他值给弄没了。</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        input2 = (param) =&gt; &#123;</span><br><span class="line">            this.input2 = param;</span><br><span class="line">            console.log(&quot;input2222222222&quot;, param)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h2 onClick=&#123;this.changeWeather&#125;&gt;今天天气很 &#123;this.state.isHot ? &quot;炎热&quot; : &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">                    &lt;br/&gt;</span><br><span class="line">                    // 这个还是内联方式回调的。这样会调用2次，第一次就会 把这个值设置为null了，第2次调用就会传入当前标签</span><br><span class="line">                    &lt;input ref=&#123;(param) =&gt; &#123;this.input1 = param;&#125;&#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;input ref=&#123;this.input2&#125; onBlur=&#123;this.showDataRight&#125; type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        state = &#123; // 这里时间给 实例对象 添加一个  成员属性。</span><br><span class="line">            isHot: true,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        showDataLeft = () =&gt; &#123;</span><br><span class="line">            console.log(this)</span><br><span class="line">            console.log(&quot;input1 value：&quot;, this.input1.value)</span><br><span class="line">        &#125;</span><br><span class="line">        showDataRight = () =&gt; &#123;</span><br><span class="line">            console.log(&quot;input2 value：&quot;, this.input2.value)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        changeWeather = () =&gt; &#123;</span><br><span class="line">            const isHot = this.state.isHot</span><br><span class="line">            this.setState(&#123;isHot: !isHot&#125;)  // 这里更新 动作 是一个合并的动作，不会把state 对象里面的 其他值给弄没了。</span><br><span class="line">        &#125;</span><br><span class="line">        // 注意这里的 inputRef 名称 千万别和 里面的 input1 命令成一样的了！！！！！！！！！！</span><br><span class="line">        input1ref = (param) =&gt; &#123;</span><br><span class="line">            this.input1 = param;</span><br><span class="line">            console.log(&quot;11&quot;, param)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input2ref = (param) =&gt; &#123;</span><br><span class="line">            this.input2 = param;</span><br><span class="line">            console.log(&quot;22&quot;, param)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h2 onClick=&#123;this.changeWeather&#125;&gt;今天天气很 &#123;this.state.isHot ? &quot;炎热&quot; : &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">                    &lt;br/&gt;</span><br><span class="line">                    // 想这种的 把回调绑定到类上的，之后刷新组件也只是会调用一次的。</span><br><span class="line">                    &lt;input ref=&#123;this.input1ref&#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line">                    &lt;input ref=&#123;this.input2ref&#125; type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用 React.createRef();创建ref，这是官方最推荐的，这个在reac 16.3 之后版本才有。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!--&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;--&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/react@16.3.0/umd/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;--&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/react-dom@16.3.0/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--    &lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;--&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/@babel/standalone@7.19.0/babel.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Person extends React.Component &#123;</span><br><span class="line">        state = &#123; // 这里时间给 实例对象 添加一个  成员属性。</span><br><span class="line">            isHot: true,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        showDataLeft = () =&gt; &#123;</span><br><span class="line">            console.log(this)</span><br><span class="line">            console.log(&quot;input1 value：&quot;, this.input1.value)</span><br><span class="line">        &#125;</span><br><span class="line">        showDataRight = () =&gt; &#123;</span><br><span class="line">            console.log(&quot;input2 value：&quot;, this.input2.value)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        changeWeather = () =&gt; &#123;</span><br><span class="line">            const isHot = this.state.isHot</span><br><span class="line">            this.setState(&#123;isHot: !isHot&#125;)  // 这里更新 动作 是一个合并的动作，不会把state 对象里面的 其他值给弄没了。</span><br><span class="line">        &#125;</span><br><span class="line">        input1ref = (param) =&gt; &#123;</span><br><span class="line">            this.input1 = param;</span><br><span class="line">            console.log(&quot;11&quot;, param)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input2ref = (param) =&gt; &#123;</span><br><span class="line">            this.input2 = param;</span><br><span class="line">            console.log(&quot;22&quot;, param)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input3ref = React.createRef();</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h2 onClick=&#123;this.changeWeather&#125;&gt;今天天气很 &#123;this.state.isHot ? &quot;炎热&quot; : &quot;凉爽&quot;&#125;&lt;/h2&gt;</span><br><span class="line">                    &lt;br/&gt;</span><br><span class="line">                    &lt;input ref=&#123;this.input1ref&#125; type=&quot;text&quot; placeholder=&quot;点击按钮提示数据&quot;/&gt;</span><br><span class="line">                    &lt;button ref=&quot;button1&quot; onClick=&#123;this.showDataLeft&#125;&gt;点我&lt;/button&gt;</span><br><span class="line">                    &lt;input ref=&#123;this.input2ref&#125; type=&quot;text&quot; placeholder=&quot;失去焦点提示数据&quot;/&gt;</span><br><span class="line">                    &lt;br/&gt;</span><br><span class="line">                    &lt;input ref=&#123;this.input3ref&#125; type=&quot;text&quot; placeholder=&quot;input3ref&quot;/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Person/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="2-3-组件中的事件处理"><a href="#2-3-组件中的事件处理" class="headerlink" title="2.3. 组件中的事件处理"></a>2.3. 组件中的事件处理</h2><pre><code>1. 给标签添加属性: onXxx=&#123;this.eventHandler&#125;
2. 在组件中添加事件处理方法
    eventHandler(event) &#123;
                
    &#125;
3. 使自定义方法中的this为组件对象
  	在constructor()中bind(this)
  	使用箭头函数定义方法(ES6模块化编码时才能使用)
4. 事件监听
    绑定事件监听
        事件名
        回调函数
    触发事件
        用户对对应的界面做对应的操作
        编码
</code></pre>
<h2 id="2-4-组件的组合使用"><a href="#2-4-组件的组合使用" class="headerlink" title="2.4. 组件的组合使用"></a>2.4. 组件的组合使用</h2><pre><code>1)拆分组件: 拆分界面,抽取组件
2)实现静态组件: 使用组件实现静态页面效果
3)实现动态组件
    ①　动态显示初始化数据
    ②　交互功能(从绑定事件监听开始)
</code></pre>
<h2 id="2-5-组件收集表单数据"><a href="#2-5-组件收集表单数据" class="headerlink" title="2.5. 组件收集表单数据"></a>2.5. 组件收集表单数据</h2><pre><code>受控组件
非受控组件
</code></pre>
<p>受控组件,可以省略ref</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Login extends React.Component &#123;</span><br><span class="line">        handleSubmit = (event) =&gt; &#123;</span><br><span class="line">            event.preventDefault() // 阻止表单默认提交</span><br><span class="line">            console.log(this.state)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        state = &#123;</span><br><span class="line">            username: &quot;&quot;,</span><br><span class="line">            password: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        saveUsername = (event) =&gt; &#123;</span><br><span class="line">            this.setState(&#123;username: event.target.value&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        savePassword = (event) =&gt; &#123;</span><br><span class="line">            this.setState(&#123;password: event.target.value&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;form action=&quot;&quot; onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">                    username&lt;input onChange=&#123;this.saveUsername&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">                    password&lt;input onChange=&#123;this.savePassword&#125; type=&quot;text&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">                    &lt;button&gt;login&lt;/button&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Login/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>一个优化的写法，onchange 里面调用的一个方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Login extends React.Component &#123;</span><br><span class="line">        handleSubmit = (event) =&gt; &#123;</span><br><span class="line">            event.preventDefault() // 阻止表单默认提交</span><br><span class="line">            console.log(this.state)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        state = &#123;</span><br><span class="line">            username: &quot;&quot;,</span><br><span class="line">            password: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        saveUsername = (event) =&gt; &#123;</span><br><span class="line">            this.setState(&#123;username: event.target.value&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        savePassword = (event) =&gt; &#123;</span><br><span class="line">            this.setState(&#123;password: event.target.value&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        save = (data) =&gt; &#123;</span><br><span class="line">            return (event) =&gt; &#123;</span><br><span class="line">                console.log(data, event.target.value)</span><br><span class="line">                this.setState(&#123;[data]: event.target.value&#125;)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;form action=&quot;&quot; onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">                    username&lt;input onChange=&#123;this.save(&quot;username&quot;)&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">                    password&lt;input onChange=&#123;this.save(&quot;password&quot;)&#125; type=&quot;text&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">                    &lt;button&gt;login&lt;/button&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Login/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


<p>非受控组件,数据现用现取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Login extends React.Component &#123;</span><br><span class="line">        handleSubmit = (event) =&gt; &#123;</span><br><span class="line">            event.preventDefault() // 阻止表单默认提交</span><br><span class="line">            const &#123;username, password&#125; = this</span><br><span class="line">            console.log(this, username.value, password.value)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;form action=&quot;&quot; onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">                    username&lt;input ref=&#123;c =&gt; this.username = c&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">                    password&lt;input ref=&#123;c =&gt; this.password = c&#125; type=&quot;text&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">                    &lt;button&gt;login&lt;/button&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Login/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-6-组件的生命周期"><a href="#2-6-组件的生命周期" class="headerlink" title="2.6. 组件的生命周期"></a>2.6. 组件的生命周期</h2><pre><code>1. 组件的三个生命周期状态:
    Mount：插入真实 DOM
    Update：被重新渲染
    Unmount：被移出真实 DOM
2. 生命周期流程:
    * 第一次初始化显示: ReactDOM.render(&lt;Xxx/&gt;, containDom)
        constructor()
        componentWillMount() : 将要插入回调
        render() : 用于插入虚拟DOM回调
        componentDidMount() : 已经插入回调
    * 每次更新state: this.setState(&#123;&#125;)
        componentWillReceiveProps(): 接收父组件新的属性
        componentWillUpdate() : 将要更新回调
        render() : 更新(重新渲染)
        componentDidUpdate() : 已经更新回调
    * 删除组件: ReactDOM.unmountComponentAtNode(div): 移除组件
        componentWillUnmount() : 组件将要被移除回调
3. 常用的方法
    render(): 必须重写, 返回一个自定义的虚拟DOM
  	constructor(): 初始化状态, 绑定this(可以箭头函数代替)
  	componentDidMount() : 只执行一次, 已经在dom树中, 适合启动/设置一些监听
</code></pre>
<p><img src= "/img/loading.gif" data-lazy-src="http://i.imgur.com/h5khD9F.png" alt="组件生命周期"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script type=&quot;text/babel&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    class Test extends React.Component &#123;</span><br><span class="line">        constructor(props) &#123;</span><br><span class="line">            super(props);</span><br><span class="line">            console.log(&quot;this is constructor function&quot;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        state = &#123;</span><br><span class="line">            count: 0</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        add = () =&gt; &#123;</span><br><span class="line">            let &#123;count&#125; = this.state;</span><br><span class="line">            count += 1</span><br><span class="line">            this.setState(&#123;count&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        componentWillMount()&#123;</span><br><span class="line">            console.log(&quot;this is componentWillMount function&quot;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        componentDidMount() &#123;</span><br><span class="line">            console.log(&quot;this is componentDidMount function&quot;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        componentWillUnmount()&#123;</span><br><span class="line">            console.log(&quot;this is componentWillUnmount function&quot;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        shouldComponentUpdate()&#123;</span><br><span class="line">            console.log(&quot;this is shouldComponentUpdate function&quot;)</span><br><span class="line">            return true</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        componentWillUpdate()&#123;</span><br><span class="line">            console.log(&quot;this is componentWillUpdate function&quot;)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        componentDidUpdate()&#123;</span><br><span class="line">            console.log(&quot;this is componentDidUpdate function&quot;)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            console.log(&quot;this is render function&quot;)</span><br><span class="line"></span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h2&gt;逐渐+1 &#123;this.state.count&#125;&lt;/h2&gt;</span><br><span class="line">                    &lt;button onClick=&#123;this.add&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ReactDOM.render(&lt;Test/&gt;, document.getElementById(&quot;test&quot;))</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-7-虚拟DOM与DOM-diff算法"><a href="#2-7-虚拟DOM与DOM-diff算法" class="headerlink" title="2.7. 虚拟DOM与DOM diff算法"></a>2.7. 虚拟DOM与DOM diff算法</h2><h3 id="1-虚拟DOM是什么"><a href="#1-虚拟DOM是什么" class="headerlink" title="1). 虚拟DOM是什么?"></a>1). 虚拟DOM是什么?</h3><pre><code>一个虚拟DOM(元素)是一个一般的js对象, 准确的说是一个对象树(倒立的)
虚拟DOM保存了真实DOM的层次关系和一些基本属性，与真实DOM一一对应
如果只是更新虚拟DOM, 页面是不会重绘的
</code></pre>
<h3 id="2-Virtual-DOM-算法的基本步骤"><a href="#2-Virtual-DOM-算法的基本步骤" class="headerlink" title="2). Virtual DOM 算法的基本步骤"></a>2). Virtual DOM 算法的基本步骤</h3><pre><code>用JS对象树表示DOM树的结构；然后用这个树构建一个真正的DOM树插到文档当中
当状态变更的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树差异
把差异应用到真实DOM树上，视图就更新了
</code></pre>
<h3 id="3-进一步理解"><a href="#3-进一步理解" class="headerlink" title="3). 进一步理解"></a>3). 进一步理解</h3><pre><code>Virtual DOM 本质上就是在 JS 和 DOM 之间做了一个缓存。
可以类比 CPU 和硬盘，既然硬盘这么慢，我们就在它们之间加个缓存：既然 DOM 这么慢，我们就在它们 JS 和 DOM 之间加个缓存。CPU（JS）只操作内存（Virtual DOM），最后的时候再把变更写入硬盘（DOM）。
</code></pre>
<p><img src= "/img/loading.gif" data-lazy-src="http://i.imgur.com/psaZdqN.png"></p>
<h2 id="2-8-命令式编程与声明式编程"><a href="#2-8-命令式编程与声明式编程" class="headerlink" title="2.8. 命令式编程与声明式编程"></a>2.8. 命令式编程与声明式编程</h2><pre><code>声明式编程
    只关注做什么, 而不关注怎么做(流程),  类似于填空题
命令式编程
    要关注做什么和怎么做(流程), 类似于问答题

var arr = [1, 3, 5, 7]
// 需求: 得到一个新的数组, 数组中每个元素都比arr中对应的元素大10: [11, 13, 15, 17]
// 命令式编程
var arr2 = []
for(var i =0;i&lt;arr.length;i++) &#123;
    arr2.push(arr[i]+10)
&#125;
console.log(arr2)
// 声明式编程
var arr3 = arr.map(function(item)&#123;
    return item +10
&#125;)
// 声明式编程是建立命令式编程的基础上

// 数组中常见声明式方法
    map() / forEach() / find() / findIndex()
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://magesfc.github.io">mage</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://magesfc.github.io/mage/a6082cc302dc1ea3400936da1405365de03cbc7f/">https://magesfc.github.io/mage/a6082cc302dc1ea3400936da1405365de03cbc7f/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://magesfc.github.io" target="_blank">马哥私房菜</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/react/">react</a></div><div class="post_share"><div class="social-share" data-image="https://t.mwm.moe/fj/" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/null" alt="支付寶"/></a><div class="post-qr-code-desc">支付寶</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/mage/11746f2e578549a6bef3af02d587fa65f8a9b7ab/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Nightingale学习之安装部署</div></div></a></div><div class="next-post pull-right"><a href="/mage/38b16f805c0e0bfdce028d95fdd10a0b160e9167/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux学习之文件系统btrfs文件系统</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mage</div><div class="author-info__description"> 这里是 马哥 的个人博客 </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">233</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">41</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mamh2021"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mamh2021" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-React%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">1. React入门</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-React%E7%BB%84%E4%BB%B6%E5%8C%96%E7%BC%96%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">2. React组件化编程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-React%E5%85%A5%E9%97%A8-1"><span class="toc-number">3.</span> <span class="toc-text">1. React入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-React%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%86"><span class="toc-number">3.1.</span> <span class="toc-text">1.1. React的基本认识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-React%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">1.2. React的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-JSX%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">1.3. JSX的理解和使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3"><span class="toc-number">3.4.</span> <span class="toc-text">1.4. 几个重要概念理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A8%A1%E5%9D%97%E4%B8%8E%E7%BB%84%E4%BB%B6"><span class="toc-number">3.4.1.</span> <span class="toc-text">1). 模块与组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A8%A1%E5%9D%97%E5%8C%96%E4%B8%8E%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">3.4.2.</span> <span class="toc-text">2). 模块化与组件化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-react%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-number">4.</span> <span class="toc-text">2. react组件化开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%9F%BA%E6%9C%AC%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">4.1.</span> <span class="toc-text">2.1. 基本理解和使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%BB%84%E4%BB%B6%E7%9A%843%E5%A4%A7%E5%B1%9E%E6%80%A7-state"><span class="toc-number">4.2.</span> <span class="toc-text">2.2. 组件的3大属性: state</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%BB%84%E4%BB%B6%E7%9A%843%E5%A4%A7%E5%B1%9E%E6%80%A7-props"><span class="toc-number">4.3.</span> <span class="toc-text">2.2. 组件的3大属性: props</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%BB%84%E4%BB%B6%E7%9A%843%E5%A4%A7%E5%B1%9E%E6%80%A7-refs"><span class="toc-number">4.4.</span> <span class="toc-text">2.2. 组件的3大属性: refs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">4.5.</span> <span class="toc-text">2.3. 组件中的事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8"><span class="toc-number">4.6.</span> <span class="toc-text">2.4. 组件的组合使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E7%BB%84%E4%BB%B6%E6%94%B6%E9%9B%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number">4.7.</span> <span class="toc-text">2.5. 组件收集表单数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.8.</span> <span class="toc-text">2.6. 组件的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E8%99%9A%E6%8B%9FDOM%E4%B8%8EDOM-diff%E7%AE%97%E6%B3%95"><span class="toc-number">4.9.</span> <span class="toc-text">2.7. 虚拟DOM与DOM diff算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9FDOM%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">4.9.1.</span> <span class="toc-text">1). 虚拟DOM是什么?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Virtual-DOM-%E7%AE%97%E6%B3%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4"><span class="toc-number">4.9.2.</span> <span class="toc-text">2). Virtual DOM 算法的基本步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3"><span class="toc-number">4.9.3.</span> <span class="toc-text">3). 进一步理解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E5%91%BD%E4%BB%A4%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-number">4.10.</span> <span class="toc-text">2.8. 命令式编程与声明式编程</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/mage/9ab308c95469970c6521fc8ef60e93b7c03762cf/" title="repo系列之manifest文件详解"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="repo系列之manifest文件详解"/></a><div class="content"><a class="title" href="/mage/9ab308c95469970c6521fc8ef60e93b7c03762cf/" title="repo系列之manifest文件详解">repo系列之manifest文件详解</a><time datetime="2024-05-19T02:04:08.000Z" title="更新于 2024-05-19 10:04:08">2024-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/a0bae3048a8dc98f5510b45ba22cd0835fb0a5c7/" title="repo系列之repo-sync源码分析"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="repo系列之repo-sync源码分析"/></a><div class="content"><a class="title" href="/mage/a0bae3048a8dc98f5510b45ba22cd0835fb0a5c7/" title="repo系列之repo-sync源码分析">repo系列之repo-sync源码分析</a><time datetime="2024-05-19T02:04:08.000Z" title="更新于 2024-05-19 10:04:08">2024-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/0448237c7834c3a6195e57657c4d3b9ce5e8c9b1/" title="repo系列之repo支持多线程去checkout的"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="repo系列之repo支持多线程去checkout的"/></a><div class="content"><a class="title" href="/mage/0448237c7834c3a6195e57657c4d3b9ce5e8c9b1/" title="repo系列之repo支持多线程去checkout的">repo系列之repo支持多线程去checkout的</a><time datetime="2024-05-19T02:04:08.000Z" title="更新于 2024-05-19 10:04:08">2024-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/131313016efd82df833ecabaaa6a36a5e8634cb6/" title="repo系列之仓库下面的commit-msg是怎么生成"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="repo系列之仓库下面的commit-msg是怎么生成"/></a><div class="content"><a class="title" href="/mage/131313016efd82df833ecabaaa6a36a5e8634cb6/" title="repo系列之仓库下面的commit-msg是怎么生成">repo系列之仓库下面的commit-msg是怎么生成</a><time datetime="2024-05-19T02:04:08.000Z" title="更新于 2024-05-19 10:04:08">2024-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/mage/b3d11abbe3b6bfd222423d4631b8b6b38401061d/" title="repo系列之repo-diffmanifests源码分析"><img src= "/img/loading.gif" data-lazy-src="https://t.mwm.moe/fj/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="repo系列之repo-diffmanifests源码分析"/></a><div class="content"><a class="title" href="/mage/b3d11abbe3b6bfd222423d4631b8b6b38401061d/" title="repo系列之repo-diffmanifests源码分析">repo系列之repo-diffmanifests源码分析</a><time datetime="2024-05-19T02:04:08.000Z" title="更新于 2024-05-19 10:04:08">2024-05-19</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://t.mwm.moe/fj/')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By mage</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>